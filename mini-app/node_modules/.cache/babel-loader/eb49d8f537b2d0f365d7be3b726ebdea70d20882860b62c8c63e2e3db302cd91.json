{"ast":null,"code":"import * as React from 'react';\nimport { useDOM } from '../lib/dom';\nimport { noop } from '@vkontakte/vkjs';\nimport { transitionEvent } from '../lib/supportEvents';\nexport var useWaitTransitionFinish = function useWaitTransitionFinish() {\n  var timeoutRef = React.useRef(null);\n  var _useDOM = useDOM(),\n    document = _useDOM.document;\n  var detach = React.useRef(noop);\n  var remove = React.useCallback(function () {\n    detach.current();\n    detach.current = noop;\n  }, []);\n  var waitTransitionFinish = React.useCallback(function (element, eventHandler, durationFallback) {\n    if (element) {\n      if (!(document !== null && document !== void 0 && document.hidden) && transitionEvent.supported && transitionEvent.name) {\n        remove();\n        element.addEventListener(transitionEvent.name, eventHandler);\n        detach.current = function () {\n          if (transitionEvent.name) {\n            element.removeEventListener(transitionEvent.name, eventHandler);\n          }\n        };\n      } else {\n        if (timeoutRef !== null && timeoutRef !== void 0 && timeoutRef.current) {\n          clearTimeout(timeoutRef.current);\n        }\n        timeoutRef.current = setTimeout(eventHandler, durationFallback);\n      }\n    }\n  }, [document, remove, timeoutRef]);\n  return {\n    waitTransitionFinish: waitTransitionFinish\n  };\n};","map":{"version":3,"names":["React","useDOM","noop","transitionEvent","useWaitTransitionFinish","timeoutRef","useRef","_useDOM","document","detach","remove","useCallback","current","waitTransitionFinish","element","eventHandler","durationFallback","hidden","supported","name","addEventListener","removeEventListener","clearTimeout","setTimeout"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\hooks\\useWaitTransitionFinish.ts"],"sourcesContent":["import * as React from 'react';\nimport { useDOM } from '../lib/dom';\nimport { noop } from '@vkontakte/vkjs';\nimport { transitionEvent } from '../lib/supportEvents';\n\nexport const useWaitTransitionFinish = () => {\n  const timeoutRef = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n  const { document } = useDOM();\n  const detach = React.useRef(noop);\n\n  const remove = React.useCallback(() => {\n    detach.current();\n    detach.current = noop;\n  }, []);\n\n  const waitTransitionFinish = React.useCallback(\n    (element: HTMLElement | null, eventHandler: VoidFunction, durationFallback: number) => {\n      if (element) {\n        if (!document?.hidden && transitionEvent.supported && transitionEvent.name) {\n          remove();\n          element.addEventListener(transitionEvent.name, eventHandler);\n          detach.current = () => {\n            if (transitionEvent.name) {\n              element.removeEventListener(transitionEvent.name, eventHandler);\n            }\n          };\n        } else {\n          if (timeoutRef?.current) {\n            clearTimeout(timeoutRef.current);\n          }\n          timeoutRef.current = setTimeout(eventHandler, durationFallback);\n        }\n      }\n    },\n    [document, remove, timeoutRef],\n  );\n\n  return {\n    waitTransitionFinish,\n  };\n};\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,MAAM,QAAQ,YAAY;AACnC,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SAASC,eAAe,QAAQ,sBAAsB;AAEtD,OAAO,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;EAC3C,IAAMC,UAAU,GAAGL,KAAK,CAACM,MAAM,CAAuC,IAAI,CAAC;EAC3E,IAAAC,OAAA,GAAqBN,MAAM,EAAE;IAArBO,QAAQ,GAAAD,OAAA,CAARC,QAAQ;EAChB,IAAMC,MAAM,GAAGT,KAAK,CAACM,MAAM,CAACJ,IAAI,CAAC;EAEjC,IAAMQ,MAAM,GAAGV,KAAK,CAACW,WAAW,CAAC,YAAM;IACrCF,MAAM,CAACG,OAAO,EAAE;IAChBH,MAAM,CAACG,OAAO,GAAGV,IAAI;EACvB,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMW,oBAAoB,GAAGb,KAAK,CAACW,WAAW,CAC5C,UAACG,OAA2B,EAAEC,YAA0B,EAAEC,gBAAwB,EAAK;IACrF,IAAIF,OAAO,EAAE;MACX,IAAI,EAACN,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAES,MAAM,KAAId,eAAe,CAACe,SAAS,IAAIf,eAAe,CAACgB,IAAI,EAAE;QAC1ET,MAAM,EAAE;QACRI,OAAO,CAACM,gBAAgB,CAACjB,eAAe,CAACgB,IAAI,EAAEJ,YAAY,CAAC;QAC5DN,MAAM,CAACG,OAAO,GAAG,YAAM;UACrB,IAAIT,eAAe,CAACgB,IAAI,EAAE;YACxBL,OAAO,CAACO,mBAAmB,CAAClB,eAAe,CAACgB,IAAI,EAAEJ,YAAY,CAAC;UACjE;QACF,CAAC;MACH,CAAC,MAAM;QACL,IAAIV,UAAU,aAAVA,UAAU,eAAVA,UAAU,CAAEO,OAAO,EAAE;UACvBU,YAAY,CAACjB,UAAU,CAACO,OAAO,CAAC;QAClC;QACAP,UAAU,CAACO,OAAO,GAAGW,UAAU,CAACR,YAAY,EAAEC,gBAAgB,CAAC;MACjE;IACF;EACF,CAAC,EACD,CAACR,QAAQ,EAAEE,MAAM,EAAEL,UAAU,CAAC,CAC/B;EAED,OAAO;IACLQ,oBAAoB,EAApBA;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}