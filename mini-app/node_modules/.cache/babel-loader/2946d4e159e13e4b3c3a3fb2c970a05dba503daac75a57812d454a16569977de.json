{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"onStart\", \"onStartX\", \"onStartY\", \"onMove\", \"onMoveX\", \"onMoveY\", \"onLeave\", \"onEnter\", \"onEnd\", \"onEndX\", \"onEndY\", \"onClickCapture\", \"usePointerHover\", \"slideThreshold\", \"useCapture\", \"Component\", \"getRootRef\", \"noSlideClick\", \"stopPropagation\"];\nimport * as React from 'react';\nimport { getSupportedEvents, coordX, coordY, touchEnabled } from '../../lib/touch';\nimport { useDOM } from '../../lib/dom';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\n/**\n * @see https://vkcom.github.io/VKUI/#/Touch\n */\nexport var Touch = function Touch(_ref) {\n  var onStart = _ref.onStart,\n    onStartX = _ref.onStartX,\n    onStartY = _ref.onStartY,\n    _onMove = _ref.onMove,\n    onMoveX = _ref.onMoveX,\n    onMoveY = _ref.onMoveY,\n    onLeave = _ref.onLeave,\n    onEnter = _ref.onEnter,\n    _onEnd = _ref.onEnd,\n    onEndX = _ref.onEndX,\n    onEndY = _ref.onEndY,\n    onClickCapture = _ref.onClickCapture,\n    usePointerHover = _ref.usePointerHover,\n    _ref$slideThreshold = _ref.slideThreshold,\n    slideThreshold = _ref$slideThreshold === void 0 ? 5 : _ref$slideThreshold,\n    _ref$useCapture = _ref.useCapture,\n    useCapture = _ref$useCapture === void 0 ? false : _ref$useCapture,\n    _ref$Component = _ref.Component,\n    Component = _ref$Component === void 0 ? 'div' : _ref$Component,\n    getRootRef = _ref.getRootRef,\n    _ref$noSlideClick = _ref.noSlideClick,\n    noSlideClick = _ref$noSlideClick === void 0 ? false : _ref$noSlideClick,\n    _ref$stopPropagation = _ref.stopPropagation,\n    stopPropagation = _ref$stopPropagation === void 0 ? false : _ref$stopPropagation,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var _useDOM = useDOM(),\n    document = _useDOM.document;\n  var events = React.useMemo(getSupportedEvents, []);\n  var didSlide = React.useRef(false);\n  var gesture = React.useRef(null);\n  var handle = function handle(e, handlers) {\n    stopPropagation && e.stopPropagation();\n    handlers.forEach(function (cb) {\n      var _gesture$current$star, _gesture$current, _gesture$current$star2;\n      var duration = Date.now() - ((_gesture$current$star = (_gesture$current = gesture.current) === null || _gesture$current === void 0 ? void 0 : (_gesture$current$star2 = _gesture$current.startT) === null || _gesture$current$star2 === void 0 ? void 0 : _gesture$current$star2.getTime()) !== null && _gesture$current$star !== void 0 ? _gesture$current$star : 0);\n      cb && cb(_objectSpread(_objectSpread({}, gesture.current), {}, {\n        duration: duration,\n        originalEvent: e\n      }));\n    });\n  };\n  var enterHandler = useEventListener(usePointerHover ? 'pointerenter' : 'mouseenter', onEnter);\n  var leaveHandler = useEventListener(usePointerHover ? 'pointerleave' : 'mouseleave', onLeave);\n  var startHandler = useEventListener(events[0], function (e) {\n    gesture.current = initGesture(coordX(e), coordY(e));\n    handle(e, [onStart, onStartX, onStartY]);\n    // 1 line, 2 bad specs, 2 workarounds:\n    subscribe(touchEnabled() ?\n    // Touch events fire on initial target, and won't bubble if its removed\n    // see: #235, #1968, https://stackoverflow.com/a/45760014\n    e.target :\n    // Mouse events fire on the element under pointer, so we lose move / end\n    // if pointer goes outside container.\n    // Can be fixed by PointerEvents' setPointerCapture later\n    document);\n  }, {\n    capture: useCapture,\n    passive: false\n  });\n  var containerRef = useExternRef(getRootRef);\n  useIsomorphicLayoutEffect(function () {\n    var el = containerRef.current;\n    if (el) {\n      enterHandler.add(el);\n      leaveHandler.add(el);\n      startHandler.add(el);\n    }\n  }, [Component]);\n  function onMove(e) {\n    var _gesture$current2;\n    var _ref2 = (_gesture$current2 = gesture.current) !== null && _gesture$current2 !== void 0 ? _gesture$current2 : {},\n      isPressed = _ref2.isPressed,\n      isX = _ref2.isX,\n      isY = _ref2.isY,\n      _ref2$startX = _ref2.startX,\n      startX = _ref2$startX === void 0 ? 0 : _ref2$startX,\n      _ref2$startY = _ref2.startY,\n      startY = _ref2$startY === void 0 ? 0 : _ref2$startY;\n    if (isPressed) {\n      var _gesture$current3;\n      // смещения\n      var shiftX = coordX(e) - startX;\n      var shiftY = coordY(e) - startY;\n\n      // абсолютные значения смещений\n      var shiftXAbs = Math.abs(shiftX);\n      var shiftYAbs = Math.abs(shiftY);\n\n      // Если определяем мультитач, то прерываем жест\n      if (!!e.touches && e.touches.length > 1) {\n        return onEnd(e);\n      }\n\n      // если мы ещё не определились\n      if (!isX && !isY) {\n        var willBeX = shiftXAbs >= slideThreshold && shiftXAbs > shiftYAbs;\n        var willBeY = shiftYAbs >= slideThreshold && shiftYAbs > shiftXAbs;\n        var willBeSlidedX = willBeX && (!!onMoveX || !!_onMove);\n        var willBeSlidedY = willBeY && (!!onMoveY || !!_onMove);\n        if (gesture.current) {\n          Object.assign(gesture.current, {\n            isY: willBeY,\n            isX: willBeX,\n            isSlideX: willBeSlidedX,\n            isSlideY: willBeSlidedY,\n            isSlide: willBeSlidedX || willBeSlidedY\n          });\n        }\n      }\n      if ((_gesture$current3 = gesture.current) !== null && _gesture$current3 !== void 0 && _gesture$current3.isSlide) {\n        Object.assign(gesture.current, {\n          shiftX: shiftX,\n          shiftY: shiftY,\n          shiftXAbs: shiftXAbs,\n          shiftYAbs: shiftYAbs\n        });\n        handle(e, [_onMove, gesture.current.isSlideX && onMoveX, gesture.current.isSlideY && onMoveY]);\n      }\n    }\n  }\n  function onEnd(e) {\n    var _gesture$current4;\n    var _ref3 = (_gesture$current4 = gesture.current) !== null && _gesture$current4 !== void 0 ? _gesture$current4 : {},\n      isPressed = _ref3.isPressed,\n      isSlide = _ref3.isSlide,\n      isSlideX = _ref3.isSlideX,\n      isSlideY = _ref3.isSlideY;\n    if (isPressed) {\n      handle(e, [_onEnd, isSlideY && onEndY, isSlideX && onEndX]);\n    }\n    didSlide.current = Boolean(isSlide);\n    gesture.current = {};\n\n    // Если это был тач-евент, симулируем отмену hover\n    if (touchEnabled()) {\n      onLeave && onLeave(e);\n    }\n    unsubscribe();\n  }\n  var listenerParams = {\n    capture: useCapture,\n    passive: false\n  };\n  var listeners = [useEventListener(events[1], onMove, listenerParams), useEventListener(events[2], onEnd, listenerParams), useEventListener(events[3], onEnd, listenerParams)];\n  function subscribe(el) {\n    if (el) {\n      listeners.forEach(function (l) {\n        return l.add(el);\n      });\n    }\n  }\n  function unsubscribe() {\n    listeners.forEach(function (l) {\n      return l.remove();\n    });\n  }\n\n  /**\n   * Обработчик событий dragstart\n   * Отменяет нативное браузерное поведение для вложенных ссылок и изображений\n   */\n  var onDragStart = function onDragStart(e) {\n    var target = e.target;\n    if (target.tagName === 'A' || target.tagName === 'IMG') {\n      e.preventDefault();\n    }\n  };\n\n  /**\n   * Обработчик клика по компоненту\n   * Отменяет переход по вложенной ссылке, если был зафиксирован свайп\n   */\n  var postGestureClick = function postGestureClick(e) {\n    if (!didSlide.current) {\n      return onClickCapture && onClickCapture(e);\n    }\n    // eslint-disable-next-line no-restricted-properties\n    if (e.target.closest('a')) {\n      e.preventDefault();\n    }\n    if (noSlideClick) {\n      e.stopPropagation();\n    } else {\n      onClickCapture && onClickCapture(e);\n    }\n    didSlide.current = false;\n  };\n  return /*#__PURE__*/React.createElement(Component, _extends({}, restProps, {\n    onDragStart: onDragStart,\n    onClickCapture: postGestureClick,\n    ref: containerRef\n  }));\n};\nfunction initGesture(startX, startY) {\n  return {\n    startX: startX,\n    startY: startY,\n    startT: new Date(),\n    duration: 0,\n    isPressed: true,\n    isY: false,\n    isX: false,\n    isSlideX: false,\n    isSlideY: false,\n    isSlide: false,\n    shiftX: 0,\n    shiftY: 0,\n    shiftXAbs: 0,\n    shiftYAbs: 0\n  };\n}","map":{"version":3,"names":["React","getSupportedEvents","coordX","coordY","touchEnabled","useDOM","useExternRef","useEventListener","useIsomorphicLayoutEffect","Touch","_ref","onStart","onStartX","onStartY","_onMove","onMove","onMoveX","onMoveY","onLeave","onEnter","_onEnd","onEnd","onEndX","onEndY","onClickCapture","usePointerHover","_ref$slideThreshold","slideThreshold","_ref$useCapture","useCapture","_ref$Component","Component","getRootRef","_ref$noSlideClick","noSlideClick","_ref$stopPropagation","stopPropagation","restProps","_objectWithoutProperties","_excluded","_useDOM","document","events","useMemo","didSlide","useRef","gesture","handle","e","handlers","forEach","cb","_gesture$current$star","_gesture$current","_gesture$current$star2","duration","Date","now","current","startT","getTime","_objectSpread","originalEvent","enterHandler","leaveHandler","startHandler","initGesture","subscribe","target","capture","passive","containerRef","el","add","_gesture$current2","_ref2","isPressed","isX","isY","_ref2$startX","startX","_ref2$startY","startY","_gesture$current3","shiftX","shiftY","shiftXAbs","Math","abs","shiftYAbs","touches","length","willBeX","willBeY","willBeSlidedX","willBeSlidedY","Object","assign","isSlideX","isSlideY","isSlide","_gesture$current4","_ref3","Boolean","unsubscribe","listenerParams","listeners","l","remove","onDragStart","tagName","preventDefault","postGestureClick","closest","createElement","_extends","ref"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\Touch\\Touch.tsx"],"sourcesContent":["import * as React from 'react';\nimport { getSupportedEvents, coordX, coordY, touchEnabled, VKUITouchEvent } from '../../lib/touch';\nimport { HasComponent, HasRootRef } from '../../types';\nimport { useDOM } from '../../lib/dom';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\n\nexport interface TouchProps\n  extends React.AllHTMLAttributes<HTMLElement>,\n    HasRootRef<HTMLElement>,\n    HasComponent {\n  /**\n   * Привязать onEnter и onLeave через pointer-events - работает на disabled-инпутах\n   */\n  usePointerHover?: boolean;\n  useCapture?: boolean;\n  slideThreshold?: number;\n  noSlideClick?: boolean;\n  onEnter?: HoverHandler;\n  onLeave?: HoverHandler;\n  onStart?: TouchEventHandler;\n  onStartX?: TouchEventHandler;\n  onStartY?: TouchEventHandler;\n  onMove?: TouchEventHandler;\n  onMoveX?: TouchEventHandler;\n  onMoveY?: TouchEventHandler;\n  onEnd?: TouchEventHandler;\n  onEndX?: TouchEventHandler;\n  onEndY?: TouchEventHandler;\n  stopPropagation?: boolean;\n}\n\nexport interface Gesture {\n  startX: number;\n  startY: number;\n  startT: Date;\n  duration: number;\n  isPressed: boolean;\n  isY: boolean;\n  isX: boolean;\n  isSlideX: boolean;\n  isSlideY: boolean;\n  isSlide: boolean;\n  shiftX: number;\n  shiftY: number;\n  shiftXAbs: number;\n  shiftYAbs: number;\n}\n\nexport interface TouchEvent extends Gesture {\n  originalEvent: VKUITouchEvent;\n}\n\ntype HoverHandler = (outputEvent: MouseEvent) => void;\nexport type TouchEventHandler = (e: TouchEvent) => void;\nexport type ClickHandler = (e: React.MouseEvent<HTMLElement>) => void;\nexport type DragHandler = (e: React.DragEvent<HTMLElement>) => void;\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Touch\n */\nexport const Touch = ({\n  onStart,\n  onStartX,\n  onStartY,\n  onMove: _onMove,\n  onMoveX,\n  onMoveY,\n  onLeave,\n  onEnter,\n  onEnd: _onEnd,\n  onEndX,\n  onEndY,\n  onClickCapture,\n  usePointerHover,\n  slideThreshold = 5,\n  useCapture = false,\n  Component = 'div',\n  getRootRef,\n  noSlideClick = false,\n  stopPropagation = false,\n  ...restProps\n}: TouchProps) => {\n  const { document } = useDOM();\n  const events = React.useMemo(getSupportedEvents, []);\n  const didSlide = React.useRef(false);\n  const gesture = React.useRef<Partial<Gesture> | null>(null);\n  const handle = (e: VKUITouchEvent, handlers: Array<TouchEventHandler | undefined | false>) => {\n    stopPropagation && e.stopPropagation();\n    handlers.forEach((cb) => {\n      const duration = Date.now() - (gesture.current?.startT?.getTime() ?? 0);\n      cb && cb({ ...(gesture.current as Gesture), duration, originalEvent: e });\n    });\n  };\n\n  const enterHandler = useEventListener(usePointerHover ? 'pointerenter' : 'mouseenter', onEnter);\n  const leaveHandler = useEventListener(usePointerHover ? 'pointerleave' : 'mouseleave', onLeave);\n  const startHandler = useEventListener(\n    events[0],\n    (e: VKUITouchEvent) => {\n      gesture.current = initGesture(coordX(e), coordY(e));\n\n      handle(e, [onStart, onStartX, onStartY]);\n      // 1 line, 2 bad specs, 2 workarounds:\n      subscribe(\n        touchEnabled()\n          ? // Touch events fire on initial target, and won't bubble if its removed\n            // see: #235, #1968, https://stackoverflow.com/a/45760014\n            (e.target as HTMLElement)\n          : // Mouse events fire on the element under pointer, so we lose move / end\n            // if pointer goes outside container.\n            // Can be fixed by PointerEvents' setPointerCapture later\n            document,\n      );\n    },\n    { capture: useCapture, passive: false },\n  );\n  const containerRef = useExternRef(getRootRef);\n\n  useIsomorphicLayoutEffect(() => {\n    const el = containerRef.current;\n    if (el) {\n      enterHandler.add(el);\n      leaveHandler.add(el);\n      startHandler.add(el);\n    }\n  }, [Component]);\n\n  function onMove(e: VKUITouchEvent) {\n    const { isPressed, isX, isY, startX = 0, startY = 0 } = gesture.current ?? {};\n\n    if (isPressed) {\n      // смещения\n      const shiftX = coordX(e) - startX;\n      const shiftY = coordY(e) - startY;\n\n      // абсолютные значения смещений\n      const shiftXAbs = Math.abs(shiftX);\n      const shiftYAbs = Math.abs(shiftY);\n\n      // Если определяем мультитач, то прерываем жест\n      if (!!e.touches && e.touches.length > 1) {\n        return onEnd(e);\n      }\n\n      // если мы ещё не определились\n      if (!isX && !isY) {\n        const willBeX = shiftXAbs >= slideThreshold && shiftXAbs > shiftYAbs;\n        const willBeY = shiftYAbs >= slideThreshold && shiftYAbs > shiftXAbs;\n        const willBeSlidedX = willBeX && (!!onMoveX || !!_onMove);\n        const willBeSlidedY = willBeY && (!!onMoveY || !!_onMove);\n\n        if (gesture.current) {\n          Object.assign(gesture.current, {\n            isY: willBeY,\n            isX: willBeX,\n            isSlideX: willBeSlidedX,\n            isSlideY: willBeSlidedY,\n            isSlide: willBeSlidedX || willBeSlidedY,\n          });\n        }\n      }\n\n      if (gesture.current?.isSlide) {\n        Object.assign(gesture.current, {\n          shiftX,\n          shiftY,\n          shiftXAbs,\n          shiftYAbs,\n        });\n\n        handle(e, [\n          _onMove,\n          gesture.current.isSlideX && onMoveX,\n          gesture.current.isSlideY && onMoveY,\n        ]);\n      }\n    }\n  }\n\n  function onEnd(e: VKUITouchEvent) {\n    const { isPressed, isSlide, isSlideX, isSlideY } = gesture.current ?? {};\n\n    if (isPressed) {\n      handle(e, [_onEnd, isSlideY && onEndY, isSlideX && onEndX]);\n    }\n\n    didSlide.current = Boolean(isSlide);\n    gesture.current = {};\n\n    // Если это был тач-евент, симулируем отмену hover\n    if (touchEnabled()) {\n      onLeave && onLeave(e);\n    }\n    unsubscribe();\n  }\n\n  const listenerParams = { capture: useCapture, passive: false };\n  const listeners = [\n    useEventListener(events[1], onMove, listenerParams),\n    useEventListener(events[2], onEnd, listenerParams),\n    useEventListener(events[3], onEnd, listenerParams),\n  ];\n  function subscribe(el: HTMLElement | Document | null | undefined) {\n    if (el) {\n      listeners.forEach((l) => l.add(el));\n    }\n  }\n  function unsubscribe() {\n    listeners.forEach((l) => l.remove());\n  }\n\n  /**\n   * Обработчик событий dragstart\n   * Отменяет нативное браузерное поведение для вложенных ссылок и изображений\n   */\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const target = e.target as HTMLElement;\n    if (target.tagName === 'A' || target.tagName === 'IMG') {\n      e.preventDefault();\n    }\n  };\n\n  /**\n   * Обработчик клика по компоненту\n   * Отменяет переход по вложенной ссылке, если был зафиксирован свайп\n   */\n  const postGestureClick: typeof onClickCapture = (e) => {\n    if (!didSlide.current) {\n      return onClickCapture && onClickCapture(e);\n    }\n    // eslint-disable-next-line no-restricted-properties\n    if ((e.target as HTMLElement).closest('a')) {\n      e.preventDefault();\n    }\n    if (noSlideClick) {\n      e.stopPropagation();\n    } else {\n      onClickCapture && onClickCapture(e);\n    }\n    didSlide.current = false;\n  };\n\n  return (\n    <Component\n      {...restProps}\n      onDragStart={onDragStart}\n      onClickCapture={postGestureClick}\n      ref={containerRef}\n    />\n  );\n};\n\nfunction initGesture(startX: number, startY: number): Gesture {\n  return {\n    startX,\n    startY,\n    startT: new Date(),\n    duration: 0,\n    isPressed: true,\n    isY: false,\n    isX: false,\n    isSlideX: false,\n    isSlideY: false,\n    isSlide: false,\n    shiftX: 0,\n    shiftY: 0,\n    shiftXAbs: 0,\n    shiftYAbs: 0,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}