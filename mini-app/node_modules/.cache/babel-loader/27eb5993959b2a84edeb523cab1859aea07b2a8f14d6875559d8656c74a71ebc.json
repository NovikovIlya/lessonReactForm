{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"className\", \"header\", \"text\", \"style\", \"iosCloseItem\", \"popupDirection\", \"popupOffsetDistance\"];\nimport * as React from 'react';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { Platform } from '../../lib/platform';\nimport { ActionSheetDropdownDesktop } from './ActionSheetDropdownDesktop';\nimport { ActionSheetDropdown } from './ActionSheetDropdown';\nimport { noop } from '@vkontakte/vkjs';\nimport { ActionSheetContext } from './ActionSheetContext';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheet\n */\nexport var ActionSheet = function ActionSheet(_ref) {\n  var children = _ref.children,\n    className = _ref.className,\n    header = _ref.header,\n    text = _ref.text,\n    style = _ref.style,\n    iosCloseItem = _ref.iosCloseItem,\n    _ref$popupDirection = _ref.popupDirection,\n    popupDirection = _ref$popupDirection === void 0 ? 'bottom' : _ref$popupDirection,\n    popupOffsetDistance = _ref.popupOffsetDistance,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var platform = usePlatform();\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    closing = _React$useState2[0],\n    setClosing = _React$useState2[1];\n  var onClose = function onClose() {\n    return setClosing(true);\n  };\n  var _action = React.useRef(noop);\n  var afterClose = function afterClose() {\n    restProps.onClose();\n    _action.current();\n    _action.current = noop;\n  };\n  var _useAdaptivityWithJSM = useAdaptivityWithJSMediaQueries(),\n    isDesktop = _useAdaptivityWithJSM.isDesktop;\n  useScrollLock(!isDesktop);\n  var timeout = platform === Platform.IOS ? 300 : 200;\n  if (isDesktop) {\n    timeout = 0;\n  }\n  var fallbackTransitionFinish = useTimeout(afterClose, timeout);\n  React.useEffect(function () {\n    if (closing) {\n      fallbackTransitionFinish.set();\n    } else {\n      fallbackTransitionFinish.clear();\n    }\n  }, [closing, fallbackTransitionFinish]);\n  var onItemClick = React.useCallback(function (action, immediateAction, autoClose) {\n    return function (event) {\n      event.persist();\n      immediateAction && immediateAction(event);\n      if (autoClose) {\n        _action.current = function () {\n          return action && action(event);\n        };\n        setClosing(true);\n      } else {\n        action && action(event);\n      }\n    };\n  }, []);\n  var contextValue = useObjectMemo({\n    onItemClick: onItemClick,\n    isDesktop: isDesktop\n  });\n  var DropdownComponent = isDesktop ? ActionSheetDropdownDesktop : ActionSheetDropdown;\n  var dropdownProps = isDesktop ? Object.assign(restProps, {\n    popupOffsetDistance: popupOffsetDistance,\n    popupDirection: popupDirection\n  }) : restProps;\n  var actionSheet = /*#__PURE__*/React.createElement(ActionSheetContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(DropdownComponent, _extends({\n    closing: closing,\n    timeout: timeout\n  }, dropdownProps, {\n    onClose: onClose,\n    className: isDesktop ? className : undefined,\n    style: isDesktop ? style : undefined\n  }), (header || text) && /*#__PURE__*/React.createElement(\"header\", {\n    className: \"vkuiActionSheet__header\"\n  }, header && /*#__PURE__*/React.createElement(Footnote, {\n    weight: \"2\",\n    className: \"vkuiActionSheet__title\"\n  }, header), text && /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiActionSheet__text\"\n  }, text)), children, platform === Platform.IOS && !isDesktop && iosCloseItem));\n  if (isDesktop) {\n    return actionSheet;\n  }\n  return /*#__PURE__*/React.createElement(PopoutWrapper, {\n    closing: closing,\n    alignY: \"bottom\",\n    className: className,\n    style: style,\n    onClick: onClose,\n    hasMask: true,\n    fixed: true\n  }, actionSheet);\n};","map":{"version":3,"names":["React","PopoutWrapper","Platform","ActionSheetDropdownDesktop","ActionSheetDropdown","noop","ActionSheetContext","Footnote","usePlatform","useTimeout","useAdaptivityWithJSMediaQueries","useObjectMemo","useScrollLock","ActionSheet","_ref","children","className","header","text","style","iosCloseItem","_ref$popupDirection","popupDirection","popupOffsetDistance","restProps","_objectWithoutProperties","_excluded","platform","_React$useState","useState","_React$useState2","_slicedToArray","closing","setClosing","onClose","_action","useRef","afterClose","current","_useAdaptivityWithJSM","isDesktop","timeout","IOS","fallbackTransitionFinish","useEffect","set","clear","onItemClick","useCallback","action","immediateAction","autoClose","event","persist","contextValue","DropdownComponent","dropdownProps","Object","assign","actionSheet","createElement","Provider","value","_extends","undefined","weight","alignY","onClick","hasMask","fixed"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\ActionSheet\\ActionSheet.tsx"],"sourcesContent":["import * as React from 'react';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { Platform } from '../../lib/platform';\nimport { ActionSheetDropdownDesktop } from './ActionSheetDropdownDesktop';\nimport { ActionSheetDropdown } from './ActionSheetDropdown';\nimport { noop } from '@vkontakte/vkjs';\nimport { ActionSheetContext, ItemClickHandler } from './ActionSheetContext';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { SharedDropdownProps } from './types';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport styles from './ActionSheet.module.css';\n\nexport interface ActionSheetProps\n  extends Pick<SharedDropdownProps, 'toggleRef' | 'popupDirection' | 'popupOffsetDistance'>,\n    React.HTMLAttributes<HTMLDivElement> {\n  header?: React.ReactNode;\n  text?: React.ReactNode;\n  /**\n   * Закрыть попап по клику снаружи.\n   */\n  onClose: VoidFunction;\n  /**\n   * Только iOS.\n   */\n  iosCloseItem: React.ReactNode;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheet\n */\nexport const ActionSheet = ({\n  children,\n  className,\n  header,\n  text,\n  style,\n  iosCloseItem,\n  popupDirection = 'bottom',\n  popupOffsetDistance,\n  ...restProps\n}: ActionSheetProps) => {\n  const platform = usePlatform();\n  const [closing, setClosing] = React.useState(false);\n  const onClose = () => setClosing(true);\n  const _action = React.useRef(noop);\n\n  const afterClose = () => {\n    restProps.onClose();\n    _action.current();\n    _action.current = noop;\n  };\n\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n\n  useScrollLock(!isDesktop);\n\n  let timeout = platform === Platform.IOS ? 300 : 200;\n\n  if (isDesktop) {\n    timeout = 0;\n  }\n\n  const fallbackTransitionFinish = useTimeout(afterClose, timeout);\n  React.useEffect(() => {\n    if (closing) {\n      fallbackTransitionFinish.set();\n    } else {\n      fallbackTransitionFinish.clear();\n    }\n  }, [closing, fallbackTransitionFinish]);\n\n  const onItemClick = React.useCallback<ItemClickHandler>(\n    (action, immediateAction, autoClose) => (event) => {\n      event.persist();\n      immediateAction && immediateAction(event);\n      if (autoClose) {\n        _action.current = () => action && action(event);\n        setClosing(true);\n      } else {\n        action && action(event);\n      }\n    },\n    [],\n  );\n  const contextValue = useObjectMemo({ onItemClick, isDesktop });\n\n  const DropdownComponent = isDesktop ? ActionSheetDropdownDesktop : ActionSheetDropdown;\n\n  const dropdownProps = isDesktop\n    ? Object.assign(restProps, { popupOffsetDistance, popupDirection })\n    : restProps;\n\n  const actionSheet = (\n    <ActionSheetContext.Provider value={contextValue}>\n      <DropdownComponent\n        closing={closing}\n        timeout={timeout}\n        {...dropdownProps}\n        onClose={onClose}\n        className={isDesktop ? className : undefined}\n        style={isDesktop ? style : undefined}\n      >\n        {(header || text) && (\n          <header className={styles['ActionSheet__header']}>\n            {header && (\n              <Footnote weight=\"2\" className={styles['ActionSheet__title']}>\n                {header}\n              </Footnote>\n            )}\n            {text && <Footnote className={styles['ActionSheet__text']}>{text}</Footnote>}\n          </header>\n        )}\n        {children}\n        {platform === Platform.IOS && !isDesktop && iosCloseItem}\n      </DropdownComponent>\n    </ActionSheetContext.Provider>\n  );\n\n  if (isDesktop) {\n    return actionSheet;\n  }\n\n  return (\n    <PopoutWrapper\n      closing={closing}\n      alignY=\"bottom\"\n      className={className}\n      style={style}\n      onClick={onClose}\n      hasMask\n      fixed\n    >\n      {actionSheet}\n    </PopoutWrapper>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}