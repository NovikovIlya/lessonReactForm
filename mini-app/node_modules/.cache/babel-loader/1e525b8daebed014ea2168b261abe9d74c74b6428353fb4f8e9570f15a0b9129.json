{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nexport var useChipsInput = function useChipsInput(props) {\n  var value = props.value,\n    getOptionValue = props.getOptionValue,\n    onChange = props.onChange,\n    onInputChange = props.onInputChange,\n    getNewOptionData = props.getNewOptionData;\n  var _React$useState = React.useState(props.inputValue),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    fieldValue = _React$useState2[0],\n    setFieldValue = _React$useState2[1];\n  var _React$useState3 = React.useState(value !== null && value !== void 0 ? value : []),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    selectedOptions = _React$useState4[0],\n    setSelectedOptions = _React$useState4[1];\n  var clearInput = React.useCallback(function () {\n    setFieldValue('');\n    onInputChange({\n      target: {\n        value: ''\n      }\n    });\n  }, [onInputChange]);\n  var handleInputChange = React.useCallback(function (e) {\n    setFieldValue(e.target.value);\n    onInputChange(e);\n  }, [onInputChange]);\n  var toggleOption = React.useCallback(function (newOption, value) {\n    var newSelectedOptions = selectedOptions.filter(function (option) {\n      return getOptionValue(newOption) !== getOptionValue(option);\n    });\n    if (value === true) {\n      newSelectedOptions.push(newOption);\n    }\n    setSelectedOptions(newSelectedOptions);\n    onChange(newSelectedOptions);\n  }, [selectedOptions, getOptionValue, onChange]);\n  var addOption = React.useCallback(function (newOption) {\n    return toggleOption(newOption, true);\n  }, [toggleOption]);\n  var addOptionFromInput = React.useCallback(function () {\n    var trimmedValue = fieldValue === null || fieldValue === void 0 ? void 0 : fieldValue.trim();\n    if (trimmedValue) {\n      addOption(getNewOptionData(undefined, trimmedValue));\n      clearInput();\n    }\n  }, [addOption, clearInput, getNewOptionData, fieldValue]);\n  var removeOption = React.useCallback(function (value) {\n    toggleOption(getNewOptionData(undefined, value), false);\n  }, [toggleOption, getNewOptionData]);\n  React.useEffect(function () {\n    setSelectedOptions(value);\n    return function () {\n      return setSelectedOptions([]);\n    };\n  }, [props.value, value]);\n  React.useEffect(function () {\n    setFieldValue(props.inputValue);\n    return function () {\n      return setFieldValue('');\n    };\n  }, [props.inputValue]);\n  return {\n    fieldValue: fieldValue,\n    setFieldValue: setFieldValue,\n    selectedOptions: selectedOptions,\n    setSelectedOptions: setSelectedOptions,\n    clearInput: clearInput,\n    toggleOption: toggleOption,\n    addOption: addOption,\n    addOptionFromInput: addOptionFromInput,\n    removeOption: removeOption,\n    handleInputChange: handleInputChange\n  };\n};","map":{"version":3,"names":["React","useChipsInput","props","value","getOptionValue","onChange","onInputChange","getNewOptionData","_React$useState","useState","inputValue","_React$useState2","_slicedToArray","fieldValue","setFieldValue","_React$useState3","_React$useState4","selectedOptions","setSelectedOptions","clearInput","useCallback","target","handleInputChange","e","toggleOption","newOption","newSelectedOptions","filter","option","push","addOption","addOptionFromInput","trimmedValue","trim","undefined","removeOption","useEffect"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\hooks\\useChipsInput.ts"],"sourcesContent":["import * as React from 'react';\nimport { ChipOption } from '../components/Chip/Chip';\nimport { ChipsInputBaseProps } from '../components/ChipsInputBase/ChipsInputBase';\n\nexport const useChipsInput = <Option extends ChipOption>(\n  props: Partial<ChipsInputBaseProps<Option>>,\n) => {\n  const { value, getOptionValue, onChange, onInputChange, getNewOptionData } = props;\n\n  const [fieldValue, setFieldValue] = React.useState(props.inputValue);\n  const [selectedOptions, setSelectedOptions] = React.useState(value ?? []);\n\n  const clearInput = React.useCallback(() => {\n    setFieldValue('');\n    onInputChange!({ target: { value: '' } } as any);\n  }, [onInputChange]);\n\n  const handleInputChange = React.useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setFieldValue(e.target.value);\n      onInputChange!(e);\n    },\n    [onInputChange],\n  );\n\n  const toggleOption = React.useCallback(\n    (newOption: Option, value?: boolean) => {\n      const newSelectedOptions = selectedOptions.filter(\n        (option: Option) => getOptionValue!(newOption) !== getOptionValue!(option),\n      );\n\n      if (value === true) {\n        newSelectedOptions.push(newOption);\n      }\n\n      setSelectedOptions(newSelectedOptions);\n      onChange!(newSelectedOptions);\n    },\n    [selectedOptions, getOptionValue, onChange],\n  );\n\n  const addOption = React.useCallback(\n    (newOption: Option) => toggleOption(newOption, true),\n    [toggleOption],\n  );\n  const addOptionFromInput = React.useCallback(() => {\n    const trimmedValue = fieldValue?.trim();\n\n    if (trimmedValue) {\n      addOption(getNewOptionData!(undefined, trimmedValue));\n      clearInput();\n    }\n  }, [addOption, clearInput, getNewOptionData, fieldValue]);\n  const removeOption = React.useCallback(\n    (value) => {\n      toggleOption(getNewOptionData!(undefined, value as string), false);\n    },\n    [toggleOption, getNewOptionData],\n  );\n\n  React.useEffect(() => {\n    setSelectedOptions(value as Option[]);\n\n    return () => setSelectedOptions([]);\n  }, [props.value, value]);\n\n  React.useEffect(() => {\n    setFieldValue(props.inputValue);\n\n    return () => setFieldValue('');\n  }, [props.inputValue]);\n\n  return {\n    fieldValue,\n    setFieldValue,\n    selectedOptions,\n    setSelectedOptions,\n    clearInput,\n    toggleOption,\n    addOption,\n    addOptionFromInput,\n    removeOption,\n    handleInputChange,\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}