{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"alignY\", \"alignX\", \"closing\", \"hasMask\", \"fixed\", \"children\", \"onClick\", \"className\"];\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { useDOM } from '../../lib/dom';\n/**\n * @see https://vkcom.github.io/VKUI/#/PopoutWrapper\n */\nexport var PopoutWrapper = function PopoutWrapper(_ref) {\n  var _ref$alignY = _ref.alignY,\n    alignY = _ref$alignY === void 0 ? 'center' : _ref$alignY,\n    _ref$alignX = _ref.alignX,\n    alignX = _ref$alignX === void 0 ? 'center' : _ref$alignX,\n    _ref$closing = _ref.closing,\n    closing = _ref$closing === void 0 ? false : _ref$closing,\n    _ref$hasMask = _ref.hasMask,\n    hasMask = _ref$hasMask === void 0 ? true : _ref$hasMask,\n    _ref$fixed = _ref.fixed,\n    fixed = _ref$fixed === void 0 ? true : _ref$fixed,\n    children = _ref.children,\n    onClick = _ref.onClick,\n    className = _ref.className,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var platform = usePlatform();\n  var _React$useState = React.useState(!hasMask),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    opened = _React$useState2[0],\n    setOpened = _React$useState2[1];\n  var elRef = React.useRef(null);\n  var onFadeInEnd = function onFadeInEnd(e) {\n    if (!e || e.animationName === 'vkui-animation-full-fade-in') {\n      setOpened(true);\n    }\n  };\n  var animationFinishFallback = useTimeout(onFadeInEnd, platform === Platform.IOS ? 300 : 200);\n  React.useEffect(function () {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n  var _useDOM = useDOM(),\n    window = _useDOM.window;\n  useGlobalEventListener(window, 'touchmove', function (e) {\n    return e.preventDefault();\n  }, {\n    passive: false\n  });\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, restProps, {\n    className: classNames(\"vkuiPopoutWrapper\", styles[\"PopoutWrapper--alignY-\".concat(alignY)], styles[\"PopoutWrapper--alignX-\".concat(alignX)], closing && \"vkuiPopoutWrapper--closing\", opened && \"vkuiPopoutWrapper--opened\", fixed && \"vkuiPopoutWrapper--fixed\", hasMask && \"vkuiPopoutWrapper--masked\", className),\n    onAnimationEnd: opened ? undefined : onFadeInEnd,\n    ref: elRef\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__overlay\",\n    onClick: onClick\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__content\"\n  }, children)));\n};\nvar styles = {\n  \"PopoutWrapper--alignY-center\": \"vkuiPopoutWrapper--alignY-center\",\n  \"PopoutWrapper--alignY-bottom\": \"vkuiPopoutWrapper--alignY-bottom\",\n  \"PopoutWrapper--alignY-top\": \"vkuiPopoutWrapper--alignY-top\",\n  \"PopoutWrapper--alignX-center\": \"vkuiPopoutWrapper--alignX-center\",\n  \"PopoutWrapper--alignX-left\": \"vkuiPopoutWrapper--alignX-left\",\n  \"PopoutWrapper--alignX-right\": \"vkuiPopoutWrapper--alignX-right\"\n};","map":{"version":3,"names":["React","classNames","Platform","useTimeout","usePlatform","useGlobalEventListener","useDOM","PopoutWrapper","_ref","_ref$alignY","alignY","_ref$alignX","alignX","_ref$closing","closing","_ref$hasMask","hasMask","_ref$fixed","fixed","children","onClick","className","restProps","_objectWithoutProperties","_excluded","platform","_React$useState","useState","_React$useState2","_slicedToArray","opened","setOpened","elRef","useRef","onFadeInEnd","e","animationName","animationFinishFallback","IOS","useEffect","set","_useDOM","window","preventDefault","passive","createElement","_extends","styles","concat","onAnimationEnd","undefined","ref"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\PopoutWrapper\\PopoutWrapper.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { useDOM } from '../../lib/dom';\nimport styles from './PopoutWrapper.module.css';\n\nexport interface PopoutWrapperProps extends React.HTMLAttributes<HTMLDivElement> {\n  hasMask?: boolean;\n  fixed?: boolean;\n  alignY?: 'top' | 'center' | 'bottom';\n  alignX?: 'left' | 'center' | 'right';\n  closing?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PopoutWrapper\n */\nexport const PopoutWrapper = ({\n  alignY = 'center',\n  alignX = 'center',\n  closing = false,\n  hasMask = true,\n  fixed = true,\n  children,\n  onClick,\n  className,\n  ...restProps\n}: PopoutWrapperProps) => {\n  const platform = usePlatform();\n  const [opened, setOpened] = React.useState(!hasMask);\n  const elRef = React.useRef<HTMLDivElement>(null);\n\n  const onFadeInEnd = (e?: React.AnimationEvent) => {\n    if (!e || e.animationName === 'vkui-animation-full-fade-in') {\n      setOpened(true);\n    }\n  };\n  const animationFinishFallback = useTimeout(onFadeInEnd, platform === Platform.IOS ? 300 : 200);\n  React.useEffect(() => {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n\n  const { window } = useDOM();\n  useGlobalEventListener(window, 'touchmove', (e) => e.preventDefault(), {\n    passive: false,\n  });\n\n  return (\n    <div\n      {...restProps}\n      className={classNames(\n        styles['PopoutWrapper'],\n        styles[`PopoutWrapper--alignY-${alignY}`],\n        styles[`PopoutWrapper--alignX-${alignX}`],\n        closing && styles['PopoutWrapper--closing'],\n        opened && styles['PopoutWrapper--opened'],\n        fixed && styles['PopoutWrapper--fixed'],\n        hasMask && styles['PopoutWrapper--masked'],\n        className,\n      )}\n      onAnimationEnd={opened ? undefined : onFadeInEnd}\n      ref={elRef}\n    >\n      <div className={styles['PopoutWrapper__container']}>\n        <div className={styles['PopoutWrapper__overlay']} onClick={onClick} />\n        <div className={styles['PopoutWrapper__content']}>{children}</div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}