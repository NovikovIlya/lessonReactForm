{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"getRef\", \"content\", \"children\", \"onShownChange\", \"shown\", \"showDelay\", \"hideDelay\"];\nimport * as React from 'react';\nimport { Popper } from '../Popper/Popper';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePatchChildrenRef } from '../../hooks/usePatchChildrenRef';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nexport var HoverPopper = function HoverPopper(_ref) {\n  var getRef = _ref.getRef,\n    content = _ref.content,\n    children = _ref.children,\n    onShownChange = _ref.onShownChange,\n    _shown = _ref.shown,\n    _ref$showDelay = _ref.showDelay,\n    showDelay = _ref$showDelay === void 0 ? 150 : _ref$showDelay,\n    _ref$hideDelay = _ref.hideDelay,\n    hideDelay = _ref$hideDelay === void 0 ? 150 : _ref$hideDelay,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var _React$useState = React.useState(_shown || false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    computedShown = _React$useState2[0],\n    setComputedShown = _React$useState2[1];\n  var shown = typeof _shown === 'boolean' ? _shown : computedShown;\n  var setShown = function setShown(value) {\n    if (typeof _shown !== 'boolean') {\n      setComputedShown(value);\n    }\n    typeof onShownChange === 'function' && onShownChange(value);\n  };\n  var showTimeout = useTimeout(function () {\n    setShown(true);\n  }, showDelay);\n  var hideTimeout = useTimeout(function () {\n    setShown(false);\n  }, hideDelay);\n  var _usePatchChildrenRef = usePatchChildrenRef(children),\n    _usePatchChildrenRef2 = _slicedToArray(_usePatchChildrenRef, 2),\n    childRef = _usePatchChildrenRef2[0],\n    child = _usePatchChildrenRef2[1];\n  var onTargetEnter = function onTargetEnter() {\n    hideTimeout.clear();\n    showTimeout.set();\n  };\n  var onTargetLeave = function onTargetLeave() {\n    showTimeout.clear();\n    hideTimeout.set();\n  };\n  var targetEnterListener = useEventListener('pointerenter', onTargetEnter);\n  var targetLeaveListener = useEventListener('pointerleave', onTargetLeave);\n  useIsomorphicLayoutEffect(function () {\n    if (childRef.current) {\n      targetEnterListener.add(childRef.current);\n      targetLeaveListener.add(childRef.current);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, child, shown && /*#__PURE__*/React.createElement(Popper, _extends({}, restProps, {\n    onMouseOver: hideTimeout.clear,\n    onMouseOut: onTargetLeave,\n    getRef: getRef,\n    targetRef: childRef\n  }), content));\n};","map":{"version":3,"names":["React","Popper","useEventListener","useTimeout","usePatchChildrenRef","useIsomorphicLayoutEffect","HoverPopper","_ref","getRef","content","children","onShownChange","_shown","shown","_ref$showDelay","showDelay","_ref$hideDelay","hideDelay","restProps","_objectWithoutProperties","_excluded","_React$useState","useState","_React$useState2","_slicedToArray","computedShown","setComputedShown","setShown","value","showTimeout","hideTimeout","_usePatchChildrenRef","_usePatchChildrenRef2","childRef","child","onTargetEnter","clear","set","onTargetLeave","targetEnterListener","targetLeaveListener","current","add","createElement","Fragment","_extends","onMouseOver","onMouseOut","targetRef"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\HoverPopper\\HoverPopper.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Popper, PopperCommonProps } from '../Popper/Popper';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePatchChildrenRef } from '../../hooks/usePatchChildrenRef';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\n\nexport interface HoverPopperProps extends PopperCommonProps {\n  /**\n   * Содержимое тултипа\n   */\n  content?: React.ReactNode;\n  /**\n   * Если передан, то тултип будет показан/скрыт в зависимости от значения свойства\n   */\n  shown?: boolean;\n  /**\n   * Вызывается при каждом изменении видимости тултипа\n   */\n  onShownChange?: (shown: boolean) => void;\n  /**\n   * Количество миллисекунд, после которых произойдет показ дропдауна\n   */\n  showDelay?: number;\n  /**\n   * Количество миллисекунд, после которых произойдет скрытие дропдауна\n   */\n  hideDelay?: number;\n  /**\n   * Либо jsx-элемент (div, button, etc.), либо компонент со свойством `getRootRef`, которое применяется к корневому элементу компонента\n   */\n  children?: React.ReactElement;\n}\n\nexport const HoverPopper = ({\n  getRef,\n  content,\n  children,\n  onShownChange,\n  shown: _shown,\n  showDelay = 150,\n  hideDelay = 150,\n  ...restProps\n}: HoverPopperProps) => {\n  const [computedShown, setComputedShown] = React.useState(_shown || false);\n\n  const shown = typeof _shown === 'boolean' ? _shown : computedShown;\n\n  const setShown = (value: boolean) => {\n    if (typeof _shown !== 'boolean') {\n      setComputedShown(value);\n    }\n    typeof onShownChange === 'function' && onShownChange(value);\n  };\n\n  const showTimeout = useTimeout(() => {\n    setShown(true);\n  }, showDelay);\n\n  const hideTimeout = useTimeout(() => {\n    setShown(false);\n  }, hideDelay);\n\n  const [childRef, child] = usePatchChildrenRef(children);\n\n  const onTargetEnter = () => {\n    hideTimeout.clear();\n    showTimeout.set();\n  };\n\n  const onTargetLeave = () => {\n    showTimeout.clear();\n    hideTimeout.set();\n  };\n\n  const targetEnterListener = useEventListener('pointerenter', onTargetEnter);\n  const targetLeaveListener = useEventListener('pointerleave', onTargetLeave);\n\n  useIsomorphicLayoutEffect(() => {\n    if (childRef.current) {\n      targetEnterListener.add(childRef.current);\n      targetLeaveListener.add(childRef.current);\n    }\n  }, []);\n\n  return (\n    <React.Fragment>\n      {child}\n      {shown && (\n        <Popper\n          {...restProps}\n          onMouseOver={hideTimeout.clear}\n          onMouseOut={onTargetLeave}\n          getRef={getRef}\n          targetRef={childRef}\n        >\n          {content}\n        </Popper>\n      )}\n    </React.Fragment>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}