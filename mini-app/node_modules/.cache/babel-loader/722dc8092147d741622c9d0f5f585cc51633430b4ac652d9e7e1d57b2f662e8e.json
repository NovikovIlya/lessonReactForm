{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"mode\", \"getRootRef\", \"className\", \"role\"];\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { Platform } from '../../lib/platform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { useDOM } from '../../lib/dom';\nimport { pressedKey } from '../../lib/accessibility';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { getSizeXClassName } from '../../helpers/getSizeXClassName';\nexport var TabsModeContext = /*#__PURE__*/React.createContext({\n  mode: 'default',\n  withGaps: false\n});\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Tabs\n */\nexport var Tabs = function Tabs(_ref) {\n  var children = _ref.children,\n    _ref$mode = _ref.mode,\n    mode = _ref$mode === void 0 ? 'default' : _ref$mode,\n    getRootRef = _ref.getRootRef,\n    className = _ref.className,\n    _ref$role = _ref.role,\n    role = _ref$role === void 0 ? 'tablist' : _ref$role,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var platform = usePlatform();\n  var _useAdaptivity = useAdaptivity(),\n    sizeX = _useAdaptivity.sizeX;\n  var _useDOM = useDOM(),\n    document = _useDOM.document;\n  var isTabFlow = role === 'tablist';\n  var tabsRef = React.useRef(null);\n  var withGaps = mode === 'accent' || mode === 'secondary';\n  var getTabEls = function getTabEls() {\n    if (!tabsRef.current) {\n      return [];\n    }\n    return Array.from(\n    // eslint-disable-next-line no-restricted-properties\n    tabsRef.current.querySelectorAll('[role=tab]:not([disabled])'));\n  };\n  var handleDocumentKeydown = function handleDocumentKeydown(event) {\n    if (!document || !tabsRef.current || !isTabFlow) {\n      return;\n    }\n    var key = pressedKey(event);\n    switch (key) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'End':\n      case 'Home':\n        {\n          var tabEls = getTabEls();\n          var currentFocusedElIndex = tabEls.findIndex(function (el) {\n            return document.activeElement === el;\n          });\n          if (currentFocusedElIndex === -1) {\n            return;\n          }\n          var nextIndex = 0;\n          if (key === 'Home') {\n            nextIndex = 0;\n          } else if (key === 'End') {\n            nextIndex = tabEls.length - 1;\n          } else {\n            var offset = key === 'ArrowRight' ? 1 : -1;\n            nextIndex = currentFocusedElIndex + offset;\n          }\n          var nextTabEl = tabEls[nextIndex];\n          if (nextTabEl) {\n            event.preventDefault();\n            nextTabEl.focus();\n          }\n          break;\n        }\n      /*\n       В JAWS и NVDA стрелка вниз активирует контент.\n       Это не прописано в стандартах, но по ссылке ниже это рекомендуется делать.\n       https://inclusive-components.design/tabbed-interfaces/\n      */\n      case 'ArrowDown':\n        {\n          var _tabEls = getTabEls();\n          var currentFocusedEl = _tabEls.find(function (el) {\n            return document.activeElement === el;\n          });\n          if (!currentFocusedEl || currentFocusedEl.getAttribute('aria-selected') !== 'true') {\n            return;\n          }\n          var relatedContentElId = currentFocusedEl.getAttribute('aria-controls');\n          if (!relatedContentElId) {\n            return;\n          }\n\n          // eslint-disable-next-line no-restricted-properties\n          var relatedContentEl = document.getElementById(relatedContentElId);\n          if (!relatedContentEl) {\n            return;\n          }\n          event.preventDefault();\n          relatedContentEl.focus();\n          break;\n        }\n      case 'Space':\n      case 'Enter':\n        {\n          var _tabEls2 = getTabEls();\n          var _currentFocusedEl = _tabEls2.find(function (el) {\n            return document.activeElement === el;\n          });\n          if (_currentFocusedEl) {\n            _currentFocusedEl.click();\n          }\n        }\n    }\n  };\n  useGlobalEventListener(document, 'keydown', handleDocumentKeydown, {\n    capture: true\n  });\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, restProps, {\n    ref: getRootRef,\n    className: classNames(\"vkuiTabs\", platform === Platform.VKCOM && styles[\"Tabs--\".concat(platform)], getSizeXClassName(\"vkuiTabs\", sizeX), withGaps && \"vkuiTabs--withGaps\", styles[\"Tabs--mode-\".concat(mode)], className),\n    role: role\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiTabs__in\",\n    ref: tabsRef\n  }, /*#__PURE__*/React.createElement(TabsModeContext.Provider, {\n    value: {\n      mode: mode,\n      withGaps: withGaps\n    }\n  }, children)));\n};\nvar styles = {\n  \"Tabs--withGaps\": \"vkuiTabs--withGaps\",\n  \"Tabs--mode-default\": \"vkuiTabs--mode-default\",\n  \"Tabs--buttons\": \"vkuiTabs--buttons\",\n  \"Tabs--sizeX-compact\": \"vkuiTabs--sizeX-compact\",\n  \"Tabs--sizeX-none\": \"vkuiTabs--sizeX-none\",\n  \"Tabs--mode-accent\": \"vkuiTabs--mode-accent\",\n  \"Tabs--mode-secondary\": \"vkuiTabs--mode-secondary\",\n  \"Tabs--vkcom\": \"vkuiTabs--vkcom\"\n};","map":{"version":3,"names":["React","classNames","usePlatform","Platform","useGlobalEventListener","useDOM","pressedKey","useAdaptivity","getSizeXClassName","TabsModeContext","createContext","mode","withGaps","Tabs","_ref","children","_ref$mode","getRootRef","className","_ref$role","role","restProps","_objectWithoutProperties","_excluded","platform","_useAdaptivity","sizeX","_useDOM","document","isTabFlow","tabsRef","useRef","getTabEls","current","Array","from","querySelectorAll","handleDocumentKeydown","event","key","tabEls","currentFocusedElIndex","findIndex","el","activeElement","nextIndex","length","offset","nextTabEl","preventDefault","focus","_tabEls","currentFocusedEl","find","getAttribute","relatedContentElId","relatedContentEl","getElementById","_tabEls2","_currentFocusedEl","click","capture","createElement","_extends","ref","VKCOM","styles","concat","Provider","value"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\Tabs\\Tabs.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { HasRootRef } from '../../types';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { Platform } from '../../lib/platform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { useDOM } from '../../lib/dom';\nimport { pressedKey } from '../../lib/accessibility';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { getSizeXClassName } from '../../helpers/getSizeXClassName';\nimport styles from './Tabs.module.css';\n\nexport interface TabsProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    HasRootRef<HTMLDivElement> {\n  mode?: 'default' | 'accent' | 'secondary';\n}\n\nexport interface TabsContextProps {\n  mode: TabsProps['mode'];\n  withGaps: boolean;\n}\n\nexport const TabsModeContext = React.createContext<TabsContextProps>({\n  mode: 'default',\n  withGaps: false,\n});\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Tabs\n */\nexport const Tabs = ({\n  children,\n  mode = 'default',\n  getRootRef,\n  className,\n  role = 'tablist',\n  ...restProps\n}: TabsProps) => {\n  const platform = usePlatform();\n  const { sizeX } = useAdaptivity();\n  const { document } = useDOM();\n\n  const isTabFlow = role === 'tablist';\n\n  const tabsRef = React.useRef<HTMLDivElement>(null);\n\n  const withGaps = mode === 'accent' || mode === 'secondary';\n\n  const getTabEls = () => {\n    if (!tabsRef.current) {\n      return [];\n    }\n\n    return Array.from(\n      // eslint-disable-next-line no-restricted-properties\n      tabsRef.current.querySelectorAll<HTMLDivElement>('[role=tab]:not([disabled])'),\n    );\n  };\n\n  const handleDocumentKeydown = (event: KeyboardEvent) => {\n    if (!document || !tabsRef.current || !isTabFlow) {\n      return;\n    }\n\n    const key = pressedKey(event);\n\n    switch (key) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'End':\n      case 'Home': {\n        const tabEls = getTabEls();\n        const currentFocusedElIndex = tabEls.findIndex((el) => document.activeElement === el);\n        if (currentFocusedElIndex === -1) {\n          return;\n        }\n\n        let nextIndex = 0;\n        if (key === 'Home') {\n          nextIndex = 0;\n        } else if (key === 'End') {\n          nextIndex = tabEls.length - 1;\n        } else {\n          const offset = key === 'ArrowRight' ? 1 : -1;\n          nextIndex = currentFocusedElIndex + offset;\n        }\n\n        const nextTabEl = tabEls[nextIndex];\n\n        if (nextTabEl) {\n          event.preventDefault();\n          nextTabEl.focus();\n        }\n\n        break;\n      }\n      /*\n       В JAWS и NVDA стрелка вниз активирует контент.\n       Это не прописано в стандартах, но по ссылке ниже это рекомендуется делать.\n       https://inclusive-components.design/tabbed-interfaces/\n      */\n      case 'ArrowDown': {\n        const tabEls = getTabEls();\n        const currentFocusedEl = tabEls.find((el) => document.activeElement === el);\n\n        if (!currentFocusedEl || currentFocusedEl.getAttribute('aria-selected') !== 'true') {\n          return;\n        }\n\n        const relatedContentElId = currentFocusedEl.getAttribute('aria-controls');\n        if (!relatedContentElId) {\n          return;\n        }\n\n        // eslint-disable-next-line no-restricted-properties\n        const relatedContentEl = document.getElementById(relatedContentElId);\n        if (!relatedContentEl) {\n          return;\n        }\n\n        event.preventDefault();\n        relatedContentEl.focus();\n\n        break;\n      }\n      case 'Space':\n      case 'Enter': {\n        const tabEls = getTabEls();\n        const currentFocusedEl = tabEls.find((el) => document.activeElement === el);\n        if (currentFocusedEl) {\n          currentFocusedEl.click();\n        }\n      }\n    }\n  };\n\n  useGlobalEventListener(document, 'keydown', handleDocumentKeydown, {\n    capture: true,\n  });\n\n  return (\n    <div\n      {...restProps}\n      ref={getRootRef}\n      className={classNames(\n        styles['Tabs'],\n        platform === Platform.VKCOM && styles[`Tabs--${platform}`],\n        getSizeXClassName(styles['Tabs'], sizeX),\n        withGaps && styles['Tabs--withGaps'],\n        styles[`Tabs--mode-${mode}`],\n        className,\n      )}\n      role={role}\n    >\n      <div className={styles['Tabs__in']} ref={tabsRef}>\n        <TabsModeContext.Provider value={{ mode, withGaps }}>{children}</TabsModeContext.Provider>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}