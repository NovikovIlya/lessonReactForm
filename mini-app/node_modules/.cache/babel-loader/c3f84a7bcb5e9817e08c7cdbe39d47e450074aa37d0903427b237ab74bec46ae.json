{"ast":null,"code":"var _jsxFileName = \"E:\\\\lessonReactForm\\\\mini-app\\\\src\\\\panels\\\\Home.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport axios from 'axios';\nimport './Home.css';\nimport { Panel, Group } from '@vkontakte/vkui';\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useForm } from \"react-hook-form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n;\nconst Home = _ref => {\n  _s();\n  let {\n    id,\n    go,\n    fetchedUser\n  } = _ref;\n  async function fetchApi() {\n    const dataApi = await axios.get('https://63c682584ebaa802854750c5.mockapi.io/test1');\n    console.log('123', data);\n    return dataApi.data;\n  }\n  async function createApi(data) {\n    const dataZ = await axios.post('https://63c682584ebaa802854750c5.mockapi.io/test1', data);\n    console.log('66', dataZ);\n  }\n  const data = useQuery('api', fetchApi);\n  console.log('222', data);\n  const queryClient = useQueryClient();\n  const mutation = useMutation(newProduct => createApi(newProduct), {\n    onSuccess: () => queryClient.invalidateQueries(['api'])\n  });\n\n  // hooks forms\n\n  const {\n    reset,\n    register,\n    handleSubmit,\n    watch,\n    formState: {\n      errors\n    }\n  } = useForm({\n    mode: 'onChange'\n  });\n  const onSubmit = data => {\n    console.log(data);\n    mutation.mutate(data);\n    reset();\n  };\n  console.log(errors);\n  return /*#__PURE__*/_jsxDEV(Panel, {\n    id: id,\n    children: /*#__PURE__*/_jsxDEV(Group, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: data.data !== undefined && data.data.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: item.name\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 5\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 4\n      }, this), (errors === null || errors === void 0 ? void 0 : errors.text) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"red\",\n        children: errors.text.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ...register('name', {})\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"text\",\n          ...register('text', {\n            required: 'введите инпут'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"price\",\n          ...register('price', {})\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 2\n  }, this);\n};\n_s(Home, \"b2xFxaSX5plUjZ1z87P2QESdkcs=\", false, function () {\n  return [useQuery, useQueryClient, useMutation, useForm];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","axios","Panel","Group","useMutation","useQuery","useQueryClient","useForm","jsxDEV","_jsxDEV","Home","_ref","_s","id","go","fetchedUser","fetchApi","dataApi","get","console","log","data","createApi","dataZ","post","queryClient","mutation","newProduct","onSuccess","invalidateQueries","reset","register","handleSubmit","watch","formState","errors","mode","onSubmit","mutate","children","undefined","map","item","name","fileName","_jsxFileName","lineNumber","columnNumber","text","className","message","type","placeholder","required","_c","$RefreshReg$"],"sources":["E:/lessonReactForm/mini-app/src/panels/Home.tsx"],"sourcesContent":["import React, { MouseEventHandler, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {clsx} from 'clsx';\nimport axios from 'axios';\nimport './Home.css'\nimport { Panel, PanelHeader, Header, Button, Group, Cell, Div, Avatar } from '@vkontakte/vkui';\nimport { UserInfo } from '@vkontakte/vk-bridge';\nimport { QueryClient, useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useForm, SubmitHandler } from \"react-hook-form\";\n\ninterface Props {\n\tid: string;\n\tgo: MouseEventHandler<HTMLElement>;\n\tfetchedUser?: UserInfo;\n}\ninterface Inputs  {\n\texample: string,\n\texampleRequired: string,\n\tname:string,\n\ttext:string,\n\tprice:string\n};\n\n\n\nconst Home: React.FC<Props> = ({ id, go, fetchedUser }) => {\n\n\tasync function fetchApi() {\n\t\tconst dataApi = await axios.get('https://63c682584ebaa802854750c5.mockapi.io/test1')\n\t\tconsole.log('123',data)\n\t\treturn dataApi.data\n\t}\n\n\tasync function createApi(data:any) {\n\t\tconst dataZ = await axios.post('https://63c682584ebaa802854750c5.mockapi.io/test1',\n\t\tdata)\n\t\tconsole.log('66',dataZ)\n\t\t\n\t}\n\n\tconst data:any = useQuery('api',fetchApi)\n\tconsole.log('222',data)\n\t\n\t\n\t\n\tconst queryClient = useQueryClient()\n\n\tconst mutation = useMutation((newProduct)=>createApi(newProduct),\n\t{onSuccess:()=>queryClient.invalidateQueries(['api'])}\n\t)\n\n\t// hooks forms\n\n\tconst {reset, register, handleSubmit, watch, formState: { errors } } = useForm<Inputs>({\n\t\tmode: 'onChange'\n\t});\n\n    const onSubmit: SubmitHandler<Inputs> = (data:any) => {\n\t\tconsole.log(data);\n\t\tmutation.mutate(data)\n\t\treset()\n\t\t\n\t}\n\tconsole.log(errors)\n\n\n\n\treturn(\n\t<Panel id={id}>\n\t\t<Group>\n\t\t\t{/* <div className={clsx('sss',kek&&'sss1')}>хех</div>\n\t\t\t<button onClick={()=>setKek(prev=>!prev)}>жжж</button> */}\n\t\t\t<div>{data.data !== undefined  &&\n\t\t\tdata.data.map((item:any)=>{\n\t\t\t\treturn(\n\t\t\t\t<div key={item.id}>{item.name}</div>)\n\t\t\t})}</div>\n\t\t\t{errors?.text && <div className='red'>{errors.text.message}</div>}\n\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\n\t\t\t\t<input type='text'  {...register('name', {})} />\n\t\t\t\t<input type='text' placeholder='text' {...register('text', {required:'введите инпут'})} />\n\t\t\t\t<input  type='text' placeholder='price'  {...register('price', {})} />\n\t\t\t\t<button>Отправить</button> \n\t\t\t</form>\n\t\t\t\n\t\t</Group>\t\n\t</Panel>\n\t)\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}