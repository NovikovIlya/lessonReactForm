{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"getRootRef\", \"children\", \"onRemove\", \"removePlaceholder\", \"align\", \"className\"];\nimport * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { getTitleFromChildren } from '../../lib/utils';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { Icon24Cancel } from '@vkontakte/icons';\nimport { IconButton } from '../IconButton/IconButton';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { Tappable } from '../Tappable/Tappable';\nimport { getSizeYClassName } from '../../helpers/getSizeYClassName';\n/**\n * @see https://vkcom.github.io/VKUI/#/RemovableIos\n */\nvar RemovableIos = function RemovableIos(_ref) {\n  var onRemove = _ref.onRemove,\n    removePlaceholder = _ref.removePlaceholder,\n    removePlaceholderString = _ref.removePlaceholderString,\n    children = _ref.children;\n  var _useDOM = useDOM(),\n    window = _useDOM.window;\n  var removeButtonRef = React.useRef(null);\n  var disabledRef = React.useRef(true);\n  var _React$useState = React.useState(0),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    removeOffset = _React$useState2[0],\n    updateRemoveOffset = _React$useState2[1];\n  useGlobalEventListener(window, 'click', function () {\n    if (removeOffset > 0) {\n      updateRemoveOffset(0);\n    }\n  }, {\n    capture: true\n  });\n  var onRemoveTransitionEnd = function onRemoveTransitionEnd() {\n    if (removeOffset > 0) {\n      var _removeButtonRef$curr;\n      removeButtonRef === null || removeButtonRef === void 0 ? void 0 : (_removeButtonRef$curr = removeButtonRef.current) === null || _removeButtonRef$curr === void 0 ? void 0 : _removeButtonRef$curr.focus();\n    } else {\n      disabledRef.current = true;\n    }\n  };\n  var onRemoveActivateClick = function onRemoveActivateClick(e) {\n    e.stopPropagation();\n    if (!removeButtonRef.current) {\n      return;\n    }\n    var offsetWidth = removeButtonRef.current.offsetWidth;\n    disabledRef.current = false;\n    updateRemoveOffset(offsetWidth);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiRemovable__content\",\n    style: {\n      transform: \"translateX(-\".concat(removeOffset !== null && removeOffset !== void 0 ? removeOffset : 0, \"px)\")\n    },\n    onTransitionEnd: onRemoveTransitionEnd\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    hasActive: false,\n    hasHover: false,\n    \"aria-label\": removePlaceholderString,\n    className: classNames(\"vkuiRemovable__action\", \"vkuiRemovable__toggle\"),\n    onClick: onRemoveActivateClick,\n    disabled: removeOffset > 0\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"vkuiRemovable__toggle-in\",\n    role: \"presentation\"\n  })), children, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__offset\",\n    \"aria-hidden\": true\n  }), /*#__PURE__*/React.createElement(Tappable, {\n    Component: \"button\",\n    hasActive: false,\n    hasHover: false,\n    disabled: disabledRef.current,\n    getRootRef: removeButtonRef,\n    className: \"vkuiRemovable__remove\",\n    onClick: onRemove\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__remove-in\"\n  }, removePlaceholder)));\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/Removable\n */\nexport var Removable = function Removable(_ref2) {\n  var getRootRef = _ref2.getRootRef,\n    children = _ref2.children,\n    _ref2$onRemove = _ref2.onRemove,\n    onRemove = _ref2$onRemove === void 0 ? noop : _ref2$onRemove,\n    _ref2$removePlacehold = _ref2.removePlaceholder,\n    removePlaceholder = _ref2$removePlacehold === void 0 ? 'Удалить' : _ref2$removePlacehold,\n    _ref2$align = _ref2.align,\n    align = _ref2$align === void 0 ? 'center' : _ref2$align,\n    className = _ref2.className,\n    restProps = _objectWithoutProperties(_ref2, _excluded);\n  var platform = usePlatform();\n  var _useAdaptivity = useAdaptivity(),\n    sizeY = _useAdaptivity.sizeY;\n  var ref = useExternRef(getRootRef);\n  var onRemoveClick = function onRemoveClick(e) {\n    e.preventDefault();\n    onRemove(e);\n  };\n  var removePlaceholderString = getTitleFromChildren(removePlaceholder);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, restProps, {\n    ref: ref,\n    className: classNames(\"vkuiRemovable\", platform === Platform.IOS && \"vkuiRemovable--ios\", styles[\"Removable--align-\".concat(align)], getSizeYClassName(\"vkuiRemovable\", sizeY), className)\n  }), platform !== Platform.IOS && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiRemovable__content\"\n  }, children, /*#__PURE__*/React.createElement(IconButton, {\n    activeMode: \"opacity\",\n    hoverMode: \"opacity\",\n    className: \"vkuiRemovable__action\",\n    onClick: onRemoveClick,\n    \"aria-label\": removePlaceholderString\n  }, /*#__PURE__*/React.createElement(Icon24Cancel, {\n    role: \"presentation\"\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__offset\",\n    \"aria-hidden\": true\n  })), platform === Platform.IOS && /*#__PURE__*/React.createElement(RemovableIos, {\n    onRemove: onRemoveClick,\n    removePlaceholder: removePlaceholder,\n    removePlaceholderString: removePlaceholderString\n  }, children));\n};\nvar styles = {\n  \"Removable--align-start\": \"vkuiRemovable--align-start\",\n  \"Removable--align-center\": \"vkuiRemovable--align-center\"\n};","map":{"version":3,"names":["React","classNames","noop","getTitleFromChildren","useExternRef","usePlatform","useAdaptivity","useDOM","Platform","Icon24Cancel","IconButton","useGlobalEventListener","Tappable","getSizeYClassName","RemovableIos","_ref","onRemove","removePlaceholder","removePlaceholderString","children","_useDOM","window","removeButtonRef","useRef","disabledRef","_React$useState","useState","_React$useState2","_slicedToArray","removeOffset","updateRemoveOffset","capture","onRemoveTransitionEnd","_removeButtonRef$curr","current","focus","onRemoveActivateClick","e","stopPropagation","offsetWidth","createElement","className","style","transform","concat","onTransitionEnd","hasActive","hasHover","onClick","disabled","role","Component","getRootRef","Removable","_ref2","_ref2$onRemove","_ref2$removePlacehold","_ref2$align","align","restProps","_objectWithoutProperties","_excluded","platform","_useAdaptivity","sizeY","ref","onRemoveClick","preventDefault","_extends","IOS","styles","activeMode","hoverMode"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\Removable\\Removable.tsx"],"sourcesContent":["import * as React from 'react';\nimport { HasRootRef } from '../../types';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { getTitleFromChildren } from '../../lib/utils';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { Icon24Cancel } from '@vkontakte/icons';\nimport { IconButton } from '../IconButton/IconButton';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { Tappable } from '../Tappable/Tappable';\nimport { getSizeYClassName } from '../../helpers/getSizeYClassName';\nimport styles from './Removable.module.css';\n\nexport interface RemovableProps {\n  /**\n   * iOS only. Текст в выезжающей кнопке для удаления ячейки.\n   */\n  removePlaceholder?: React.ReactNode;\n  /**\n   * Коллбэк срабатывает при клике на контрол удаления.\n   */\n  onRemove?: (e: React.MouseEvent, rootEl?: HTMLElement | null) => void;\n}\n\ninterface RemovableIosOwnProps extends RemovableProps {\n  removePlaceholderString?: string;\n  children?: React.ReactNode;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/RemovableIos\n */\nconst RemovableIos = ({\n  onRemove,\n  removePlaceholder,\n  removePlaceholderString,\n  children,\n}: RemovableIosOwnProps) => {\n  const { window } = useDOM();\n\n  const removeButtonRef = React.useRef<HTMLElement>(null);\n  const disabledRef = React.useRef(true);\n  const [removeOffset, updateRemoveOffset] = React.useState(0);\n\n  useGlobalEventListener(\n    window,\n    'click',\n    () => {\n      if (removeOffset > 0) {\n        updateRemoveOffset(0);\n      }\n    },\n    { capture: true },\n  );\n\n  const onRemoveTransitionEnd = () => {\n    if (removeOffset > 0) {\n      removeButtonRef?.current?.focus();\n    } else {\n      disabledRef.current = true;\n    }\n  };\n\n  const onRemoveActivateClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (!removeButtonRef.current) {\n      return;\n    }\n    const { offsetWidth } = removeButtonRef.current;\n    disabledRef.current = false;\n    updateRemoveOffset(offsetWidth);\n  };\n\n  return (\n    <div\n      className={styles['Removable__content']}\n      style={{ transform: `translateX(-${removeOffset ?? 0}px)` }}\n      onTransitionEnd={onRemoveTransitionEnd}\n    >\n      <IconButton\n        hasActive={false}\n        hasHover={false}\n        aria-label={removePlaceholderString}\n        className={classNames(styles['Removable__action'], styles['Removable__toggle'])}\n        onClick={onRemoveActivateClick}\n        disabled={removeOffset > 0}\n      >\n        <i className={styles['Removable__toggle-in']} role=\"presentation\" />\n      </IconButton>\n      {children}\n\n      <span className={styles['Removable__offset']} aria-hidden />\n\n      <Tappable\n        Component=\"button\"\n        hasActive={false}\n        hasHover={false}\n        disabled={disabledRef.current}\n        getRootRef={removeButtonRef}\n        className={styles['Removable__remove']}\n        onClick={onRemove}\n      >\n        <span className={styles['Removable__remove-in']}>{removePlaceholder}</span>\n      </Tappable>\n    </div>\n  );\n};\n\ninterface RemovableOwnProps\n  extends React.AllHTMLAttributes<HTMLElement>,\n    RemovableProps,\n    HasRootRef<HTMLDivElement> {\n  /**\n   * Расположение кнопки удаления.\n   */\n  align?: 'start' | 'center';\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Removable\n */\nexport const Removable = ({\n  getRootRef,\n  children,\n  onRemove = noop,\n  removePlaceholder = 'Удалить',\n  align = 'center',\n  className,\n  ...restProps\n}: RemovableOwnProps) => {\n  const platform = usePlatform();\n  const { sizeY } = useAdaptivity();\n\n  const ref = useExternRef(getRootRef);\n\n  const onRemoveClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    onRemove(e);\n  };\n\n  const removePlaceholderString: string = getTitleFromChildren(removePlaceholder);\n\n  return (\n    <div\n      {...restProps}\n      ref={ref}\n      className={classNames(\n        styles['Removable'],\n        platform === Platform.IOS && styles['Removable--ios'],\n        styles[`Removable--align-${align}`],\n        getSizeYClassName(styles['Removable'], sizeY),\n        className,\n      )}\n    >\n      {platform !== Platform.IOS && (\n        <div className={styles['Removable__content']}>\n          {children}\n\n          <IconButton\n            activeMode=\"opacity\"\n            hoverMode=\"opacity\"\n            className={styles['Removable__action']}\n            onClick={onRemoveClick}\n            aria-label={removePlaceholderString}\n          >\n            <Icon24Cancel role=\"presentation\" />\n          </IconButton>\n\n          <span className={styles['Removable__offset']} aria-hidden />\n        </div>\n      )}\n\n      {platform === Platform.IOS && (\n        <RemovableIos\n          onRemove={onRemoveClick}\n          removePlaceholder={removePlaceholder}\n          removePlaceholderString={removePlaceholderString}\n        >\n          {children}\n        </RemovableIos>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}