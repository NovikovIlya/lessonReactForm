{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"children\", \"Component\", \"onClick\", \"onKeyDown\", \"activeEffectDelay\", \"stopPropagation\", \"getRootRef\", \"hasHover\", \"hoverMode\", \"hasActive\", \"activeMode\", \"focusVisibleMode\", \"onEnter\", \"onLeave\", \"className\"];\nimport * as React from 'react';\nimport mitt from 'mitt';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { Touch } from '../Touch/Touch';\nimport TouchRootContext from '../Touch/TouchContext';\nimport { Platform } from '../../lib/platform';\nimport { getOffsetRect } from '../../lib/offset';\nimport { coordX, coordY } from '../../lib/touch';\nimport { shouldTriggerClickOnEnterOrSpace } from '../../lib/accessibility';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { FocusVisible } from '../FocusVisible/FocusVisible';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useFocusVisible } from '../../hooks/useFocusVisible';\nimport { callMultiple } from '../../lib/callMultiple';\nimport { useBooleanState } from '../../hooks/useBooleanState';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useAdaptivityHasHover } from '../../hooks/useAdaptivityHasHover';\nimport { useAdaptivityHasPointer } from '../../hooks/useAdaptivityHasPointer';\nvar sizeXClassNames = {\n  none: \"vkuiTappable--sizeX-none\",\n  compact: \"vkuiTappable--sizeX-compact\",\n  regular: \"vkuiTappable--sizeX-regular\"\n};\nvar WAVE_LIVE = 225;\nexport var ACTIVE_DELAY = 70;\nexport var ACTIVE_EFFECT_DELAY = 600;\nvar activeBus = mitt();\nvar TapState = {\n  none: 0,\n  pending: 1,\n  active: 2,\n  exiting: 3\n};\nvar TappableContext = /*#__PURE__*/React.createContext({\n  onHoverChange: noop\n});\nfunction isPresetStateMode(stateMode) {\n  switch (stateMode) {\n    case 'opacity':\n    case 'background':\n      return true;\n    default:\n      return false;\n  }\n}\nfunction useActivity(hasActive, stopDelay) {\n  var id = React.useMemo(function () {\n    return Math.round(Math.random() * 1e8).toString(16);\n  }, []);\n  var _React$useState = React.useState(TapState.none),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    activity = _React$useState2[0],\n    setActivity = _React$useState2[1];\n  var _stop = function _stop() {\n    return setActivity(TapState.none);\n  };\n  var start = function start() {\n    return hasActive && setActivity(TapState.active);\n  };\n  var delayStart = function delayStart() {\n    hasActive && setActivity(TapState.pending);\n  };\n  var activeTimeout = useTimeout(start, ACTIVE_DELAY);\n  var stopTimeout = useTimeout(_stop, stopDelay);\n  useIsomorphicLayoutEffect(function () {\n    if (activity === TapState.pending) {\n      activeTimeout.set();\n      return activeTimeout.clear;\n    }\n    if (activity === TapState.exiting) {\n      return stopTimeout.clear;\n    }\n    if (activity === TapState.active) {\n      activeBus.emit('active', id);\n    }\n    return noop;\n  }, [activity]);\n  useIsomorphicLayoutEffect(function () {\n    if (activity === TapState.none) {\n      return noop;\n    }\n    var onActiveChange = function onActiveChange(activeId) {\n      activeId !== id && _stop();\n    };\n    activeBus.on('active', onActiveChange);\n    return function () {\n      return activeBus.off('active', onActiveChange);\n    };\n  }, [activity === TapState.none]);\n  useIsomorphicLayoutEffect(function () {\n    !hasActive && _stop();\n  }, [hasActive]);\n  var stop = function stop(delay) {\n    if (delay) {\n      setActivity(TapState.exiting);\n      return stopTimeout.set(delay);\n    }\n    _stop();\n  };\n  return [activity, {\n    delayStart: delayStart,\n    start: start,\n    stop: stop\n  }];\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Tappable\n */\nexport var Tappable = function Tappable(_ref) {\n  var children = _ref.children,\n    Component = _ref.Component,\n    onClick = _ref.onClick,\n    _onKeyDown = _ref.onKeyDown,\n    _ref$activeEffectDela = _ref.activeEffectDelay,\n    activeEffectDelay = _ref$activeEffectDela === void 0 ? ACTIVE_EFFECT_DELAY : _ref$activeEffectDela,\n    _ref$stopPropagation = _ref.stopPropagation,\n    stopPropagation = _ref$stopPropagation === void 0 ? false : _ref$stopPropagation,\n    getRootRef = _ref.getRootRef,\n    _ref$hasHover = _ref.hasHover,\n    _hasHover = _ref$hasHover === void 0 ? true : _ref$hasHover,\n    _ref$hoverMode = _ref.hoverMode,\n    hoverMode = _ref$hoverMode === void 0 ? 'background' : _ref$hoverMode,\n    _ref$hasActive = _ref.hasActive,\n    _hasActive = _ref$hasActive === void 0 ? true : _ref$hasActive,\n    _ref$activeMode = _ref.activeMode,\n    activeMode = _ref$activeMode === void 0 ? 'background' : _ref$activeMode,\n    _ref$focusVisibleMode = _ref.focusVisibleMode,\n    focusVisibleMode = _ref$focusVisibleMode === void 0 ? 'inside' : _ref$focusVisibleMode,\n    onEnter = _ref.onEnter,\n    onLeave = _ref.onLeave,\n    className = _ref.className,\n    props = _objectWithoutProperties(_ref, _excluded);\n  Component = Component || (props.href ? 'a' : 'div');\n  var _React$useContext = React.useContext(TappableContext),\n    onHoverChange = _React$useContext.onHoverChange;\n  var insideTouchRoot = React.useContext(TouchRootContext);\n  var platform = usePlatform();\n  var _useFocusVisible = useFocusVisible(),\n    focusVisible = _useFocusVisible.focusVisible,\n    onBlur = _useFocusVisible.onBlur,\n    onFocus = _useFocusVisible.onFocus;\n  var _useAdaptivity = useAdaptivity(),\n    _useAdaptivity$sizeX = _useAdaptivity.sizeX,\n    sizeX = _useAdaptivity$sizeX === void 0 ? 'none' : _useAdaptivity$sizeX;\n  var hasPointerContext = useAdaptivityHasPointer();\n  var hasHoverContext = useAdaptivityHasHover();\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    clicks = _React$useState4[0],\n    setClicks = _React$useState4[1];\n  var _React$useState5 = React.useState(false),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    childHover = _React$useState6[0],\n    setChildHover = _React$useState6[1];\n  var _useBooleanState = useBooleanState(false),\n    _hovered = _useBooleanState.value,\n    setHoveredTrue = _useBooleanState.setTrue,\n    setHoveredFalse = _useBooleanState.setFalse;\n  var hovered = _hovered && !props.disabled;\n  var hasActive = _hasActive && !childHover && !props.disabled;\n  var hasHover = hasHoverContext && _hasHover && !childHover;\n  var isCustomElement = Component !== 'a' && Component !== 'button' && Component !== 'label' && !props.contentEditable;\n  var isPresetHoverMode = isPresetStateMode(hoverMode);\n  var isPresetActiveMode = isPresetStateMode(activeMode);\n  var isPresetFocusVisibleMode = ['inside', 'outside'].includes(focusVisibleMode);\n  var _useActivity = useActivity(hasActive, activeEffectDelay),\n    _useActivity2 = _slicedToArray(_useActivity, 2),\n    activity = _useActivity2[0],\n    _useActivity2$ = _useActivity2[1],\n    start = _useActivity2$.start,\n    stop = _useActivity2$.stop,\n    delayStart = _useActivity2$.delayStart;\n  var active = activity === TapState.active || activity === TapState.exiting;\n  var containerRef = useExternRef(getRootRef);\n\n  // hover propagation\n  var childContext = React.useRef({\n    onHoverChange: setChildHover\n  }).current;\n  useIsomorphicLayoutEffect(function () {\n    if (!hovered) {\n      return noop;\n    }\n    onHoverChange(true);\n    return function () {\n      return onHoverChange(false);\n    };\n  }, [hovered]);\n\n  /*\n   * [a11y]\n   * Обрабатывает событие onkeydown\n   * для кастомных доступных элементов:\n   * - role=\"link\" (активация по Enter)\n   * - role=\"button\" (активация по Space и Enter)\n   */\n  function onKeyDown(e) {\n    if (isCustomElement && shouldTriggerClickOnEnterOrSpace(e)) {\n      var _containerRef$current;\n      e.preventDefault();\n      (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.click();\n    }\n  }\n  var needWaves = platform === Platform.ANDROID && !hasPointerContext && hasActive && activeMode === 'background';\n  var clearClicks = useTimeout(function () {\n    return setClicks([]);\n  }, WAVE_LIVE);\n  function addClick(x, y) {\n    var dateNow = Date.now();\n    var filteredClicks = clicks.filter(function (click) {\n      return click.id + WAVE_LIVE > dateNow;\n    });\n    setClicks([].concat(_toConsumableArray(filteredClicks), [{\n      x: x,\n      y: y,\n      id: dateNow\n    }]));\n    clearClicks.set();\n  }\n  function onStart(_ref2) {\n    var originalEvent = _ref2.originalEvent;\n    if (hasActive) {\n      if (originalEvent.touches && originalEvent.touches.length > 1) {\n        // r сожалению я так и не понял, что это делает и можно ли упихнуть его в Touch\n        return stop();\n      }\n      if (needWaves) {\n        var _getOffsetRect = getOffsetRect(containerRef.current),\n          top = _getOffsetRect.top,\n          left = _getOffsetRect.left;\n        var x = coordX(originalEvent) - (left !== null && left !== void 0 ? left : 0);\n        var y = coordY(originalEvent) - (top !== null && top !== void 0 ? top : 0);\n        addClick(x, y);\n      }\n      delayStart();\n    }\n  }\n  function onMove(_ref3) {\n    var isSlide = _ref3.isSlide;\n    if (isSlide) {\n      stop();\n    }\n  }\n  function onEnd(_ref4) {\n    var duration = _ref4.duration;\n    if (activity === TapState.none) {\n      return;\n    }\n    if (activity === TapState.pending) {\n      // активировать при коротком тапе\n      start();\n    }\n\n    // отключить без задержки при длинном тапе\n    var activeDuration = duration - ACTIVE_DELAY;\n    stop(activeDuration >= 100 ? 0 : activeEffectDelay - activeDuration);\n  }\n  var classes = classNames(className, \"vkuiTappable\", platform === Platform.IOS && \"vkuiTappable--ios\", sizeXClassNames[sizeX], hasHoverContext && \"vkuiTappable--hover-has\", hasActive && \"vkuiTappable--hasActive\", hasHover && hovered && !isPresetHoverMode && hoverMode, hasActive && active && !isPresetActiveMode && activeMode, focusVisible && !isPresetFocusVisibleMode && focusVisibleMode, hasActive && active && \"vkuiTappable--active\", hasHover && hovered && isPresetHoverMode && styles[\"Tappable--hover-\".concat(hoverMode)], hasActive && active && isPresetActiveMode && styles[\"Tappable--active-\".concat(activeMode)], focusVisible && \"vkuiTappable--focus-visible\");\n  var handlers = {\n    onStart: callMultiple(onStart, props.onStart),\n    onMove: callMultiple(onMove, props.onMove),\n    onEnd: callMultiple(onEnd, props.onEnd),\n    onClick: onClick,\n    onKeyDown: callMultiple(onKeyDown, _onKeyDown)\n  };\n  var role = props.href ? 'link' : 'button';\n  return /*#__PURE__*/React.createElement(Touch, _extends({\n    onEnter: callMultiple(setHoveredTrue, onEnter),\n    onLeave: callMultiple(setHoveredFalse, onLeave),\n    type: Component === 'button' ? 'button' : undefined,\n    tabIndex: isCustomElement && !props.disabled ? 0 : undefined,\n    role: isCustomElement ? role : undefined,\n    \"aria-disabled\": isCustomElement ? props.disabled : undefined,\n    stopPropagation: stopPropagation && !insideTouchRoot && !props.disabled\n  }, props, {\n    slideThreshold: 20,\n    usePointerHover: true,\n    className: classes,\n    Component: Component,\n    getRootRef: containerRef,\n    onBlur: callMultiple(onBlur, props.onBlur),\n    onFocus: callMultiple(onFocus, props.onFocus)\n  }, props.disabled ? {} : handlers), /*#__PURE__*/React.createElement(TappableContext.Provider, {\n    value: childContext\n  }, children), needWaves && /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": true,\n    className: \"vkuiTappable__waves\"\n  }, clicks.map(function (wave) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      key: wave.id,\n      className: \"vkuiTappable__wave\",\n      style: {\n        top: wave.y,\n        left: wave.x\n      }\n    });\n  })), (hasHover && hoverMode === 'background' || hasActive && activeMode === 'background') && /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": true,\n    className: \"vkuiTappable__stateLayer\"\n  }), !props.disabled && isPresetFocusVisibleMode && /*#__PURE__*/React.createElement(FocusVisible, {\n    mode: focusVisibleMode\n  }));\n};\nvar styles = {\n  \"Tappable--hover-has\": \"vkuiTappable--hover-has\",\n  \"Tappable--hover-background\": \"vkuiTappable--hover-background\",\n  \"Tappable--hover-opacity\": \"vkuiTappable--hover-opacity\",\n  \"Tappable--active-background\": \"vkuiTappable--active-background\",\n  \"Tappable--active-opacity\": \"vkuiTappable--active-opacity\"\n};","map":{"version":3,"names":["React","mitt","classNames","noop","Touch","TouchRootContext","Platform","getOffsetRect","coordX","coordY","shouldTriggerClickOnEnterOrSpace","useIsomorphicLayoutEffect","FocusVisible","useTimeout","useExternRef","usePlatform","useFocusVisible","callMultiple","useBooleanState","useAdaptivity","useAdaptivityHasHover","useAdaptivityHasPointer","sizeXClassNames","none","compact","regular","WAVE_LIVE","ACTIVE_DELAY","ACTIVE_EFFECT_DELAY","activeBus","TapState","pending","active","exiting","TappableContext","createContext","onHoverChange","isPresetStateMode","stateMode","useActivity","hasActive","stopDelay","id","useMemo","Math","round","random","toString","_React$useState","useState","_React$useState2","_slicedToArray","activity","setActivity","_stop","start","delayStart","activeTimeout","stopTimeout","set","clear","emit","onActiveChange","activeId","on","off","stop","delay","Tappable","_ref","children","Component","onClick","_onKeyDown","onKeyDown","_ref$activeEffectDela","activeEffectDelay","_ref$stopPropagation","stopPropagation","getRootRef","_ref$hasHover","hasHover","_hasHover","_ref$hoverMode","hoverMode","_ref$hasActive","_hasActive","_ref$activeMode","activeMode","_ref$focusVisibleMode","focusVisibleMode","onEnter","onLeave","className","props","_objectWithoutProperties","_excluded","href","_React$useContext","useContext","insideTouchRoot","platform","_useFocusVisible","focusVisible","onBlur","onFocus","_useAdaptivity","_useAdaptivity$sizeX","sizeX","hasPointerContext","hasHoverContext","_React$useState3","_React$useState4","clicks","setClicks","_React$useState5","_React$useState6","childHover","setChildHover","_useBooleanState","_hovered","value","setHoveredTrue","setTrue","setHoveredFalse","setFalse","hovered","disabled","isCustomElement","contentEditable","isPresetHoverMode","isPresetActiveMode","isPresetFocusVisibleMode","includes","_useActivity","_useActivity2","_useActivity2$","containerRef","childContext","useRef","current","e","_containerRef$current","preventDefault","click","needWaves","ANDROID","clearClicks","addClick","x","y","dateNow","Date","now","filteredClicks","filter","concat","_toConsumableArray","onStart","_ref2","originalEvent","touches","length","_getOffsetRect","top","left","onMove","_ref3","isSlide","onEnd","_ref4","duration","activeDuration","classes","IOS","styles","handlers","role","createElement","_extends","type","undefined","tabIndex","slideThreshold","usePointerHover","Provider","map","wave","key","style","mode"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\Tappable\\Tappable.tsx"],"sourcesContent":["import * as React from 'react';\nimport mitt from 'mitt';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { Touch, TouchEvent, TouchProps } from '../Touch/Touch';\nimport TouchRootContext from '../Touch/TouchContext';\nimport { Platform } from '../../lib/platform';\nimport { getOffsetRect } from '../../lib/offset';\nimport { coordX, coordY } from '../../lib/touch';\nimport { AnchorHTMLAttributesOnly, HasComponent, HasRootRef } from '../../types';\nimport { shouldTriggerClickOnEnterOrSpace } from '../../lib/accessibility';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { FocusVisible, FocusVisibleMode } from '../FocusVisible/FocusVisible';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useFocusVisible } from '../../hooks/useFocusVisible';\nimport { callMultiple } from '../../lib/callMultiple';\nimport { useBooleanState } from '../../hooks/useBooleanState';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useAdaptivityHasHover } from '../../hooks/useAdaptivityHasHover';\nimport { useAdaptivityHasPointer } from '../../hooks/useAdaptivityHasPointer';\nimport styles from './Tappable.module.css';\n\nconst sizeXClassNames = {\n  none: styles['Tappable--sizeX-none'],\n  compact: styles['Tappable--sizeX-compact'],\n  regular: styles['Tappable--sizeX-regular'],\n};\n\ntype StateMode = 'opacity' | 'background';\n\nconst WAVE_LIVE = 225;\n\nexport type TappableElementProps = Omit<\n  React.AllHTMLAttributes<HTMLElement>,\n  | 'onTouchStart'\n  | 'onTouchMove'\n  | 'onTouchEnd'\n  | 'onTouchCancel'\n  | 'onMouseDown'\n  | 'onMouseMove'\n  | 'onMouseUp'\n  | 'onMouseLeave'\n> &\n  AnchorHTMLAttributesOnly; // В AllHTMLAttributes не хватает типов для ссылок\n\nexport interface TappableProps\n  extends TappableElementProps,\n    HasRootRef<HTMLElement>,\n    HasComponent,\n    Pick<TouchProps, 'onStart' | 'onEnd' | 'onMove'> {\n  /**\n   * Длительность показа active-состояния\n   */\n  activeEffectDelay?: number;\n  stopPropagation?: boolean;\n  /**\n   * Указывает, должен ли компонент реагировать на hover-состояние\n   */\n  hasHover?: boolean;\n  /**\n   * Указывает, должен ли компонент реагировать на active-состояние\n   */\n  hasActive?: boolean;\n  /**\n   * Стиль подсветки active-состояния. Если передать произвольную строку, она добавится как css-класс во время active\n   */\n  activeMode?: StateMode | string;\n  /**\n   * Стиль подсветки hover-состояния. Если передать произвольную строку, она добавится как css-класс во время hover\n   */\n  hoverMode?: StateMode | string;\n  /**\n   * Стиль аутлайна focus visible. Если передать произвольную строку, она добавится как css-класс во время focus-visible\n   */\n  focusVisibleMode?: FocusVisibleMode | string;\n  children?: React.ReactNode;\n  onEnter?(outputEvent: MouseEvent): void;\n  onLeave?(outputEvent: MouseEvent): void;\n}\n\ninterface Wave {\n  x: number;\n  y: number;\n  id: number;\n}\n\nexport interface RootComponentProps extends TouchProps {\n  ref?: React.Ref<HTMLElement>;\n}\n\nexport const ACTIVE_DELAY = 70;\nexport const ACTIVE_EFFECT_DELAY = 600;\n\nconst activeBus = mitt<{ active: string }>();\nconst TapState = { none: 0, pending: 1, active: 2, exiting: 3 } as const;\n\ntype TappableContextInterface = { onHoverChange: (s: boolean) => void };\nconst TappableContext = React.createContext<TappableContextInterface>({\n  onHoverChange: noop,\n});\n\nfunction isPresetStateMode(stateMode: StateMode | string): stateMode is StateMode {\n  switch (stateMode) {\n    case 'opacity':\n    case 'background':\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction useActivity(hasActive: boolean, stopDelay: number) {\n  const id = React.useMemo(() => Math.round(Math.random() * 1e8).toString(16), []);\n\n  const [activity, setActivity] = React.useState<(typeof TapState)[keyof typeof TapState]>(\n    TapState.none,\n  );\n  const _stop = () => setActivity(TapState.none);\n  const start = () => hasActive && setActivity(TapState.active);\n  const delayStart = () => {\n    hasActive && setActivity(TapState.pending);\n  };\n\n  const activeTimeout = useTimeout(start, ACTIVE_DELAY);\n  const stopTimeout = useTimeout(_stop, stopDelay);\n\n  useIsomorphicLayoutEffect(() => {\n    if (activity === TapState.pending) {\n      activeTimeout.set();\n      return activeTimeout.clear;\n    }\n    if (activity === TapState.exiting) {\n      return stopTimeout.clear;\n    }\n    if (activity === TapState.active) {\n      activeBus.emit('active', id);\n    }\n    return noop;\n  }, [activity]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (activity === TapState.none) {\n      return noop;\n    }\n    const onActiveChange = (activeId: string) => {\n      activeId !== id && _stop();\n    };\n    activeBus.on('active', onActiveChange);\n    return () => activeBus.off('active', onActiveChange);\n  }, [activity === TapState.none]);\n\n  useIsomorphicLayoutEffect(() => {\n    !hasActive && _stop();\n  }, [hasActive]);\n\n  const stop = (delay?: number) => {\n    if (delay) {\n      setActivity(TapState.exiting);\n      return stopTimeout.set(delay);\n    }\n    _stop();\n  };\n\n  return [activity, { delayStart, start, stop }] as const;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Tappable\n */\nexport const Tappable = ({\n  children,\n  Component,\n  onClick,\n  onKeyDown: _onKeyDown,\n  activeEffectDelay = ACTIVE_EFFECT_DELAY,\n  stopPropagation = false,\n  getRootRef,\n  hasHover: _hasHover = true,\n  hoverMode = 'background',\n  hasActive: _hasActive = true,\n  activeMode = 'background',\n  focusVisibleMode = 'inside',\n  onEnter,\n  onLeave,\n  className,\n  ...props\n}: TappableProps) => {\n  Component = Component || ((props.href ? 'a' : 'div') as React.ElementType);\n\n  const { onHoverChange } = React.useContext(TappableContext);\n  const insideTouchRoot = React.useContext(TouchRootContext);\n  const platform = usePlatform();\n  const { focusVisible, onBlur, onFocus } = useFocusVisible();\n  const { sizeX = 'none' } = useAdaptivity();\n  const hasPointerContext = useAdaptivityHasPointer();\n  const hasHoverContext = useAdaptivityHasHover();\n\n  const [clicks, setClicks] = React.useState<Wave[]>([]);\n  const [childHover, setChildHover] = React.useState(false);\n  const {\n    value: _hovered,\n    setTrue: setHoveredTrue,\n    setFalse: setHoveredFalse,\n  } = useBooleanState(false);\n\n  const hovered = _hovered && !props.disabled;\n  const hasActive = _hasActive && !childHover && !props.disabled;\n  const hasHover = hasHoverContext && _hasHover && !childHover;\n  const isCustomElement =\n    Component !== 'a' && Component !== 'button' && Component !== 'label' && !props.contentEditable;\n  const isPresetHoverMode = isPresetStateMode(hoverMode);\n  const isPresetActiveMode = isPresetStateMode(activeMode);\n  const isPresetFocusVisibleMode = ['inside', 'outside'].includes(focusVisibleMode);\n\n  const [activity, { start, stop, delayStart }] = useActivity(hasActive, activeEffectDelay);\n  const active = activity === TapState.active || activity === TapState.exiting;\n\n  const containerRef = useExternRef(getRootRef);\n\n  // hover propagation\n  const childContext = React.useRef({ onHoverChange: setChildHover }).current;\n  useIsomorphicLayoutEffect(() => {\n    if (!hovered) {\n      return noop;\n    }\n    onHoverChange(true);\n    return () => onHoverChange(false);\n  }, [hovered]);\n\n  /*\n   * [a11y]\n   * Обрабатывает событие onkeydown\n   * для кастомных доступных элементов:\n   * - role=\"link\" (активация по Enter)\n   * - role=\"button\" (активация по Space и Enter)\n   */\n  function onKeyDown(e: React.KeyboardEvent<HTMLElement>) {\n    if (isCustomElement && shouldTriggerClickOnEnterOrSpace(e)) {\n      e.preventDefault();\n      containerRef.current?.click();\n    }\n  }\n\n  const needWaves =\n    platform === Platform.ANDROID && !hasPointerContext && hasActive && activeMode === 'background';\n\n  const clearClicks = useTimeout(() => setClicks([]), WAVE_LIVE);\n\n  function addClick(x: number, y: number) {\n    const dateNow = Date.now();\n    const filteredClicks = clicks.filter((click) => click.id + WAVE_LIVE > dateNow);\n\n    setClicks([...filteredClicks, { x, y, id: dateNow }]);\n    clearClicks.set();\n  }\n\n  function onStart({ originalEvent }: TouchEvent) {\n    if (hasActive) {\n      if (originalEvent.touches && originalEvent.touches.length > 1) {\n        // r сожалению я так и не понял, что это делает и можно ли упихнуть его в Touch\n        return stop();\n      }\n\n      if (needWaves) {\n        const { top, left } = getOffsetRect(containerRef.current);\n        const x = coordX(originalEvent) - (left ?? 0);\n        const y = coordY(originalEvent) - (top ?? 0);\n        addClick(x, y);\n      }\n\n      delayStart();\n    }\n  }\n\n  function onMove({ isSlide }: TouchEvent) {\n    if (isSlide) {\n      stop();\n    }\n  }\n\n  function onEnd({ duration }: TouchEvent) {\n    if (activity === TapState.none) {\n      return;\n    }\n    if (activity === TapState.pending) {\n      // активировать при коротком тапе\n      start();\n    }\n\n    // отключить без задержки при длинном тапе\n    const activeDuration = duration - ACTIVE_DELAY;\n    stop(activeDuration >= 100 ? 0 : activeEffectDelay - activeDuration);\n  }\n\n  const classes = classNames(\n    className,\n    styles['Tappable'],\n    platform === Platform.IOS && styles['Tappable--ios'],\n    sizeXClassNames[sizeX],\n    hasHoverContext && styles['Tappable--hover-has'],\n    hasActive && styles['Tappable--hasActive'],\n    hasHover && hovered && !isPresetHoverMode && hoverMode,\n    hasActive && active && !isPresetActiveMode && activeMode,\n    focusVisible && !isPresetFocusVisibleMode && focusVisibleMode,\n    hasActive && active && styles['Tappable--active'],\n    hasHover && hovered && isPresetHoverMode && styles[`Tappable--hover-${hoverMode}`],\n    hasActive && active && isPresetActiveMode && styles[`Tappable--active-${activeMode}`],\n    focusVisible && styles['Tappable--focus-visible'],\n  );\n\n  const handlers: RootComponentProps = {\n    onStart: callMultiple(onStart, props.onStart),\n    onMove: callMultiple(onMove, props.onMove),\n    onEnd: callMultiple(onEnd, props.onEnd),\n    onClick,\n    onKeyDown: callMultiple(onKeyDown, _onKeyDown),\n  };\n  const role = props.href ? 'link' : 'button';\n\n  return (\n    <Touch\n      onEnter={callMultiple(setHoveredTrue, onEnter)}\n      onLeave={callMultiple(setHoveredFalse, onLeave)}\n      type={Component === 'button' ? 'button' : undefined}\n      tabIndex={isCustomElement && !props.disabled ? 0 : undefined}\n      role={isCustomElement ? role : undefined}\n      aria-disabled={isCustomElement ? props.disabled : undefined}\n      stopPropagation={stopPropagation && !insideTouchRoot && !props.disabled}\n      {...props}\n      slideThreshold={20}\n      usePointerHover\n      className={classes}\n      Component={Component}\n      getRootRef={containerRef}\n      onBlur={callMultiple(onBlur, props.onBlur)}\n      onFocus={callMultiple(onFocus, props.onFocus)}\n      {...(props.disabled ? {} : handlers)}\n    >\n      <TappableContext.Provider value={childContext}>{children}</TappableContext.Provider>\n      {needWaves && (\n        <span aria-hidden className={styles.Tappable__waves}>\n          {clicks.map((wave) => (\n            <span\n              key={wave.id}\n              className={styles.Tappable__wave}\n              style={{ top: wave.y, left: wave.x }}\n            />\n          ))}\n        </span>\n      )}\n      {((hasHover && hoverMode === 'background') || (hasActive && activeMode === 'background')) && (\n        <span aria-hidden className={styles.Tappable__stateLayer} />\n      )}\n      {!props.disabled && isPresetFocusVisibleMode && (\n        <FocusVisible mode={focusVisibleMode as FocusVisibleMode} />\n      )}\n    </Touch>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}