{"ast":null,"code":"var _jsxFileName = \"E:\\\\lessonReactForm\\\\mini-app\\\\src\\\\panels\\\\Home.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport './Home.css';\nimport { Panel, Group } from '@vkontakte/vkui';\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useForm } from \"react-hook-form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n;\nconst Home = _ref => {\n  _s();\n  let {\n    id,\n    go,\n    fetchedUser\n  } = _ref;\n  const [kek, setKek] = useState(false);\n  const [info, setInfo] = useState([]);\n  async function fetchApi() {\n    const dataApi = await axios.get('https://63c682584ebaa802854750c5.mockapi.io/test1');\n    console.log('123', data);\n    return dataApi.data;\n  }\n  async function createApi(data) {\n    const dataZ = await axios.post('https://63c682584ebaa802854750c5.mockapi.io/test1', data);\n    console.log('66', dataZ);\n  }\n  const data = useQuery('api', fetchApi);\n  console.log('222', data);\n  const onSumbit = event => {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const fields = Object.fromEntries(formData);\n    console.log('zzzzz', formData);\n    console.log('vvvv', fields);\n    mutation.mutate(fields);\n    event.target.reset();\n  };\n  const queryClient = useQueryClient();\n  const mutation = useMutation(newProduct => createApi(newProduct), {\n    onSuccess: () => queryClient.invalidateQueries(['api'])\n  });\n\n  // hooks forms\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const onSubmit = (data, event) => {\n    console.log(data);\n    mutation.mutate(data);\n    // event.target.reset()\n    resetField();\n  };\n  console.log(errors);\n\n  // console.log(watch(\"name\")) // watch input value by passing the name of it\n\n  return /*#__PURE__*/_jsxDEV(Panel, {\n    id: id,\n    children: /*#__PURE__*/_jsxDEV(Group, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: data.data !== undefined && data.data.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: item.name\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 5\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 4\n      }, this), (errors === null || errors === void 0 ? void 0 : errors.text) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"red\",\n        children: errors.text.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ...register('name', {})\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"text\",\n          ...register('text', {\n            required: 'введите инпут'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"price\",\n          ...register('price', {})\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 2\n  }, this);\n};\n_s(Home, \"0ljAn91xLoeZfw/wAxNAXs6OJSI=\", false, function () {\n  return [useQuery, useQueryClient, useMutation, useForm];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","axios","Panel","Group","useMutation","useQuery","useQueryClient","useForm","jsxDEV","_jsxDEV","Home","_ref","_s","id","go","fetchedUser","kek","setKek","info","setInfo","fetchApi","dataApi","get","console","log","data","createApi","dataZ","post","onSumbit","event","preventDefault","formData","FormData","target","fields","Object","fromEntries","mutation","mutate","reset","queryClient","newProduct","onSuccess","invalidateQueries","register","handleSubmit","watch","formState","errors","onSubmit","resetField","children","undefined","map","item","name","fileName","_jsxFileName","lineNumber","columnNumber","text","className","message","type","placeholder","required","_c","$RefreshReg$"],"sources":["E:/lessonReactForm/mini-app/src/panels/Home.tsx"],"sourcesContent":["import React, { MouseEventHandler, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {clsx} from 'clsx';\nimport axios from 'axios';\nimport './Home.css'\nimport { Panel, PanelHeader, Header, Button, Group, Cell, Div, Avatar } from '@vkontakte/vkui';\nimport { UserInfo } from '@vkontakte/vk-bridge';\nimport { QueryClient, useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useForm, SubmitHandler } from \"react-hook-form\";\n\ninterface Props {\n\tid: string;\n\tgo: MouseEventHandler<HTMLElement>;\n\tfetchedUser?: UserInfo;\n}\ninterface Inputs  {\n\texample: string,\n\texampleRequired: string,\n\tname:string,\n\ttext:string,\n\tprice:string\n};\n\n\n\nconst Home: React.FC<Props> = ({ id, go, fetchedUser }) => {\n\tconst [kek,setKek] = useState<boolean>(false)\n\tconst [info,setInfo] = useState([])\n\n\n\n\tasync function fetchApi() {\n\t\tconst dataApi = await axios.get('https://63c682584ebaa802854750c5.mockapi.io/test1')\n\t\tconsole.log('123',data)\n\t\treturn dataApi.data\n\t}\n\n\tasync function createApi(data:any) {\n\t\tconst dataZ = await axios.post('https://63c682584ebaa802854750c5.mockapi.io/test1',\n\t\tdata)\n\t\tconsole.log('66',dataZ)\n\t\t\n\t}\n\n\tconst data:any = useQuery('api',fetchApi)\n\tconsole.log('222',data)\n\t\n\t\n\tconst onSumbit = (event:any)=>{\n\t\tevent.preventDefault()\n\n\t\tconst formData = new FormData(event.target)\n\t\tconst fields:any = Object.fromEntries(formData)\n\t\t\n\t\tconsole.log('zzzzz',formData)\n\t\tconsole.log('vvvv',fields)\n\t\tmutation.mutate(fields)\n\t\tevent.target.reset()\n\t}\n\tconst queryClient = useQueryClient()\n\n\tconst mutation = useMutation((newProduct)=>createApi(newProduct),\n\t{onSuccess:()=>queryClient.invalidateQueries(['api'])}\n\t)\n\n\t// hooks forms\n\n\tconst { register, handleSubmit, watch, formState: { errors } } = useForm<Inputs>();\n    const onSubmit: SubmitHandler<Inputs> = (data:any,event:any) => {\n\t\tconsole.log(data);\n\t\tmutation.mutate(data)\n\t\t// event.target.reset()\n\t\tresetField()\n\t\t\n\t}\n\tconsole.log(errors)\n\n    // console.log(watch(\"name\")) // watch input value by passing the name of it\n\n\treturn(\n\t<Panel id={id}>\n\t\t<Group>\n\t\t\t{/* <div className={clsx('sss',kek&&'sss1')}>хех</div>\n\t\t\t<button onClick={()=>setKek(prev=>!prev)}>жжж</button> */}\n\t\t\t<div>{data.data !== undefined  &&\n\t\t\tdata.data.map((item:any)=>{\n\t\t\t\treturn(\n\t\t\t\t<div key={item.id}>{item.name}</div>)\n\t\t\t})}</div>\n\t\t\t{errors?.text && <div className='red'>{errors.text.message}</div>}\n\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\n\t\t\t\t<input type='text'  {...register('name', {})} />\n\t\t\t\t<input type='text' placeholder='text' {...register('text', {required:'введите инпут'})} />\n\t\t\t\t<input  type='text' placeholder='price'  {...register('price', {})} />\n\t\t\t\t<button>Отправить</button> \n\t\t\t</form>\n\t\t\t\n\t\t</Group>\n\n\n\t\t\n\t</Panel>\n\t)\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}