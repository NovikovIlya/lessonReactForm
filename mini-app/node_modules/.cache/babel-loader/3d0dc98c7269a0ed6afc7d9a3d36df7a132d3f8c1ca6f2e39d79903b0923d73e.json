{"ast":null,"code":"import _createForOfIteratorHelper from \"@babel/runtime/helpers/createForOfIteratorHelper\";\nimport { getTitleFromChildren } from './utils';\nvar findAllIncludes = function findAllIncludes() {\n  var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var search = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var includes = [];\n  var i = target.indexOf(search);\n  while (i !== -1) {\n    includes.push(i);\n    i = target.indexOf(search, i + 1);\n  }\n  return includes;\n};\nvar letterRegexp;\n\n// На момент написания флаг u не поддерживался рядом браузеров, поэтому добавили фоллбэк.\ntry {\n  letterRegexp = new RegExp('\\\\p{L}', 'u');\n} catch (e) {}\nvar _getOptionLabel = function _getOptionLabel(option) {\n  return getTitleFromChildren(option.label);\n};\nexport var defaultFilterFn = function defaultFilterFn() {\n  var _getOptionLabel2;\n  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var option = arguments.length > 1 ? arguments[1] : undefined;\n  var getOptionLabel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _getOptionLabel;\n  query = query.toLocaleLowerCase();\n  var label = (_getOptionLabel2 = getOptionLabel(option)) === null || _getOptionLabel2 === void 0 ? void 0 : _getOptionLabel2.toLocaleLowerCase();\n  if (label !== null && label !== void 0 && label.startsWith(query)) {\n    return true;\n  }\n  var includes = findAllIncludes(label, query);\n\n  // Ищем вхождение перед началом которого не буква\n  if (letterRegexp && label) {\n    var _iterator = _createForOfIteratorHelper(includes),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _index = _step.value;\n        if (!letterRegexp.test(label[_index - 1])) {\n          return true;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    // если regexp не поддерживается, то ищем любое вхождение\n    return includes.length > 0;\n  }\n  return false;\n};\nexport var getFormFieldModeFromSelectType = function getFormFieldModeFromSelectType() {\n  var selectType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n  return selectType === 'default' ? 'default' : 'plain';\n};","map":{"version":3,"names":["getTitleFromChildren","findAllIncludes","target","arguments","length","undefined","search","includes","i","indexOf","push","letterRegexp","RegExp","e","_getOptionLabel","option","label","defaultFilterFn","_getOptionLabel2","query","getOptionLabel","toLocaleLowerCase","startsWith","_iterator","_createForOfIteratorHelper","_step","s","n","done","_index","value","test","err","f","getFormFieldModeFromSelectType","selectType"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\lib\\select.ts"],"sourcesContent":["import * as React from 'react';\nimport { getTitleFromChildren } from './utils';\nimport { SelectType } from '../components/Select/Select';\n\ntype Option = {\n  label?: React.ReactElement | string;\n  [index: string]: any;\n};\n\nconst findAllIncludes = (target = '', search = '') => {\n  const includes = [];\n\n  let i = target.indexOf(search);\n  while (i !== -1) {\n    includes.push(i);\n    i = target.indexOf(search, i + 1);\n  }\n\n  return includes;\n};\n\nlet letterRegexp: RegExp;\n\n// На момент написания флаг u не поддерживался рядом браузеров, поэтому добавили фоллбэк.\ntry {\n  letterRegexp = new RegExp('\\\\p{L}', 'u');\n} catch (e) {}\n\ntype GetOptionLabel = (option: Option) => string | undefined;\n\nconst _getOptionLabel: GetOptionLabel = (option) => getTitleFromChildren(option.label);\n\nexport const defaultFilterFn = (\n  query = '',\n  option: Option,\n  getOptionLabel: GetOptionLabel = _getOptionLabel,\n) => {\n  query = query.toLocaleLowerCase();\n  let label = getOptionLabel(option)?.toLocaleLowerCase();\n\n  if (label?.startsWith(query)) {\n    return true;\n  }\n\n  const includes = findAllIncludes(label, query);\n\n  // Ищем вхождение перед началом которого не буква\n  if (letterRegexp && label) {\n    for (const index of includes) {\n      if (!letterRegexp.test(label[index - 1])) {\n        return true;\n      }\n    }\n  } else {\n    // если regexp не поддерживается, то ищем любое вхождение\n    return includes.length > 0;\n  }\n\n  return false;\n};\n\nexport const getFormFieldModeFromSelectType = (selectType: SelectType = 'default') => {\n  return selectType === 'default' ? 'default' : 'plain';\n};\n"],"mappings":";AACA,SAASA,oBAAoB,QAAQ,SAAS;AAQ9C,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAiC;EAAA,IAA7BC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAAA,IAAEG,MAAM,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAC/C,IAAMI,QAAQ,GAAG,EAAE;EAEnB,IAAIC,CAAC,GAAGN,MAAM,CAACO,OAAO,CAACH,MAAM,CAAC;EAC9B,OAAOE,CAAC,KAAK,CAAC,CAAC,EAAE;IACfD,QAAQ,CAACG,IAAI,CAACF,CAAC,CAAC;IAChBA,CAAC,GAAGN,MAAM,CAACO,OAAO,CAACH,MAAM,EAAEE,CAAC,GAAG,CAAC,CAAC;EACnC;EAEA,OAAOD,QAAQ;AACjB,CAAC;AAED,IAAII,YAAoB;;AAExB;AACA,IAAI;EACFA,YAAY,GAAG,IAAIC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC;AAC1C,CAAC,CAAC,OAAOC,CAAC,EAAE,CAAC;AAIb,IAAMC,eAA+B,GAAG,SAAlCA,eAA+BA,CAAIC,MAAM;EAAA,OAAKf,oBAAoB,CAACe,MAAM,CAACC,KAAK,CAAC;AAAA;AAEtF,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAIvB;EAAA,IAAAC,gBAAA;EAAA,IAHHC,KAAK,GAAAhB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAAA,IACVY,MAAc,GAAAZ,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAAA,IACde,cAA8B,GAAAjB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGW,eAAe;EAEhDK,KAAK,GAAGA,KAAK,CAACE,iBAAiB,EAAE;EACjC,IAAIL,KAAK,IAAAE,gBAAA,GAAGE,cAAc,CAACL,MAAM,CAAC,cAAAG,gBAAA,uBAAtBA,gBAAA,CAAwBG,iBAAiB,EAAE;EAEvD,IAAIL,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEM,UAAU,CAACH,KAAK,CAAC,EAAE;IAC5B,OAAO,IAAI;EACb;EAEA,IAAMZ,QAAQ,GAAGN,eAAe,CAACe,KAAK,EAAEG,KAAK,CAAC;;EAE9C;EACA,IAAIR,YAAY,IAAIK,KAAK,EAAE;IAAA,IAAAO,SAAA,GAAAC,0BAAA,CACLjB,QAAQ;MAAAkB,KAAA;IAAA;MAA5B,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAA8B;QAAA,IAAnBC,MAAK,GAAAJ,KAAA,CAAAK,KAAA;QACd,IAAI,CAACnB,YAAY,CAACoB,IAAI,CAACf,KAAK,CAACa,MAAK,GAAG,CAAC,CAAC,CAAC,EAAE;UACxC,OAAO,IAAI;QACb;MACF;IAAC,SAAAG,GAAA;MAAAT,SAAA,CAAAV,CAAA,CAAAmB,GAAA;IAAA;MAAAT,SAAA,CAAAU,CAAA;IAAA;EACH,CAAC,MAAM;IACL;IACA,OAAO1B,QAAQ,CAACH,MAAM,GAAG,CAAC;EAC5B;EAEA,OAAO,KAAK;AACd,CAAC;AAED,OAAO,IAAM8B,8BAA8B,GAAG,SAAjCA,8BAA8BA,CAAA,EAA2C;EAAA,IAAvCC,UAAsB,GAAAhC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,SAAS;EAC/E,OAAOgC,UAAU,KAAK,SAAS,GAAG,SAAS,GAAG,OAAO;AACvD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}