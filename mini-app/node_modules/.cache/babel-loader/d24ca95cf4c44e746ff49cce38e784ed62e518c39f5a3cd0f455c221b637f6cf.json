{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"isFetching\", \"onRefresh\", \"className\"];\nimport * as React from 'react';\nimport { useDOM } from '../../lib/dom';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { runTapticImpactOccurred } from '../../lib/taptic';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { useScroll } from '../AppRoot/ScrollContext';\nimport { Touch } from '../Touch/Touch';\nimport { FixedLayout } from '../FixedLayout/FixedLayout';\nimport { PullToRefreshSpinner } from './PullToRefreshSpinner';\nimport TouchRootContext from '../Touch/TouchContext';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { clamp } from '../../helpers/math';\nfunction cancelEvent(event) {\n  if (!event) {\n    return false;\n  }\n  while (event.originalEvent) {\n    event = event.originalEvent;\n  }\n  if (event.preventDefault && event.cancelable) {\n    event.preventDefault();\n  }\n  if (event.stopPropagation) {\n    event.stopPropagation();\n  }\n  return false;\n}\nvar TOUCH_MOVE_EVENT_PARAMS = {\n  cancelable: true,\n  passive: false\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PullToRefresh\n */\nexport var PullToRefresh = function PullToRefresh(_ref) {\n  var children = _ref.children,\n    isFetching = _ref.isFetching,\n    onRefresh = _ref.onRefresh,\n    className = _ref.className,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var platform = usePlatform();\n  var scroll = useScroll();\n  var _useDOM = useDOM(),\n    document = _useDOM.document;\n  var prevIsFetching = usePrevious(isFetching);\n  var initParams = React.useMemo(function () {\n    return {\n      start: platform === Platform.IOS ? -10 : -45,\n      max: platform === Platform.IOS ? 50 : 80,\n      maxY: platform === Platform.IOS ? 400 : 80,\n      refreshing: platform === Platform.IOS ? 36 : 50,\n      positionMultiplier: platform === Platform.IOS ? 0.21 : 1\n    };\n  }, [platform]);\n  var _React$useState = React.useState(initParams.start),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    spinnerY = _React$useState2[0],\n    setSpinnerY = _React$useState2[1];\n  var _React$useState3 = React.useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    watching = _React$useState4[0],\n    setWatching = _React$useState4[1];\n  var _React$useState5 = React.useState(false),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    refreshing = _React$useState6[0],\n    setRefreshing = _React$useState6[1];\n  var _React$useState7 = React.useState(false),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    canRefresh = _React$useState8[0],\n    setCanRefresh = _React$useState8[1];\n  var _React$useState9 = React.useState(false),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    touchDown = _React$useState10[0],\n    setTouchDown = _React$useState10[1];\n  var prevTouchDown = usePrevious(touchDown);\n  var touchY = React.useRef(0);\n  var _React$useState11 = React.useState(0),\n    _React$useState12 = _slicedToArray(_React$useState11, 2),\n    contentShift = _React$useState12[0],\n    setContentShift = _React$useState12[1];\n  var _React$useState13 = React.useState(0),\n    _React$useState14 = _slicedToArray(_React$useState13, 2),\n    spinnerProgress = _React$useState14[0],\n    setSpinnerProgress = _React$useState14[1];\n  var onWindowTouchMove = function onWindowTouchMove(event) {\n    if (refreshing) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n  useGlobalEventListener(document, 'touchmove', onWindowTouchMove, TOUCH_MOVE_EVENT_PARAMS);\n  var resetRefreshingState = React.useCallback(function () {\n    setWatching(false);\n    setCanRefresh(false);\n    setRefreshing(false);\n    setSpinnerY(initParams.start);\n    setSpinnerProgress(0);\n    setContentShift(0);\n  }, [initParams]);\n  var onRefreshingFinish = React.useCallback(function () {\n    if (!touchDown) {\n      resetRefreshingState();\n    }\n  }, [touchDown, resetRefreshingState]);\n  var _useTimeout = useTimeout(onRefreshingFinish, 1000),\n    setWaitFetchingTimeout = _useTimeout.set,\n    clearWaitFetchingTimeout = _useTimeout.clear;\n  useIsomorphicLayoutEffect(function () {\n    if (prevIsFetching !== undefined && prevIsFetching && !isFetching) {\n      onRefreshingFinish();\n    }\n  }, [prevIsFetching, isFetching, onRefreshingFinish]);\n  useIsomorphicLayoutEffect(function () {\n    if (prevIsFetching !== undefined && !prevIsFetching && isFetching) {\n      clearWaitFetchingTimeout();\n    }\n  }, [isFetching, prevIsFetching, clearWaitFetchingTimeout]);\n  var runRefreshing = React.useCallback(function () {\n    if (!refreshing && onRefresh) {\n      // cleanup if the consumer does not start fetching in 1s\n      setWaitFetchingTimeout();\n      setRefreshing(true);\n      setSpinnerY(function (prevSpinnerY) {\n        return platform === Platform.IOS ? prevSpinnerY : initParams.refreshing;\n      });\n      onRefresh();\n      runTapticImpactOccurred('light');\n    }\n  }, [refreshing, onRefresh, setWaitFetchingTimeout, platform, initParams.refreshing]);\n  useIsomorphicLayoutEffect(function () {\n    if (prevTouchDown !== undefined && prevTouchDown && !touchDown) {\n      if (!refreshing && canRefresh) {\n        runRefreshing();\n      } else if (refreshing && !isFetching) {\n        // only iOS can start refresh before gesture end\n        resetRefreshingState();\n      } else {\n        // refreshing && isFetching: refresh in progress\n        // OR !refreshing && !canRefresh: pull was not strong enough\n        setSpinnerY(refreshing ? initParams.refreshing : initParams.start);\n        setSpinnerProgress(0);\n        setContentShift(0);\n      }\n    }\n  }, [initParams, prevIsFetching, isFetching, onRefreshingFinish, prevTouchDown, touchDown, refreshing, canRefresh, runRefreshing]);\n  var onTouchStart = function onTouchStart(e) {\n    if (refreshing) {\n      cancelEvent(e);\n    }\n    setTouchDown(true);\n  };\n  var onTouchMove = function onTouchMove(e) {\n    var isY = e.isY,\n      shiftY = e.shiftY;\n    var start = initParams.start,\n      max = initParams.max;\n    var pageYOffset = scroll === null || scroll === void 0 ? void 0 : scroll.getScroll().y;\n    if (watching && touchDown) {\n      cancelEvent(e);\n      var positionMultiplier = initParams.positionMultiplier,\n        maxY = initParams.maxY;\n      var shift = Math.max(0, shiftY - touchY.current);\n      var currentY = clamp(start + shift * positionMultiplier, start, maxY);\n      var progress = currentY > -10 ? Math.abs((currentY + 10) / max) * 80 : 0;\n      setSpinnerY(currentY);\n      setSpinnerProgress(clamp(progress, 0, 80));\n      setCanRefresh(progress > 80);\n      setContentShift((currentY + 10) * 2.3);\n      if (progress > 85 && !refreshing && platform === Platform.IOS) {\n        runRefreshing();\n      }\n    } else if (isY && pageYOffset === 0 && shiftY > 0 && !refreshing && touchDown) {\n      cancelEvent(e);\n      touchY.current = shiftY;\n      setWatching(true);\n      setSpinnerY(start);\n      setSpinnerProgress(0);\n    }\n  };\n  var onTouchEnd = function onTouchEnd() {\n    setWatching(false);\n    setTouchDown(false);\n  };\n  var spinnerTransform = \"translate3d(0, \".concat(spinnerY, \"px, 0)\");\n  var contentTransform = '';\n  if (platform === Platform.IOS && refreshing && !touchDown) {\n    contentTransform = 'translate3d(0, 100px, 0)';\n  } else if (platform === Platform.IOS && (contentShift || refreshing)) {\n    contentTransform = \"translate3d(0, \".concat(contentShift, \"px, 0)\");\n  }\n  return /*#__PURE__*/React.createElement(TouchRootContext.Provider, {\n    value: true\n  }, /*#__PURE__*/React.createElement(Touch, _extends({}, restProps, {\n    onStart: onTouchStart,\n    onMove: onTouchMove,\n    onEnd: onTouchEnd,\n    className: classNames(\"vkuiPullToRefresh\", platform === Platform.IOS && \"vkuiPullToRefresh--ios\", watching && \"vkuiPullToRefresh--watching\", refreshing && \"vkuiPullToRefresh--refreshing\", className)\n  }), /*#__PURE__*/React.createElement(FixedLayout, {\n    className: \"vkuiPullToRefresh__controls\"\n  }, /*#__PURE__*/React.createElement(PullToRefreshSpinner, {\n    style: {\n      transform: spinnerTransform,\n      WebkitTransform: spinnerTransform,\n      opacity: watching || refreshing || canRefresh ? 1 : 0\n    },\n    on: refreshing,\n    progress: refreshing ? undefined : spinnerProgress\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPullToRefresh__content\",\n    style: {\n      transform: contentTransform,\n      WebkitTransform: contentTransform\n    }\n  }, children)));\n};","map":{"version":3,"names":["React","useDOM","classNames","Platform","runTapticImpactOccurred","useIsomorphicLayoutEffect","usePlatform","useGlobalEventListener","useScroll","Touch","FixedLayout","PullToRefreshSpinner","TouchRootContext","usePrevious","useTimeout","clamp","cancelEvent","event","originalEvent","preventDefault","cancelable","stopPropagation","TOUCH_MOVE_EVENT_PARAMS","passive","PullToRefresh","_ref","children","isFetching","onRefresh","className","restProps","_objectWithoutProperties","_excluded","platform","scroll","_useDOM","document","prevIsFetching","initParams","useMemo","start","IOS","max","maxY","refreshing","positionMultiplier","_React$useState","useState","_React$useState2","_slicedToArray","spinnerY","setSpinnerY","_React$useState3","_React$useState4","watching","setWatching","_React$useState5","_React$useState6","setRefreshing","_React$useState7","_React$useState8","canRefresh","setCanRefresh","_React$useState9","_React$useState10","touchDown","setTouchDown","prevTouchDown","touchY","useRef","_React$useState11","_React$useState12","contentShift","setContentShift","_React$useState13","_React$useState14","spinnerProgress","setSpinnerProgress","onWindowTouchMove","resetRefreshingState","useCallback","onRefreshingFinish","_useTimeout","setWaitFetchingTimeout","set","clearWaitFetchingTimeout","clear","undefined","runRefreshing","prevSpinnerY","onTouchStart","e","onTouchMove","isY","shiftY","pageYOffset","getScroll","y","shift","Math","current","currentY","progress","abs","onTouchEnd","spinnerTransform","concat","contentTransform","createElement","Provider","value","_extends","onStart","onMove","onEnd","style","transform","WebkitTransform","opacity","on"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\PullToRefresh\\PullToRefresh.tsx"],"sourcesContent":["import * as React from 'react';\nimport { AnyFunction } from '../../types';\nimport { DOMProps, useDOM } from '../../lib/dom';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { runTapticImpactOccurred } from '../../lib/taptic';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { ScrollContextInterface, useScroll } from '../AppRoot/ScrollContext';\nimport { Touch, TouchEvent, TouchProps } from '../Touch/Touch';\nimport { FixedLayout } from '../FixedLayout/FixedLayout';\nimport { PullToRefreshSpinner } from './PullToRefreshSpinner';\nimport TouchRootContext from '../Touch/TouchContext';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { clamp } from '../../helpers/math';\nimport styles from './PullToRefresh.module.css';\n\nfunction cancelEvent(event: any) {\n  if (!event) {\n    return false;\n  }\n  while (event.originalEvent) {\n    event = event.originalEvent;\n  }\n  if (event.preventDefault && event.cancelable) {\n    event.preventDefault();\n  }\n  if (event.stopPropagation) {\n    event.stopPropagation();\n  }\n  return false;\n}\n\nexport interface PullToRefreshProps extends DOMProps, TouchProps {\n  /**\n   * Будет вызвана для обновления контента (прим.: функция должна быть мемоизированным коллбэком)\n   */\n  onRefresh: AnyFunction;\n  /**\n   * Определяет, выполняется ли обновление. Для скрытия спиннера после получения контента необходимо передать `false`\n   */\n  isFetching?: boolean;\n  /** @ignore */\n  scroll?: ScrollContextInterface;\n  children?: React.ReactNode;\n}\n\nconst TOUCH_MOVE_EVENT_PARAMS = {\n  cancelable: true,\n  passive: false,\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PullToRefresh\n */\nexport const PullToRefresh = ({\n  children,\n  isFetching,\n  onRefresh,\n  className,\n  ...restProps\n}: PullToRefreshProps) => {\n  const platform = usePlatform();\n  const scroll = useScroll();\n  const { document } = useDOM();\n  const prevIsFetching = usePrevious(isFetching);\n\n  const initParams = React.useMemo(\n    () => ({\n      start: platform === Platform.IOS ? -10 : -45,\n      max: platform === Platform.IOS ? 50 : 80,\n      maxY: platform === Platform.IOS ? 400 : 80,\n      refreshing: platform === Platform.IOS ? 36 : 50,\n      positionMultiplier: platform === Platform.IOS ? 0.21 : 1,\n    }),\n    [platform],\n  );\n\n  const [spinnerY, setSpinnerY] = React.useState(initParams.start);\n  const [watching, setWatching] = React.useState(false);\n  const [refreshing, setRefreshing] = React.useState(false);\n  const [canRefresh, setCanRefresh] = React.useState(false);\n  const [touchDown, setTouchDown] = React.useState(false);\n  const prevTouchDown = usePrevious(touchDown);\n\n  const touchY = React.useRef(0);\n  const [contentShift, setContentShift] = React.useState(0);\n  const [spinnerProgress, setSpinnerProgress] = React.useState(0);\n\n  const onWindowTouchMove = (event: Event) => {\n    if (refreshing) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  useGlobalEventListener(document, 'touchmove', onWindowTouchMove, TOUCH_MOVE_EVENT_PARAMS);\n\n  const resetRefreshingState = React.useCallback(() => {\n    setWatching(false);\n    setCanRefresh(false);\n    setRefreshing(false);\n    setSpinnerY(initParams.start);\n    setSpinnerProgress(0);\n    setContentShift(0);\n  }, [initParams]);\n\n  const onRefreshingFinish = React.useCallback(() => {\n    if (!touchDown) {\n      resetRefreshingState();\n    }\n  }, [touchDown, resetRefreshingState]);\n\n  const { set: setWaitFetchingTimeout, clear: clearWaitFetchingTimeout } = useTimeout(\n    onRefreshingFinish,\n    1000,\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevIsFetching !== undefined && prevIsFetching && !isFetching) {\n      onRefreshingFinish();\n    }\n  }, [prevIsFetching, isFetching, onRefreshingFinish]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevIsFetching !== undefined && !prevIsFetching && isFetching) {\n      clearWaitFetchingTimeout();\n    }\n  }, [isFetching, prevIsFetching, clearWaitFetchingTimeout]);\n\n  const runRefreshing = React.useCallback(() => {\n    if (!refreshing && onRefresh) {\n      // cleanup if the consumer does not start fetching in 1s\n      setWaitFetchingTimeout();\n\n      setRefreshing(true);\n      setSpinnerY((prevSpinnerY) =>\n        platform === Platform.IOS ? prevSpinnerY : initParams.refreshing,\n      );\n\n      onRefresh();\n      runTapticImpactOccurred('light');\n    }\n  }, [refreshing, onRefresh, setWaitFetchingTimeout, platform, initParams.refreshing]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevTouchDown !== undefined && prevTouchDown && !touchDown) {\n      if (!refreshing && canRefresh) {\n        runRefreshing();\n      } else if (refreshing && !isFetching) {\n        // only iOS can start refresh before gesture end\n        resetRefreshingState();\n      } else {\n        // refreshing && isFetching: refresh in progress\n        // OR !refreshing && !canRefresh: pull was not strong enough\n        setSpinnerY(refreshing ? initParams.refreshing : initParams.start);\n        setSpinnerProgress(0);\n        setContentShift(0);\n      }\n    }\n  }, [\n    initParams,\n    prevIsFetching,\n    isFetching,\n    onRefreshingFinish,\n    prevTouchDown,\n    touchDown,\n    refreshing,\n    canRefresh,\n    runRefreshing,\n  ]);\n\n  const onTouchStart = (e: TouchEvent) => {\n    if (refreshing) {\n      cancelEvent(e);\n    }\n    setTouchDown(true);\n  };\n\n  const onTouchMove = (e: TouchEvent) => {\n    const { isY, shiftY } = e;\n    const { start, max } = initParams;\n    const pageYOffset = scroll?.getScroll().y;\n\n    if (watching && touchDown) {\n      cancelEvent(e);\n\n      const { positionMultiplier, maxY } = initParams;\n\n      const shift = Math.max(0, shiftY - touchY.current);\n\n      const currentY = clamp(start + shift * positionMultiplier, start, maxY);\n      const progress = currentY > -10 ? Math.abs((currentY + 10) / max) * 80 : 0;\n\n      setSpinnerY(currentY);\n      setSpinnerProgress(clamp(progress, 0, 80));\n      setCanRefresh(progress > 80);\n      setContentShift((currentY + 10) * 2.3);\n\n      if (progress > 85 && !refreshing && platform === Platform.IOS) {\n        runRefreshing();\n      }\n    } else if (isY && pageYOffset === 0 && shiftY > 0 && !refreshing && touchDown) {\n      cancelEvent(e);\n\n      touchY.current = shiftY;\n      setWatching(true);\n      setSpinnerY(start);\n      setSpinnerProgress(0);\n    }\n  };\n\n  const onTouchEnd = () => {\n    setWatching(false);\n    setTouchDown(false);\n  };\n\n  const spinnerTransform = `translate3d(0, ${spinnerY}px, 0)`;\n  let contentTransform = '';\n\n  if (platform === Platform.IOS && refreshing && !touchDown) {\n    contentTransform = 'translate3d(0, 100px, 0)';\n  } else if (platform === Platform.IOS && (contentShift || refreshing)) {\n    contentTransform = `translate3d(0, ${contentShift}px, 0)`;\n  }\n\n  return (\n    <TouchRootContext.Provider value={true}>\n      <Touch\n        {...restProps}\n        onStart={onTouchStart}\n        onMove={onTouchMove}\n        onEnd={onTouchEnd}\n        className={classNames(\n          styles['PullToRefresh'],\n          platform === Platform.IOS && styles['PullToRefresh--ios'],\n          watching && styles['PullToRefresh--watching'],\n          refreshing && styles['PullToRefresh--refreshing'],\n          className,\n        )}\n      >\n        <FixedLayout className={styles['PullToRefresh__controls']}>\n          <PullToRefreshSpinner\n            style={{\n              transform: spinnerTransform,\n              WebkitTransform: spinnerTransform,\n              opacity: watching || refreshing || canRefresh ? 1 : 0,\n            }}\n            on={refreshing}\n            progress={refreshing ? undefined : spinnerProgress}\n          />\n        </FixedLayout>\n\n        <div\n          className={styles['PullToRefresh__content']}\n          style={{\n            transform: contentTransform,\n            WebkitTransform: contentTransform,\n          }}\n        >\n          {children}\n        </div>\n      </Touch>\n    </TouchRootContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}