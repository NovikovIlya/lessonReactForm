{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"bannerData\", \"onClose\", \"isCloseButtonHidden\", \"className\"];\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Icon24Dismiss } from '@vkontakte/icons';\nimport { Button } from '../Button/Button';\nimport { SimpleCell } from '../SimpleCell/SimpleCell';\nimport { Image } from '../Image/Image';\nimport { Footnote } from '../Typography/Footnote/Footnote';\n/**\n * @see https://vkcom.github.io/VKUI/#/PromoBanner\n */\nexport var PromoBanner = function PromoBanner(_ref) {\n  var _ref$bannerData = _ref.bannerData,\n    bannerData = _ref$bannerData === void 0 ? {} : _ref$bannerData,\n    onClose = _ref.onClose,\n    isCloseButtonHidden = _ref.isCloseButtonHidden,\n    className = _ref.className,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var _React$useState = React.useState(''),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    currentPixel = _React$useState2[0],\n    setCurrentPixel = _React$useState2[1];\n  var statsPixels = React.useMemo(function () {\n    return bannerData.statistics ? bannerData.statistics.reduce(function (acc, item) {\n      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, item.type, item.url));\n    }, {}) : {};\n  }, [bannerData.statistics]);\n  var onClick = React.useCallback(function () {\n    return setCurrentPixel(statsPixels.click || '');\n  }, [statsPixels.click]);\n  React.useEffect(function () {\n    if (statsPixels.playbackStarted) {\n      setCurrentPixel(statsPixels.playbackStarted);\n    }\n  }, [statsPixels.playbackStarted]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: classNames(\"vkuiPromoBanner\", className)\n  }, restProps), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__head\"\n  }, /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiPromoBanner__label\"\n  }, bannerData.advertisingLabel || 'Advertisement'), bannerData.ageRestrictions && /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiPromoBanner__age\"\n  }, bannerData.ageRestrictions), !isCloseButtonHidden && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__close\",\n    onClick: onClose\n  }, /*#__PURE__*/React.createElement(Icon24Dismiss, null))), /*#__PURE__*/React.createElement(SimpleCell, {\n    href: bannerData.trackingLink,\n    onClick: onClick,\n    rel: \"nofollow noopener noreferrer\",\n    target: \"_blank\",\n    before: bannerData.iconLink && /*#__PURE__*/React.createElement(Image, {\n      size: 48,\n      src: bannerData.iconLink,\n      alt: bannerData.title,\n      \"data-testid\": process.env.NODE_ENV === 'test' ? 'avatar' : undefined\n    }),\n    after: bannerData.ctaText && /*#__PURE__*/React.createElement(Button, {\n      mode: \"outline\",\n      \"data-testid\": process.env.NODE_ENV === 'test' ? 'button-ctaText' : undefined\n    }, bannerData.ctaText),\n    subtitle: bannerData.domain\n  }, bannerData.title), currentPixel.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__pixels\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: currentPixel,\n    alt: \"\"\n  })));\n};","map":{"version":3,"names":["React","classNames","Icon24Dismiss","Button","SimpleCell","Image","Footnote","PromoBanner","_ref","_ref$bannerData","bannerData","onClose","isCloseButtonHidden","className","restProps","_objectWithoutProperties","_excluded","_React$useState","useState","_React$useState2","_slicedToArray","currentPixel","setCurrentPixel","statsPixels","useMemo","statistics","reduce","acc","item","_objectSpread","_defineProperty","type","url","onClick","useCallback","click","useEffect","playbackStarted","createElement","_extends","advertisingLabel","ageRestrictions","href","trackingLink","rel","target","before","iconLink","size","src","alt","title","process","env","NODE_ENV","undefined","after","ctaText","mode","subtitle","domain","length"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\PromoBanner\\PromoBanner.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Icon24Dismiss } from '@vkontakte/icons';\nimport { Button } from '../Button/Button';\nimport { SimpleCell } from '../SimpleCell/SimpleCell';\nimport { Image } from '../Image/Image';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport styles from './PromoBanner.module.css';\n\ntype StatsType =\n  | 'playbackStarted' // Начало показа\n  | 'click'; // Клик по баннеру\n\ntype BannerData = {\n  title?: string;\n  url_types?: string;\n  bannerID?: string;\n  imageWidth?: number;\n  imageHeight?: number;\n  imageLink?: string;\n  trackingLink?: string;\n  type?: string;\n  iconWidth?: number;\n  domain?: string;\n  ctaText?: string;\n  advertisingLabel?: string;\n  iconLink?: string;\n  statistics?: Array<{ type: StatsType; url: string }>;\n  openInBrowser?: boolean;\n  iconHeight?: number;\n  directLink?: boolean;\n  navigationType?: string;\n  description?: string;\n  ageRestrictions?: string;\n};\n\nexport interface PromoBannerProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** Данные рекламного баннера, полученные из VKWebAppGetAds */\n  bannerData: BannerData;\n  /** Флаг скрытия кнопки закрытия рекламы */\n  isCloseButtonHidden?: boolean;\n  /** Хандлер закрытия рекламы */\n  onClose: () => void;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PromoBanner\n */\nexport const PromoBanner = ({\n  bannerData = {},\n  onClose,\n  isCloseButtonHidden,\n  className,\n  ...restProps\n}: PromoBannerProps) => {\n  const [currentPixel, setCurrentPixel] = React.useState('');\n\n  const statsPixels = React.useMemo(\n    () =>\n      (bannerData.statistics\n        ? bannerData.statistics.reduce((acc, item) => ({ ...acc, [item.type]: item.url }), {})\n        : {}) as Record<StatsType, string | void>,\n    [bannerData.statistics],\n  );\n\n  const onClick = React.useCallback(\n    () => setCurrentPixel(statsPixels.click || ''),\n    [statsPixels.click],\n  );\n\n  React.useEffect(() => {\n    if (statsPixels.playbackStarted) {\n      setCurrentPixel(statsPixels.playbackStarted);\n    }\n  }, [statsPixels.playbackStarted]);\n\n  return (\n    <div className={classNames(styles['PromoBanner'], className)} {...restProps}>\n      <div className={styles['PromoBanner__head']}>\n        <Footnote className={styles['PromoBanner__label']}>\n          {bannerData.advertisingLabel || 'Advertisement'}\n        </Footnote>\n        {bannerData.ageRestrictions && (\n          <Footnote className={styles['PromoBanner__age']}>{bannerData.ageRestrictions}</Footnote>\n        )}\n\n        {!isCloseButtonHidden && (\n          <div className={styles['PromoBanner__close']} onClick={onClose}>\n            <Icon24Dismiss />\n          </div>\n        )}\n      </div>\n      <SimpleCell\n        href={bannerData.trackingLink}\n        onClick={onClick}\n        rel=\"nofollow noopener noreferrer\"\n        target=\"_blank\"\n        before={\n          bannerData.iconLink && (\n            <Image\n              size={48}\n              src={bannerData.iconLink}\n              alt={bannerData.title}\n              data-testid={process.env.NODE_ENV === 'test' ? 'avatar' : undefined}\n            />\n          )\n        }\n        after={\n          bannerData.ctaText && (\n            <Button\n              mode=\"outline\"\n              data-testid={process.env.NODE_ENV === 'test' ? 'button-ctaText' : undefined}\n            >\n              {bannerData.ctaText}\n            </Button>\n          )\n        }\n        subtitle={bannerData.domain}\n      >\n        {bannerData.title}\n      </SimpleCell>\n\n      {currentPixel.length > 0 && (\n        <div className={styles['PromoBanner__pixels']}>\n          <img src={currentPixel} alt=\"\" />\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}