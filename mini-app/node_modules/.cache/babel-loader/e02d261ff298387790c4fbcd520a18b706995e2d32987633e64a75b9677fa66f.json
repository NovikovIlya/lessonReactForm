{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport { useTimeout } from '../../hooks/useTimeout';\n\n/**\n * Хук, который позволяет управлять видимостью ползунка скроллбара.\n * @param autoHideScrollbar - скрывать ли ползунок скроллбара\n * @param autoHideScrollbarDelay - через какое кол-во миллисекунд ползунок скроллбара скрывается\n * @returns Объект, содержащий параметры, которые позволяют управлять видимостью ползунка\n */\nexport var useTrackerVisibility = function useTrackerVisibility() {\n  var autoHideScrollbar = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  var autoHideScrollbarDelay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;\n  var _React$useState = React.useState(!autoHideScrollbar),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    trackerVisible = _React$useState2[0],\n    setTrackerVisible = _React$useState2[1];\n  var isMouseOver = React.useRef(false);\n  var isTrackerDragging = React.useRef(false);\n  var _useTimeout = useTimeout(function () {\n      return setTrackerVisible(false);\n    }, autoHideScrollbarDelay),\n    setVisibilityTimeout = _useTimeout.set,\n    clearVisibilityTimeout = _useTimeout.clear;\n  var onTrackerDragStart = React.useCallback(function () {\n    clearVisibilityTimeout();\n    setTrackerVisible(true);\n    isTrackerDragging.current = true;\n  }, [clearVisibilityTimeout]);\n  var onTrackerDragStop = React.useCallback(function () {\n    isTrackerDragging.current = false;\n    if (!isMouseOver.current) {\n      setVisibilityTimeout();\n    }\n  }, [setVisibilityTimeout, isMouseOver]);\n\n  /**\n   * Позволяет \"запланировать\" скрытие ползунка через delay миллисекунд. Если тайм-аут не успевает сработать, то каждый\n   * последующий вызов функции откладывает скрытие ползунка на delay миллисекунд\n   */\n  var queueTrackerVisibility = React.useCallback(function () {\n    if (isTrackerDragging.current) {\n      return;\n    }\n    setTrackerVisible(true);\n    setVisibilityTimeout();\n  }, [setVisibilityTimeout]);\n  var onTrackerMouseEnter = React.useCallback(function () {\n    clearVisibilityTimeout();\n    isMouseOver.current = true;\n    setTrackerVisible(true);\n  }, [clearVisibilityTimeout]);\n  var onTrackerMouseLeave = React.useCallback(function () {\n    queueTrackerVisibility();\n    isMouseOver.current = false;\n  }, [queueTrackerVisibility]);\n  var onTargetScroll = React.useCallback(function () {\n    queueTrackerVisibility();\n  }, [queueTrackerVisibility]);\n  return {\n    trackerVisible: trackerVisible,\n    onTrackerDragStart: onTrackerDragStart,\n    onTrackerDragStop: onTrackerDragStop,\n    onTrackerMouseEnter: onTrackerMouseEnter,\n    onTrackerMouseLeave: onTrackerMouseLeave,\n    onTargetScroll: onTargetScroll\n  };\n};","map":{"version":3,"names":["React","useTimeout","useTrackerVisibility","autoHideScrollbar","arguments","length","undefined","autoHideScrollbarDelay","_React$useState","useState","_React$useState2","_slicedToArray","trackerVisible","setTrackerVisible","isMouseOver","useRef","isTrackerDragging","_useTimeout","setVisibilityTimeout","set","clearVisibilityTimeout","clear","onTrackerDragStart","useCallback","current","onTrackerDragStop","queueTrackerVisibility","onTrackerMouseEnter","onTrackerMouseLeave","onTargetScroll"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\CustomScrollView\\useTrackerVisibility.ts"],"sourcesContent":["import * as React from 'react';\nimport { useTimeout } from '../../hooks/useTimeout';\n\n/**\n * Хук, который позволяет управлять видимостью ползунка скроллбара.\n * @param autoHideScrollbar - скрывать ли ползунок скроллбара\n * @param autoHideScrollbarDelay - через какое кол-во миллисекунд ползунок скроллбара скрывается\n * @returns Объект, содержащий параметры, которые позволяют управлять видимостью ползунка\n */\nexport const useTrackerVisibility = (\n  autoHideScrollbar = false,\n  autoHideScrollbarDelay = 500,\n): TrackerVisibilityProps => {\n  const [trackerVisible, setTrackerVisible] = React.useState(!autoHideScrollbar);\n  const isMouseOver = React.useRef(false);\n  const isTrackerDragging = React.useRef(false);\n\n  const { set: setVisibilityTimeout, clear: clearVisibilityTimeout } = useTimeout(\n    () => setTrackerVisible(false),\n    autoHideScrollbarDelay,\n  );\n\n  const onTrackerDragStart = React.useCallback(() => {\n    clearVisibilityTimeout();\n    setTrackerVisible(true);\n    isTrackerDragging.current = true;\n  }, [clearVisibilityTimeout]);\n\n  const onTrackerDragStop = React.useCallback(() => {\n    isTrackerDragging.current = false;\n    if (!isMouseOver.current) {\n      setVisibilityTimeout();\n    }\n  }, [setVisibilityTimeout, isMouseOver]);\n\n  /**\n   * Позволяет \"запланировать\" скрытие ползунка через delay миллисекунд. Если тайм-аут не успевает сработать, то каждый\n   * последующий вызов функции откладывает скрытие ползунка на delay миллисекунд\n   */\n  const queueTrackerVisibility = React.useCallback(() => {\n    if (isTrackerDragging.current) {\n      return;\n    }\n    setTrackerVisible(true);\n    setVisibilityTimeout();\n  }, [setVisibilityTimeout]);\n\n  const onTrackerMouseEnter = React.useCallback(() => {\n    clearVisibilityTimeout();\n    isMouseOver.current = true;\n    setTrackerVisible(true);\n  }, [clearVisibilityTimeout]);\n\n  const onTrackerMouseLeave = React.useCallback(() => {\n    queueTrackerVisibility();\n    isMouseOver.current = false;\n  }, [queueTrackerVisibility]);\n\n  const onTargetScroll = React.useCallback(() => {\n    queueTrackerVisibility();\n  }, [queueTrackerVisibility]);\n\n  return {\n    trackerVisible,\n    onTrackerDragStart,\n    onTrackerDragStop,\n    onTrackerMouseEnter,\n    onTrackerMouseLeave,\n    onTargetScroll,\n  };\n};\n\nexport interface TrackerOptionsProps {\n  /**\n   * Скрывать ли ползунок скроллбара\n   */\n  autoHideScrollbar?: boolean;\n  /**\n   * Через какое кол-во миллисекунд ползунок скроллбара скрывается\n   */\n  autoHideScrollbarDelay?: number;\n}\n\nexport interface TrackerVisibilityProps {\n  /**\n   * Отвечает за видимость ползунка\n   */\n  trackerVisible: boolean;\n  /**\n   * Функция для обработки события у блока со скроллом\n   */\n  onTargetScroll(this: void): void;\n  /**\n   * Функция для обработки начала drag event ползунка\n   */\n  onTrackerDragStart(this: void): void;\n  /**\n   * Функция для обработки окончания drag event ползунка\n   */\n  onTrackerDragStop(this: void): void;\n  /**\n   * Функция для обработки mouseLeave event ползунка\n   */\n  onTrackerMouseEnter(this: void): void;\n  /**\n   * Функция для обработки mouseEnter event ползунка\n   */\n  onTrackerMouseLeave(this: void): void;\n}\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,UAAU,QAAQ,wBAAwB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAA,EAGJ;EAAA,IAF3BC,iBAAiB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAAA,IACzBG,sBAAsB,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,GAAG;EAE5B,IAAAI,eAAA,GAA4CR,KAAK,CAACS,QAAQ,CAAC,CAACN,iBAAiB,CAAC;IAAAO,gBAAA,GAAAC,cAAA,CAAAH,eAAA;IAAvEI,cAAc,GAAAF,gBAAA;IAAEG,iBAAiB,GAAAH,gBAAA;EACxC,IAAMI,WAAW,GAAGd,KAAK,CAACe,MAAM,CAAC,KAAK,CAAC;EACvC,IAAMC,iBAAiB,GAAGhB,KAAK,CAACe,MAAM,CAAC,KAAK,CAAC;EAE7C,IAAAE,WAAA,GAAqEhB,UAAU,CAC7E;MAAA,OAAMY,iBAAiB,CAAC,KAAK,CAAC;IAAA,GAC9BN,sBAAsB,CACvB;IAHYW,oBAAoB,GAAAD,WAAA,CAAzBE,GAAG;IAA+BC,sBAAsB,GAAAH,WAAA,CAA7BI,KAAK;EAKxC,IAAMC,kBAAkB,GAAGtB,KAAK,CAACuB,WAAW,CAAC,YAAM;IACjDH,sBAAsB,EAAE;IACxBP,iBAAiB,CAAC,IAAI,CAAC;IACvBG,iBAAiB,CAACQ,OAAO,GAAG,IAAI;EAClC,CAAC,EAAE,CAACJ,sBAAsB,CAAC,CAAC;EAE5B,IAAMK,iBAAiB,GAAGzB,KAAK,CAACuB,WAAW,CAAC,YAAM;IAChDP,iBAAiB,CAACQ,OAAO,GAAG,KAAK;IACjC,IAAI,CAACV,WAAW,CAACU,OAAO,EAAE;MACxBN,oBAAoB,EAAE;IACxB;EACF,CAAC,EAAE,CAACA,oBAAoB,EAAEJ,WAAW,CAAC,CAAC;;EAEvC;AACF;AACA;AACA;EACE,IAAMY,sBAAsB,GAAG1B,KAAK,CAACuB,WAAW,CAAC,YAAM;IACrD,IAAIP,iBAAiB,CAACQ,OAAO,EAAE;MAC7B;IACF;IACAX,iBAAiB,CAAC,IAAI,CAAC;IACvBK,oBAAoB,EAAE;EACxB,CAAC,EAAE,CAACA,oBAAoB,CAAC,CAAC;EAE1B,IAAMS,mBAAmB,GAAG3B,KAAK,CAACuB,WAAW,CAAC,YAAM;IAClDH,sBAAsB,EAAE;IACxBN,WAAW,CAACU,OAAO,GAAG,IAAI;IAC1BX,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC,EAAE,CAACO,sBAAsB,CAAC,CAAC;EAE5B,IAAMQ,mBAAmB,GAAG5B,KAAK,CAACuB,WAAW,CAAC,YAAM;IAClDG,sBAAsB,EAAE;IACxBZ,WAAW,CAACU,OAAO,GAAG,KAAK;EAC7B,CAAC,EAAE,CAACE,sBAAsB,CAAC,CAAC;EAE5B,IAAMG,cAAc,GAAG7B,KAAK,CAACuB,WAAW,CAAC,YAAM;IAC7CG,sBAAsB,EAAE;EAC1B,CAAC,EAAE,CAACA,sBAAsB,CAAC,CAAC;EAE5B,OAAO;IACLd,cAAc,EAAdA,cAAc;IACdU,kBAAkB,EAAlBA,kBAAkB;IAClBG,iBAAiB,EAAjBA,iBAAiB;IACjBE,mBAAmB,EAAnBA,mBAAmB;IACnBC,mBAAmB,EAAnBA,mBAAmB;IACnBC,cAAc,EAAdA;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}