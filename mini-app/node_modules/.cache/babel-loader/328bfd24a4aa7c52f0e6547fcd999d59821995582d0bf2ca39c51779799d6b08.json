{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"activePanel\", \"history\", \"nav\", \"onTransition\", \"onSwipeBack\", \"onSwipeBackStart\", \"onSwipeBackCancel\", \"children\", \"className\"];\nimport * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { animationEvent } from '../../lib/supportEvents';\nimport { Platform } from '../../lib/platform';\nimport { Touch } from '../Touch/Touch';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { useSplitCol } from '../SplitCol/SplitCol';\nimport { canUseDOM, useDOM, blurActiveElement } from '../../lib/dom';\nimport { useScroll } from '../AppRoot/ScrollContext';\nimport { NavTransitionProvider } from '../NavTransitionContext/NavTransitionContext';\nimport { getNavId } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { swipeBackExcluded } from './utils';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nvar SWIPE_BACK_AREA = 70;\nvar SwipeBackResults;\n(function (SwipeBackResults) {\n  SwipeBackResults[SwipeBackResults[\"fail\"] = 1] = \"fail\";\n  SwipeBackResults[SwipeBackResults[\"success\"] = 2] = \"success\";\n})(SwipeBackResults || (SwipeBackResults = {}));\nexport var scrollsCache = {};\nvar warn = warnOnce('View');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/View\n */\nexport var View = function View(_ref) {\n  var activePanelProp = _ref.activePanel,\n    history = _ref.history,\n    nav = _ref.nav,\n    onTransition = _ref.onTransition,\n    onSwipeBack = _ref.onSwipeBack,\n    onSwipeBackStart = _ref.onSwipeBackStart,\n    onSwipeBackCancelProp = _ref.onSwipeBackCancel,\n    children = _ref.children,\n    className = _ref.className,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var scrolls = React.useRef(scrollsCache[getNavId({\n    nav: nav,\n    id: restProps.id\n  })] || {});\n  var afterTransition = React.useRef(noop);\n  React.useEffect(function () {\n    return function () {\n      var id = getNavId({\n        nav: nav,\n        id: restProps.id\n      });\n      if (id) {\n        scrollsCache[id] = scrolls.current;\n      }\n    };\n  });\n  var panelNodes = React.useRef({});\n  var _useDOM = useDOM(),\n    window = _useDOM.window,\n    document = _useDOM.document;\n  var scroll = useScroll();\n  var configProvider = useConfigProvider();\n  var splitCol = useSplitCol();\n  var platform = usePlatform();\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    animated = _React$useState2[0],\n    setAnimated = _React$useState2[1];\n  var _React$useState3 = React.useState([activePanelProp]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    visiblePanels = _React$useState4[0],\n    setVisiblePanels = _React$useState4[1];\n  var _React$useState5 = React.useState(activePanelProp),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    activePanel = _React$useState6[0],\n    setActivePanel = _React$useState6[1];\n  var _React$useState7 = React.useState(undefined),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    isBack = _React$useState8[0],\n    setIsBack = _React$useState8[1];\n  var _React$useState9 = React.useState(null),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    prevPanel = _React$useState10[0],\n    setPrevPanel = _React$useState10[1];\n  var _React$useState11 = React.useState(null),\n    _React$useState12 = _slicedToArray(_React$useState11, 2),\n    nextPanel = _React$useState12[0],\n    setNextPanel = _React$useState12[1];\n  var _React$useState13 = React.useState(false),\n    _React$useState14 = _slicedToArray(_React$useState13, 2),\n    swipingBack = _React$useState14[0],\n    setSwipingBack = _React$useState14[1];\n  var _React$useState15 = React.useState(false),\n    _React$useState16 = _slicedToArray(_React$useState15, 2),\n    swipeBackPrevented = _React$useState16[0],\n    setSwipeBackPrevented = _React$useState16[1];\n  var _React$useState17 = React.useState(0),\n    _React$useState18 = _slicedToArray(_React$useState17, 2),\n    swipeBackStartX = _React$useState18[0],\n    setSwipeBackStartX = _React$useState18[1];\n  var _React$useState19 = React.useState(0),\n    _React$useState20 = _slicedToArray(_React$useState19, 2),\n    swipeBackShift = _React$useState20[0],\n    setSwipeBackShift = _React$useState20[1];\n  var _React$useState21 = React.useState(null),\n    _React$useState22 = _slicedToArray(_React$useState21, 2),\n    swipeBackNextPanel = _React$useState22[0],\n    setSwipeBackNextPanel = _React$useState22[1];\n  var _React$useState23 = React.useState(null),\n    _React$useState24 = _slicedToArray(_React$useState23, 2),\n    swipeBackPrevPanel = _React$useState24[0],\n    setSwipeBackPrevPanel = _React$useState24[1];\n  var _React$useState25 = React.useState(null),\n    _React$useState26 = _slicedToArray(_React$useState25, 2),\n    swipeBackResult = _React$useState26[0],\n    setSwipeBackResult = _React$useState26[1];\n  var _React$useState27 = React.useState(false),\n    _React$useState28 = _slicedToArray(_React$useState27, 2),\n    browserSwipe = _React$useState28[0],\n    setBrowserSwipe = _React$useState28[1];\n  var prevActivePanel = usePrevious(activePanelProp);\n  var prevSwipingBack = usePrevious(swipingBack);\n  var prevBrowserSwipe = usePrevious(browserSwipe);\n  var prevSwipeBackResult = usePrevious(swipeBackResult);\n  var prevSwipeBackPrevPanel = usePrevious(swipeBackPrevPanel);\n  var prevOnTransition = usePrevious(onTransition);\n  var panels = React.Children.toArray(children).filter(function (panel) {\n    var panelId = getNavId(panel.props, warn);\n    return panelId !== undefined && visiblePanels.includes(panelId) || panelId === swipeBackPrevPanel || panelId === swipeBackNextPanel;\n  });\n  var disableAnimation = (configProvider === null || configProvider === void 0 ? void 0 : configProvider.transitionMotionEnabled) === false || !(splitCol !== null && splitCol !== void 0 && splitCol.animate) || platform === Platform.VKCOM;\n  var pickPanel = function pickPanel(id) {\n    if (id === null) {\n      return null;\n    }\n    return panelNodes.current[id];\n  };\n  var flushTransition = React.useCallback(function (prevPanel, isBackTransition) {\n    if (isBackTransition) {\n      scrolls.current[prevPanel] = 0;\n    }\n    setPrevPanel(null);\n    setNextPanel(null);\n    setVisiblePanels([activePanelProp]);\n    setActivePanel(activePanelProp);\n    setAnimated(false);\n    setIsBack(undefined);\n    afterTransition.current = function () {\n      scroll === null || scroll === void 0 ? void 0 : scroll.scrollTo(0, isBackTransition ? scrolls.current[activePanelProp] : 0);\n      onTransition && onTransition({\n        isBack: isBackTransition,\n        from: prevPanel,\n        to: activePanelProp\n      });\n    };\n  }, [activePanelProp, onTransition, scroll]);\n  useIsomorphicLayoutEffect(function () {\n    afterTransition.current();\n    afterTransition.current = noop;\n  }, [afterTransition.current]);\n  var transitionEndHandler = React.useCallback(function (e) {\n    if ((!e || ['vkui-animation-ios-next-forward', 'vkui-animation-ios-prev-back', 'vkui-animation-view-next-forward', 'vkui-animation-view-prev-back'].includes(e.animationName)) && prevPanel !== null) {\n      flushTransition(prevPanel, Boolean(isBack));\n    }\n  }, [flushTransition, isBack, prevPanel]);\n  var _useWaitTransitionFin = useWaitTransitionFinish(),\n    waitTransitionFinish = _useWaitTransitionFin.waitTransitionFinish;\n  var animationFinishTimeout = useTimeout(transitionEndHandler, platform === Platform.IOS ? 600 : 300);\n  var onSwipeBackSuccess = React.useCallback(function () {\n    onSwipeBack && onSwipeBack();\n  }, [onSwipeBack]);\n  var onSwipeBackCancel = React.useCallback(function () {\n    onSwipeBackCancelProp && onSwipeBackCancelProp();\n    setSwipeBackPrevPanel(null);\n    setSwipeBackNextPanel(null);\n    setSwipingBack(false);\n    setSwipeBackResult(null);\n    setSwipeBackStartX(0);\n    setSwipeBackShift(0);\n  }, [onSwipeBackCancelProp]);\n  var swipingBackTransitionEndHandler = React.useCallback(function (e) {\n    // indexOf because of vendor prefixes in old browsers\n    if (!e || e !== null && e !== void 0 && e.propertyName.includes('transform') && (e === null || e === void 0 ? void 0 : e.target) === pickPanel(swipeBackNextPanel)) {\n      switch (swipeBackResult) {\n        case SwipeBackResults.fail:\n          onSwipeBackCancel();\n          break;\n        case SwipeBackResults.success:\n          onSwipeBackSuccess();\n      }\n    }\n  }, [onSwipeBackCancel, onSwipeBackSuccess, swipeBackNextPanel, swipeBackResult]);\n  var onMoveX = function onMoveX(event) {\n    if (platform !== Platform.IOS || swipeBackPrevented || swipeBackExcluded(event) || disableAnimation) {\n      return;\n    }\n    if (!(configProvider !== null && configProvider !== void 0 && configProvider.isWebView)) {\n      if ((event.startX <= SWIPE_BACK_AREA || event.startX >= window.innerWidth - SWIPE_BACK_AREA) && !browserSwipe) {\n        setBrowserSwipe(true);\n      }\n      return;\n    }\n    if (!onSwipeBack || animated && event.startX <= SWIPE_BACK_AREA) {\n      return;\n    }\n    if (!swipingBack && event.startX <= SWIPE_BACK_AREA && history && history.length > 1) {\n      // Начался свайп назад\n      if (onSwipeBackStart) {\n        var payload = onSwipeBackStart(activePanel);\n        if (payload === 'prevent') {\n          setSwipeBackPrevented(true);\n          return;\n        }\n      }\n      if (activePanel !== null) {\n        // Note: вызываем закрытие клавиатуры. В iOS это нативное поведение при свайпе.\n        blurActiveElement(document);\n        scrolls.current[activePanel] = scroll === null || scroll === void 0 ? void 0 : scroll.getScroll().y;\n      }\n      setSwipingBack(true);\n      setSwipeBackStartX(event.startX);\n      setSwipeBackPrevPanel(activePanel);\n      setSwipeBackNextPanel(history.slice(-2)[0]);\n    }\n    if (swipingBack) {\n      var _swipeBackShift = 0;\n      if (event.shiftX < 0) {\n        _swipeBackShift = 0;\n      } else if (event.shiftX > window.innerWidth - swipeBackStartX) {\n        _swipeBackShift = window.innerWidth;\n      } else {\n        _swipeBackShift = event.shiftX;\n      }\n      setSwipeBackShift(_swipeBackShift);\n    }\n  };\n  var onEnd = React.useCallback(function (event) {\n    if (swipingBack) {\n      var _innerWidth;\n      var speed = swipeBackShift / event.duration * 1000;\n      if (swipeBackShift === 0) {\n        onSwipeBackCancel();\n      } else if (swipeBackShift >= ((_innerWidth = window.innerWidth) !== null && _innerWidth !== void 0 ? _innerWidth : 0)) {\n        onSwipeBackSuccess();\n      } else if (speed > 250 || swipeBackStartX + swipeBackShift > window.innerWidth / 2) {\n        setSwipeBackResult(SwipeBackResults.success);\n      } else {\n        setSwipeBackResult(SwipeBackResults.fail);\n      }\n    }\n    if (swipeBackPrevented) {\n      setSwipeBackPrevented(false);\n    }\n  }, [onSwipeBackCancel, onSwipeBackSuccess, swipeBackShift, swipeBackStartX, swipingBack, swipeBackPrevented, window]);\n  var calcPanelSwipeStyles = function calcPanelSwipeStyles(panelId) {\n    if (!canUseDOM || !window) {\n      return {};\n    }\n    var isPrev = panelId === swipeBackPrevPanel;\n    var isNext = panelId === swipeBackNextPanel;\n    if (!isPrev && !isNext || swipeBackResult) {\n      return {};\n    }\n    var prevPanelTranslate = \"\".concat(swipeBackShift, \"px\");\n    var nextPanelTranslate = \"\".concat(-50 + swipeBackShift * 100 / window.innerWidth / 2, \"%\");\n    var prevPanelShadow = 0.3 * (window.innerWidth - swipeBackShift) / window.innerWidth;\n    if (swipeBackResult) {\n      return isPrev ? {\n        boxShadow: \"-2px 0 12px rgba(0, 0, 0, \".concat(prevPanelShadow, \")\")\n      } : {};\n    }\n    if (isNext) {\n      return {\n        transform: \"translate3d(\".concat(nextPanelTranslate, \", 0, 0)\"),\n        WebkitTransform: \"translate3d(\".concat(nextPanelTranslate, \", 0, 0)\")\n      };\n    }\n    if (isPrev) {\n      return {\n        transform: \"translate3d(\".concat(prevPanelTranslate, \", 0, 0)\"),\n        WebkitTransform: \"translate3d(\".concat(prevPanelTranslate, \", 0, 0)\"),\n        boxShadow: \"-2px 0 12px rgba(0, 0, 0, \".concat(prevPanelShadow, \")\")\n      };\n    }\n    return {};\n  };\n  React.useEffect(function () {\n    // Нужен переход\n    if (prevActivePanel && prevActivePanel !== activePanelProp && !prevSwipingBack && !prevBrowserSwipe) {\n      var firstLayerId = React.Children.toArray(children).map(function (panel) {\n        return getNavId(panel.props, warn);\n      }).find(function (id) {\n        return id === prevActivePanel || id === activePanelProp;\n      });\n      var isBackTransition = firstLayerId === activePanelProp;\n      scrolls.current[prevActivePanel] = scroll === null || scroll === void 0 ? void 0 : scroll.getScroll().y;\n      if (disableAnimation) {\n        flushTransition(prevActivePanel, isBackTransition);\n      } else {\n        blurActiveElement(document);\n        setVisiblePanels([prevActivePanel, activePanelProp]);\n        setPrevPanel(prevActivePanel);\n        setNextPanel(activePanelProp);\n        setActivePanel(null);\n        setAnimated(true);\n        setIsBack(isBackTransition);\n\n        // Фолбек анимации перехода\n        if (!animationEvent.supported) {\n          animationFinishTimeout.set();\n        }\n      }\n    }\n\n    // Закончилась анимация свайпа назад\n    if (prevActivePanel && prevActivePanel !== activePanelProp && prevSwipingBack) {\n      var _nextPanel = activePanelProp;\n      var _prevPanel = prevActivePanel;\n      if (prevSwipeBackPrevPanel) {\n        scrolls.current[prevSwipeBackPrevPanel] = 0;\n      }\n      setSwipeBackPrevPanel(null);\n      setSwipeBackNextPanel(null);\n      setSwipingBack(false);\n      setSwipeBackResult(null);\n      setSwipeBackStartX(0);\n      setSwipeBackShift(0);\n      setActivePanel(_nextPanel);\n      setVisiblePanels([_nextPanel]);\n      afterTransition.current = function () {\n        if (_nextPanel !== null) {\n          scroll === null || scroll === void 0 ? void 0 : scroll.scrollTo(0, scrolls.current[_nextPanel]);\n        }\n        prevOnTransition && prevOnTransition({\n          isBack: true,\n          from: _prevPanel,\n          to: _nextPanel\n        });\n      };\n    }\n\n    // Началась анимация завершения свайпа назад.\n    if (!prevSwipeBackResult && swipeBackResult) {\n      waitTransitionFinish(pickPanel(swipeBackNextPanel), swipingBackTransitionEndHandler, platform === Platform.IOS ? 600 : 300);\n    }\n\n    // Если свайп назад отменился (когда пользователь недостаточно сильно свайпнул)\n    if (prevSwipeBackResult === SwipeBackResults.fail && !swipeBackResult && activePanel !== null) {\n      scroll === null || scroll === void 0 ? void 0 : scroll.scrollTo(0, scrolls.current[activePanel]);\n    }\n\n    // Закончился Safari свайп\n    if (prevActivePanel !== activePanelProp && browserSwipe) {\n      setBrowserSwipe(false);\n      setNextPanel(null);\n      setPrevPanel(null);\n      setAnimated(false);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n    }\n  }, [activePanelProp, activePanel, animationFinishTimeout, browserSwipe, children, disableAnimation, document, flushTransition, onSwipeBackStart, panels, platform, prevActivePanel, prevBrowserSwipe, prevOnTransition, prevSwipeBackPrevPanel, prevSwipeBackResult, prevSwipingBack, scroll, swipeBackNextPanel, swipeBackResult, swipingBack, swipingBackTransitionEndHandler, waitTransitionFinish]);\n  return /*#__PURE__*/React.createElement(Touch, _extends({\n    Component: \"section\"\n  }, restProps, {\n    className: classNames(\"vkuiView\", platform === Platform.IOS && \"vkuiView--ios\", !disableAnimation && animated && \"vkuiView--animated\", !disableAnimation && swipingBack && \"vkuiView--swiping-back\", disableAnimation && \"vkuiView--no-motion\", className),\n    onMoveX: onMoveX,\n    onEnd: onEnd\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiView__panels\"\n  }, panels.map(function (panel) {\n    var _scrolls$current$pane;\n    var panelId = getNavId(panel.props, warn);\n    var isPrev = panelId === prevPanel || panelId === swipeBackPrevPanel;\n    var isTransitionTarget = animated && panelId === (isBack ? prevPanel : nextPanel);\n    var compensateScroll = isPrev || panelId === swipeBackNextPanel || panelId === nextPanel && isBack;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"vkuiView__panel\", panelId === activePanel && \"vkuiView__panel--active\", panelId === prevPanel && \"vkuiView__panel--prev\", panelId === nextPanel && \"vkuiView__panel--next\", panelId === swipeBackPrevPanel && \"vkuiView__panel--swipe-back-prev\", panelId === swipeBackNextPanel && \"vkuiView__panel--swipe-back-next\", swipeBackResult === SwipeBackResults.success && \"vkuiView__panel--swipe-back-success\", swipeBackResult === SwipeBackResults.fail && \"vkuiView__panel--swipe-back-failed\"),\n      onAnimationEnd: isTransitionTarget ? transitionEndHandler : undefined,\n      ref: function ref(el) {\n        return panelId !== undefined && (panelNodes.current[panelId] = el);\n      },\n      style: calcPanelSwipeStyles(panelId),\n      key: panelId\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"vkuiView__panel-in\",\n      style: {\n        marginTop: compensateScroll ? -((_scrolls$current$pane = scrolls.current[panelId]) !== null && _scrolls$current$pane !== void 0 ? _scrolls$current$pane : 0) : undefined\n      }\n    }, /*#__PURE__*/React.createElement(NavTransitionProvider, {\n      entering: panelId === nextPanel || panelId === swipeBackNextPanel\n    }, panel)));\n  })));\n};","map":{"version":3,"names":["React","classNames","noop","animationEvent","Platform","Touch","useConfigProvider","useSplitCol","canUseDOM","useDOM","blurActiveElement","useScroll","NavTransitionProvider","getNavId","warnOnce","usePlatform","swipeBackExcluded","useWaitTransitionFinish","useTimeout","usePrevious","useIsomorphicLayoutEffect","SWIPE_BACK_AREA","SwipeBackResults","scrollsCache","warn","View","_ref","activePanelProp","activePanel","history","nav","onTransition","onSwipeBack","onSwipeBackStart","onSwipeBackCancelProp","onSwipeBackCancel","children","className","restProps","_objectWithoutProperties","_excluded","scrolls","useRef","id","afterTransition","useEffect","current","panelNodes","_useDOM","window","document","scroll","configProvider","splitCol","platform","_React$useState","useState","_React$useState2","_slicedToArray","animated","setAnimated","_React$useState3","_React$useState4","visiblePanels","setVisiblePanels","_React$useState5","_React$useState6","setActivePanel","_React$useState7","undefined","_React$useState8","isBack","setIsBack","_React$useState9","_React$useState10","prevPanel","setPrevPanel","_React$useState11","_React$useState12","nextPanel","setNextPanel","_React$useState13","_React$useState14","swipingBack","setSwipingBack","_React$useState15","_React$useState16","swipeBackPrevented","setSwipeBackPrevented","_React$useState17","_React$useState18","swipeBackStartX","setSwipeBackStartX","_React$useState19","_React$useState20","swipeBackShift","setSwipeBackShift","_React$useState21","_React$useState22","swipeBackNextPanel","setSwipeBackNextPanel","_React$useState23","_React$useState24","swipeBackPrevPanel","setSwipeBackPrevPanel","_React$useState25","_React$useState26","swipeBackResult","setSwipeBackResult","_React$useState27","_React$useState28","browserSwipe","setBrowserSwipe","prevActivePanel","prevSwipingBack","prevBrowserSwipe","prevSwipeBackResult","prevSwipeBackPrevPanel","prevOnTransition","panels","Children","toArray","filter","panel","panelId","props","includes","disableAnimation","transitionMotionEnabled","animate","VKCOM","pickPanel","flushTransition","useCallback","isBackTransition","scrollTo","from","to","transitionEndHandler","e","animationName","Boolean","_useWaitTransitionFin","waitTransitionFinish","animationFinishTimeout","IOS","onSwipeBackSuccess","swipingBackTransitionEndHandler","propertyName","target","fail","success","onMoveX","event","isWebView","startX","innerWidth","length","payload","getScroll","y","slice","_swipeBackShift","shiftX","onEnd","_innerWidth","speed","duration","calcPanelSwipeStyles","isPrev","isNext","prevPanelTranslate","concat","nextPanelTranslate","prevPanelShadow","boxShadow","transform","WebkitTransform","firstLayerId","map","find","supported","set","_nextPanel","_prevPanel","createElement","_extends","Component","_scrolls$current$pane","isTransitionTarget","compensateScroll","onAnimationEnd","ref","el","style","key","marginTop","entering"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\View\\View.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { animationEvent } from '../../lib/supportEvents';\nimport { Platform } from '../../lib/platform';\nimport { Touch, TouchEvent } from '../Touch/Touch';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { useSplitCol } from '../SplitCol/SplitCol';\nimport { canUseDOM, useDOM, blurActiveElement } from '../../lib/dom';\nimport { useScroll } from '../AppRoot/ScrollContext';\nimport { NavTransitionProvider } from '../NavTransitionContext/NavTransitionContext';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { swipeBackExcluded } from './utils';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport styles from './View.module.css';\nimport iosStyles from './ViewIOS.module.css';\n\nconst SWIPE_BACK_AREA = 70;\n\nenum SwipeBackResults {\n  fail = 1,\n  success,\n}\n\ninterface Scrolls {\n  [index: string]: number | undefined;\n}\n\ninterface ViewsScrolls {\n  [index: string]: Scrolls;\n}\n\nexport let scrollsCache: ViewsScrolls = {};\n\nexport interface ViewProps extends React.HTMLAttributes<HTMLElement>, NavIdProps {\n  activePanel: string;\n  onTransition?(params: { isBack: boolean; from: string; to: string }): void;\n  /**\n   * callback свайпа назад\n   */\n  onSwipeBack?(): void;\n  /**\n   * callback начала анимации свайпа назад.\n   *\n   * Чтобы остановить свайп назад, возвращайте `\"prevent\"`.\n   */\n  onSwipeBackStart?(activePanel: string | null): void | 'prevent';\n  /**\n   * callback завершения анимации отмененного пользователем свайпа\n   */\n  onSwipeBackCancel?(): void;\n  history?: string[];\n}\n\nexport interface ViewState {\n  animated: boolean;\n\n  visiblePanels: string[];\n  activePanel: string | null;\n  isBack: boolean | undefined;\n  prevPanel: string | null;\n  nextPanel: string | null;\n\n  swipingBack: boolean;\n  swipeBackStartX: number;\n  swipeBackShift: number;\n  swipeBackNextPanel: string | null;\n  swipeBackPrevPanel: string | null;\n  swipeBackResult: SwipeBackResults | null;\n\n  browserSwipe: boolean;\n}\n\nconst warn = warnOnce('View');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/View\n */\nexport const View = ({\n  activePanel: activePanelProp,\n  history,\n  nav,\n  onTransition,\n  onSwipeBack,\n  onSwipeBackStart,\n  onSwipeBackCancel: onSwipeBackCancelProp,\n  children,\n  className,\n  ...restProps\n}: ViewProps) => {\n  const scrolls = React.useRef(scrollsCache[getNavId({ nav, id: restProps.id }) as string] || {});\n  const afterTransition = React.useRef(noop);\n\n  React.useEffect(() => () => {\n    const id = getNavId({ nav, id: restProps.id });\n    if (id) {\n      scrollsCache[id] = scrolls.current;\n    }\n  });\n\n  const panelNodes = React.useRef<{ [id: string]: HTMLDivElement | null }>({});\n\n  const { window, document } = useDOM();\n  const scroll = useScroll();\n  const configProvider = useConfigProvider();\n  const splitCol = useSplitCol();\n  const platform = usePlatform();\n\n  const [animated, setAnimated] = React.useState(false);\n\n  const [visiblePanels, setVisiblePanels] = React.useState([activePanelProp]);\n  const [activePanel, setActivePanel] = React.useState<string | null>(activePanelProp);\n  const [isBack, setIsBack] = React.useState<boolean | undefined>(undefined);\n  const [prevPanel, setPrevPanel] = React.useState<string | null>(null);\n  const [nextPanel, setNextPanel] = React.useState<string | null>(null);\n\n  const [swipingBack, setSwipingBack] = React.useState<boolean>(false);\n  const [swipeBackPrevented, setSwipeBackPrevented] = React.useState<boolean>(false);\n  const [swipeBackStartX, setSwipeBackStartX] = React.useState<number>(0);\n  const [swipeBackShift, setSwipeBackShift] = React.useState<number>(0);\n  const [swipeBackNextPanel, setSwipeBackNextPanel] = React.useState<string | null>(null);\n  const [swipeBackPrevPanel, setSwipeBackPrevPanel] = React.useState<string | null>(null);\n  const [swipeBackResult, setSwipeBackResult] = React.useState<SwipeBackResults | null>(null);\n\n  const [browserSwipe, setBrowserSwipe] = React.useState(false);\n\n  const prevActivePanel = usePrevious(activePanelProp);\n  const prevSwipingBack = usePrevious(swipingBack);\n  const prevBrowserSwipe = usePrevious(browserSwipe);\n  const prevSwipeBackResult = usePrevious(swipeBackResult);\n  const prevSwipeBackPrevPanel = usePrevious(swipeBackPrevPanel);\n  const prevOnTransition = usePrevious(onTransition);\n\n  const panels = (React.Children.toArray(children) as React.ReactElement[]).filter(\n    (panel: React.ReactElement) => {\n      const panelId = getNavId(panel.props, warn);\n\n      return (\n        (panelId !== undefined && visiblePanels.includes(panelId)) ||\n        panelId === swipeBackPrevPanel ||\n        panelId === swipeBackNextPanel\n      );\n    },\n  );\n\n  const disableAnimation =\n    configProvider?.transitionMotionEnabled === false ||\n    !splitCol?.animate ||\n    platform === Platform.VKCOM;\n\n  const pickPanel = (id: string | null) => {\n    if (id === null) {\n      return null;\n    }\n    return panelNodes.current[id];\n  };\n\n  const flushTransition = React.useCallback(\n    (prevPanel: string, isBackTransition: boolean) => {\n      if (isBackTransition) {\n        scrolls.current[prevPanel] = 0;\n      }\n      setPrevPanel(null);\n      setNextPanel(null);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n      setAnimated(false);\n      setIsBack(undefined);\n\n      afterTransition.current = () => {\n        scroll?.scrollTo(0, isBackTransition ? scrolls.current[activePanelProp] : 0);\n        onTransition &&\n          onTransition({\n            isBack: isBackTransition,\n            from: prevPanel,\n            to: activePanelProp,\n          });\n      };\n    },\n    [activePanelProp, onTransition, scroll],\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    afterTransition.current();\n    afterTransition.current = noop;\n  }, [afterTransition.current]);\n\n  const transitionEndHandler = React.useCallback(\n    (e?: React.AnimationEvent): void => {\n      if (\n        (!e ||\n          [\n            'vkui-animation-ios-next-forward',\n            'vkui-animation-ios-prev-back',\n            'vkui-animation-view-next-forward',\n            'vkui-animation-view-prev-back',\n          ].includes(e.animationName)) &&\n        prevPanel !== null\n      ) {\n        flushTransition(prevPanel, Boolean(isBack));\n      }\n    },\n    [flushTransition, isBack, prevPanel],\n  );\n\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n  const animationFinishTimeout = useTimeout(\n    transitionEndHandler,\n    platform === Platform.IOS ? 600 : 300,\n  );\n\n  const onSwipeBackSuccess = React.useCallback(() => {\n    onSwipeBack && onSwipeBack();\n  }, [onSwipeBack]);\n\n  const onSwipeBackCancel = React.useCallback(() => {\n    onSwipeBackCancelProp && onSwipeBackCancelProp();\n    setSwipeBackPrevPanel(null);\n    setSwipeBackNextPanel(null);\n    setSwipingBack(false);\n    setSwipeBackResult(null);\n    setSwipeBackStartX(0);\n    setSwipeBackShift(0);\n  }, [onSwipeBackCancelProp]);\n\n  const swipingBackTransitionEndHandler = React.useCallback(\n    (e?: TransitionEvent): void => {\n      // indexOf because of vendor prefixes in old browsers\n      if (\n        !e ||\n        (e?.propertyName.includes('transform') && e?.target === pickPanel(swipeBackNextPanel))\n      ) {\n        switch (swipeBackResult) {\n          case SwipeBackResults.fail:\n            onSwipeBackCancel();\n            break;\n          case SwipeBackResults.success:\n            onSwipeBackSuccess();\n        }\n      }\n    },\n    [onSwipeBackCancel, onSwipeBackSuccess, swipeBackNextPanel, swipeBackResult],\n  );\n\n  const onMoveX = (event: TouchEvent): void => {\n    if (\n      platform !== Platform.IOS ||\n      swipeBackPrevented ||\n      swipeBackExcluded(event) ||\n      disableAnimation\n    ) {\n      return;\n    }\n\n    if (!configProvider?.isWebView) {\n      if (\n        (event.startX <= SWIPE_BACK_AREA || event.startX >= window!.innerWidth - SWIPE_BACK_AREA) &&\n        !browserSwipe\n      ) {\n        setBrowserSwipe(true);\n      }\n\n      return;\n    }\n\n    if (!onSwipeBack || (animated && event.startX <= SWIPE_BACK_AREA)) {\n      return;\n    }\n\n    if (!swipingBack && event.startX <= SWIPE_BACK_AREA && history && history.length > 1) {\n      // Начался свайп назад\n      if (onSwipeBackStart) {\n        const payload = onSwipeBackStart(activePanel);\n        if (payload === 'prevent') {\n          setSwipeBackPrevented(true);\n          return;\n        }\n      }\n\n      if (activePanel !== null) {\n        // Note: вызываем закрытие клавиатуры. В iOS это нативное поведение при свайпе.\n        blurActiveElement(document);\n        scrolls.current[activePanel] = scroll?.getScroll().y;\n      }\n\n      setSwipingBack(true);\n      setSwipeBackStartX(event.startX);\n      setSwipeBackPrevPanel(activePanel);\n      setSwipeBackNextPanel(history.slice(-2)[0]);\n    }\n\n    if (swipingBack) {\n      let swipeBackShift = 0;\n      if (event.shiftX < 0) {\n        swipeBackShift = 0;\n      } else if (event.shiftX > window!.innerWidth - swipeBackStartX) {\n        swipeBackShift = window!.innerWidth;\n      } else {\n        swipeBackShift = event.shiftX;\n      }\n      setSwipeBackShift(swipeBackShift);\n    }\n  };\n\n  const onEnd = React.useCallback(\n    (event: TouchEvent): void => {\n      if (swipingBack) {\n        const speed = (swipeBackShift / event.duration) * 1000;\n        if (swipeBackShift === 0) {\n          onSwipeBackCancel();\n        } else if (swipeBackShift >= (window!.innerWidth ?? 0)) {\n          onSwipeBackSuccess();\n        } else if (speed > 250 || swipeBackStartX + swipeBackShift > window!.innerWidth / 2) {\n          setSwipeBackResult(SwipeBackResults.success);\n        } else {\n          setSwipeBackResult(SwipeBackResults.fail);\n        }\n      }\n      if (swipeBackPrevented) {\n        setSwipeBackPrevented(false);\n      }\n    },\n    [\n      onSwipeBackCancel,\n      onSwipeBackSuccess,\n      swipeBackShift,\n      swipeBackStartX,\n      swipingBack,\n      swipeBackPrevented,\n      window,\n    ],\n  );\n\n  const calcPanelSwipeStyles = (panelId: string | undefined): React.CSSProperties => {\n    if (!canUseDOM || !window) {\n      return {};\n    }\n\n    const isPrev = panelId === swipeBackPrevPanel;\n    const isNext = panelId === swipeBackNextPanel;\n\n    if ((!isPrev && !isNext) || swipeBackResult) {\n      return {};\n    }\n\n    let prevPanelTranslate = `${swipeBackShift}px`;\n    let nextPanelTranslate = `${-50 + (swipeBackShift * 100) / window.innerWidth / 2}%`;\n    let prevPanelShadow = (0.3 * (window.innerWidth - swipeBackShift)) / window.innerWidth;\n\n    if (swipeBackResult) {\n      return isPrev ? { boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})` } : {};\n    }\n\n    if (isNext) {\n      return {\n        transform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n      };\n    }\n    if (isPrev) {\n      return {\n        transform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})`,\n      };\n    }\n\n    return {};\n  };\n\n  React.useEffect(() => {\n    // Нужен переход\n    if (\n      prevActivePanel &&\n      prevActivePanel !== activePanelProp &&\n      !prevSwipingBack &&\n      !prevBrowserSwipe\n    ) {\n      const firstLayerId = (React.Children.toArray(children) as React.ReactElement[])\n        .map((panel) => getNavId(panel.props, warn))\n        .find((id) => id === prevActivePanel || id === activePanelProp);\n\n      const isBackTransition = firstLayerId === activePanelProp;\n      scrolls.current[prevActivePanel] = scroll?.getScroll().y;\n\n      if (disableAnimation) {\n        flushTransition(prevActivePanel, isBackTransition);\n      } else {\n        blurActiveElement(document);\n\n        setVisiblePanels([prevActivePanel, activePanelProp]);\n        setPrevPanel(prevActivePanel);\n        setNextPanel(activePanelProp);\n        setActivePanel(null);\n        setAnimated(true);\n        setIsBack(isBackTransition);\n\n        // Фолбек анимации перехода\n        if (!animationEvent.supported) {\n          animationFinishTimeout.set();\n        }\n      }\n    }\n\n    // Закончилась анимация свайпа назад\n    if (prevActivePanel && prevActivePanel !== activePanelProp && prevSwipingBack) {\n      const nextPanel = activePanelProp;\n      const prevPanel = prevActivePanel;\n      if (prevSwipeBackPrevPanel) {\n        scrolls.current[prevSwipeBackPrevPanel] = 0;\n      }\n\n      setSwipeBackPrevPanel(null);\n      setSwipeBackNextPanel(null);\n      setSwipingBack(false);\n      setSwipeBackResult(null);\n      setSwipeBackStartX(0);\n      setSwipeBackShift(0);\n      setActivePanel(nextPanel);\n      setVisiblePanels([nextPanel]);\n\n      afterTransition.current = () => {\n        if (nextPanel !== null) {\n          scroll?.scrollTo(0, scrolls.current[nextPanel]);\n        }\n        prevOnTransition &&\n          prevOnTransition({\n            isBack: true,\n            from: prevPanel,\n            to: nextPanel,\n          });\n      };\n    }\n\n    // Началась анимация завершения свайпа назад.\n    if (!prevSwipeBackResult && swipeBackResult) {\n      waitTransitionFinish(\n        pickPanel(swipeBackNextPanel),\n        swipingBackTransitionEndHandler,\n        platform === Platform.IOS ? 600 : 300,\n      );\n    }\n\n    // Если свайп назад отменился (когда пользователь недостаточно сильно свайпнул)\n    if (prevSwipeBackResult === SwipeBackResults.fail && !swipeBackResult && activePanel !== null) {\n      scroll?.scrollTo(0, scrolls.current[activePanel]);\n    }\n\n    // Закончился Safari свайп\n    if (prevActivePanel !== activePanelProp && browserSwipe) {\n      setBrowserSwipe(false);\n      setNextPanel(null);\n      setPrevPanel(null);\n      setAnimated(false);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n    }\n  }, [\n    activePanelProp,\n    activePanel,\n    animationFinishTimeout,\n    browserSwipe,\n    children,\n    disableAnimation,\n    document,\n    flushTransition,\n    onSwipeBackStart,\n    panels,\n    platform,\n    prevActivePanel,\n    prevBrowserSwipe,\n    prevOnTransition,\n    prevSwipeBackPrevPanel,\n    prevSwipeBackResult,\n    prevSwipingBack,\n    scroll,\n    swipeBackNextPanel,\n    swipeBackResult,\n    swipingBack,\n    swipingBackTransitionEndHandler,\n    waitTransitionFinish,\n  ]);\n\n  return (\n    <Touch\n      Component=\"section\"\n      {...restProps}\n      className={classNames(\n        styles['View'],\n        platform === Platform.IOS && iosStyles['View--ios'],\n        !disableAnimation && animated && styles['View--animated'],\n        !disableAnimation && swipingBack && styles['View--swiping-back'],\n        disableAnimation && styles['View--no-motion'],\n        className,\n      )}\n      onMoveX={onMoveX}\n      onEnd={onEnd}\n    >\n      <div className={styles['View__panels']}>\n        {panels.map((panel: React.ReactElement) => {\n          const panelId = getNavId(panel.props, warn);\n          const isPrev = panelId === prevPanel || panelId === swipeBackPrevPanel;\n          const isTransitionTarget = animated && panelId === (isBack ? prevPanel : nextPanel);\n          const compensateScroll =\n            isPrev || panelId === swipeBackNextPanel || (panelId === nextPanel && isBack);\n\n          return (\n            <div\n              className={classNames(\n                styles['View__panel'],\n                panelId === activePanel && iosStyles['View__panel--active'],\n                panelId === prevPanel && styles['View__panel--prev'],\n                panelId === nextPanel && styles['View__panel--next'],\n                panelId === swipeBackPrevPanel && iosStyles['View__panel--swipe-back-prev'],\n                panelId === swipeBackNextPanel && iosStyles['View__panel--swipe-back-next'],\n                swipeBackResult === SwipeBackResults.success &&\n                  iosStyles['View__panel--swipe-back-success'],\n                swipeBackResult === SwipeBackResults.fail &&\n                  iosStyles['View__panel--swipe-back-failed'],\n              )}\n              onAnimationEnd={isTransitionTarget ? transitionEndHandler : undefined}\n              ref={(el) => panelId !== undefined && (panelNodes.current[panelId] = el)}\n              style={calcPanelSwipeStyles(panelId)}\n              key={panelId}\n            >\n              <div\n                className={styles['View__panel-in']}\n                style={{\n                  marginTop: compensateScroll ? -(scrolls.current[panelId] ?? 0) : undefined,\n                }}\n              >\n                <NavTransitionProvider\n                  entering={panelId === nextPanel || panelId === swipeBackNextPanel}\n                >\n                  {panel}\n                </NavTransitionProvider>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </Touch>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}