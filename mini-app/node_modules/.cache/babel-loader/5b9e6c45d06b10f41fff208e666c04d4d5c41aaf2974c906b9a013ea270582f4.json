{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport { subMonths, addMonths, isSameDay, isBefore, endOfDay, isAfter, startOfDay } from '../lib/date';\nexport function useCalendar(_ref) {\n  var _ref2;\n  var value = _ref.value,\n    disablePast = _ref.disablePast,\n    disableFuture = _ref.disableFuture,\n    shouldDisableDate = _ref.shouldDisableDate,\n    onHeaderChange = _ref.onHeaderChange,\n    onNextMonth = _ref.onNextMonth,\n    onPrevMonth = _ref.onPrevMonth;\n  var _React$useState = React.useState((_ref2 = Array.isArray(value) ? value[0] : value) !== null && _ref2 !== void 0 ? _ref2 : new Date()),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    viewDate = _React$useState2[0],\n    setViewDate = _React$useState2[1];\n  var _React$useState3 = React.useState(),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    focusedDay = _React$useState4[0],\n    setFocusedDay = _React$useState4[1];\n  var setPrevMonth = React.useCallback(function () {\n    onPrevMonth === null || onPrevMonth === void 0 ? void 0 : onPrevMonth();\n    setViewDate(subMonths(viewDate, 1));\n  }, [viewDate, onPrevMonth]);\n  var setNextMonth = React.useCallback(function () {\n    onNextMonth === null || onNextMonth === void 0 ? void 0 : onNextMonth();\n    setViewDate(addMonths(viewDate, 1));\n  }, [viewDate, onNextMonth]);\n  var handleSetViewDate = React.useCallback(function (value) {\n    onHeaderChange === null || onHeaderChange === void 0 ? void 0 : onHeaderChange(value);\n    setViewDate(value);\n  }, [onHeaderChange]);\n  var isDayFocused = React.useCallback(function (day) {\n    return Boolean(focusedDay && isSameDay(day, focusedDay));\n  }, [focusedDay]);\n  var isDayDisabled = React.useCallback(function (day) {\n    var now = new Date();\n    var disabled = false;\n    if (disablePast) {\n      disabled = isBefore(endOfDay(day), now);\n    }\n    if (disableFuture) {\n      disabled = isAfter(startOfDay(day), now);\n    }\n    if (shouldDisableDate) {\n      disabled = shouldDisableDate(day);\n    }\n    return disabled;\n  }, [disableFuture, disablePast, shouldDisableDate]);\n  var resetSelectedDay = React.useCallback(function () {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n  return {\n    viewDate: viewDate,\n    setViewDate: handleSetViewDate,\n    setPrevMonth: setPrevMonth,\n    setNextMonth: setNextMonth,\n    focusedDay: focusedDay,\n    setFocusedDay: setFocusedDay,\n    isDayFocused: isDayFocused,\n    isDayDisabled: isDayDisabled,\n    resetSelectedDay: resetSelectedDay\n  };\n}","map":{"version":3,"names":["React","subMonths","addMonths","isSameDay","isBefore","endOfDay","isAfter","startOfDay","useCalendar","_ref","_ref2","value","disablePast","disableFuture","shouldDisableDate","onHeaderChange","onNextMonth","onPrevMonth","_React$useState","useState","Array","isArray","Date","_React$useState2","_slicedToArray","viewDate","setViewDate","_React$useState3","_React$useState4","focusedDay","setFocusedDay","setPrevMonth","useCallback","setNextMonth","handleSetViewDate","isDayFocused","day","Boolean","isDayDisabled","now","disabled","resetSelectedDay","undefined"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\hooks\\useCalendar.ts"],"sourcesContent":["import * as React from 'react';\nimport {\n  subMonths,\n  addMonths,\n  isSameDay,\n  isBefore,\n  endOfDay,\n  isAfter,\n  startOfDay,\n} from '../lib/date';\nimport { CalendarProps } from '../components/Calendar/Calendar';\n\nexport interface UseCalendarDependencies\n  extends Pick<CalendarProps, 'onHeaderChange' | 'onNextMonth' | 'onPrevMonth'> {\n  value?: Array<Date | null> | Date;\n  disablePast?: boolean;\n  disableFuture?: boolean;\n  shouldDisableDate?(value: Date): boolean;\n}\n\nexport function useCalendar({\n  value,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n  onHeaderChange,\n  onNextMonth,\n  onPrevMonth,\n}: UseCalendarDependencies) {\n  const [viewDate, setViewDate] = React.useState(\n    (Array.isArray(value) ? value[0] : value) ?? new Date(),\n  );\n  const [focusedDay, setFocusedDay] = React.useState<Date>();\n\n  const setPrevMonth = React.useCallback(() => {\n    onPrevMonth?.();\n    setViewDate(subMonths(viewDate, 1));\n  }, [viewDate, onPrevMonth]);\n  const setNextMonth = React.useCallback(() => {\n    onNextMonth?.();\n    setViewDate(addMonths(viewDate, 1));\n  }, [viewDate, onNextMonth]);\n\n  const handleSetViewDate = React.useCallback(\n    (value: Date) => {\n      onHeaderChange?.(value);\n      setViewDate(value);\n    },\n    [onHeaderChange],\n  );\n\n  const isDayFocused = React.useCallback(\n    (day: Date) => Boolean(focusedDay && isSameDay(day, focusedDay)),\n    [focusedDay],\n  );\n\n  const isDayDisabled = React.useCallback(\n    (day: Date) => {\n      const now = new Date();\n      let disabled = false;\n      if (disablePast) {\n        disabled = isBefore(endOfDay(day), now);\n      }\n      if (disableFuture) {\n        disabled = isAfter(startOfDay(day), now);\n      }\n      if (shouldDisableDate) {\n        disabled = shouldDisableDate(day);\n      }\n\n      return disabled;\n    },\n    [disableFuture, disablePast, shouldDisableDate],\n  );\n\n  const resetSelectedDay = React.useCallback(() => {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n\n  return {\n    viewDate,\n    setViewDate: handleSetViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}