{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar CustomStorage = /*#__PURE__*/function () {\n  function CustomStorage() {\n    var _this = this;\n    _classCallCheck(this, CustomStorage);\n    _defineProperty(this, \"data\", {});\n    _defineProperty(this, \"getItem\", function (key) {\n      return _this.data.hasOwnProperty(key) ? _this.data[key] : null;\n    });\n    _defineProperty(this, \"keys\", function () {\n      return Object.keys(_this.data);\n    });\n  }\n  _createClass(CustomStorage, [{\n    key: \"setItem\",\n    value: function setItem(key, val) {\n      this.data[key] = String(val);\n    }\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(id) {\n      delete this.data[id];\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.data = {};\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return Object.keys(this.data).length;\n    }\n  }, {\n    key: \"key\",\n    value: function key(index) {\n      return Object.keys(this.data)[index];\n    }\n  }]);\n  return CustomStorage;\n}();\nvar dummyKey = 'vk-ls-dummy';\nvar dummyContent = 'test';\nvar ls;\nfunction getLocalStorage() {\n  if (ls) {\n    return ls;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.localStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.localStorage.getItem(dummyKey)) {\n      throw new Error('localStorage is broken');\n    }\n    window.localStorage.removeItem(dummyKey);\n    ls = window.localStorage;\n  } catch (e) {\n    ls = new CustomStorage();\n  }\n  return ls;\n}\n\n/**\n * Обертка над localStorage для кода, который может использоваться на других сайтах\n * Firefox блокирует доступ к localStorage для скриптов с других доменов\n */\nexport var localStorage = {\n  setItem: function setItem(key, val) {\n    return getLocalStorage().setItem(key, val);\n  },\n  getItem: function getItem(key) {\n    return getLocalStorage().getItem(key);\n  },\n  removeItem: function removeItem(key) {\n    return getLocalStorage().removeItem(key);\n  },\n  clear: function clear() {\n    return getLocalStorage().clear();\n  },\n  length: function length() {\n    return getLocalStorage().length;\n  },\n  key: function key(index) {\n    return getLocalStorage().key(index);\n  },\n  keys: function keys() {\n    var storage = getLocalStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: function getPrefixedKeys(prefix) {\n    return localStorage.keys().filter(function (key) {\n      return key.startsWith(prefix);\n    });\n  }\n};\nvar sessionStorageCache;\nfunction getSessionStorage() {\n  if (sessionStorageCache) {\n    return sessionStorageCache;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.sessionStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.sessionStorage.getItem(dummyKey)) {\n      throw new Error('sessionStorage is broken');\n    }\n    window.sessionStorage.removeItem(dummyKey);\n    sessionStorageCache = window.sessionStorage;\n  } catch (e) {\n    sessionStorageCache = new CustomStorage();\n  }\n  return sessionStorageCache;\n}\nexport var sessionStorage = {\n  setItem: function setItem(key, val) {\n    return getSessionStorage().setItem(key, val);\n  },\n  getItem: function getItem(key) {\n    return getSessionStorage().getItem(key);\n  },\n  removeItem: function removeItem(key) {\n    return getSessionStorage().removeItem(key);\n  },\n  clear: function clear() {\n    return getSessionStorage().clear();\n  },\n  length: function length() {\n    return getSessionStorage().length;\n  },\n  key: function key(index) {\n    return getSessionStorage().key(index);\n  },\n  keys: function keys() {\n    var storage = getSessionStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: function getPrefixedKeys(prefix) {\n    return sessionStorage.keys().filter(function (key) {\n      return key.startsWith(prefix);\n    });\n  }\n};","map":{"version":3,"names":["CustomStorage","_this","_classCallCheck","_defineProperty","key","data","hasOwnProperty","Object","keys","_createClass","value","setItem","val","String","removeItem","id","clear","get","length","index","dummyKey","dummyContent","ls","getLocalStorage","window","localStorage","getItem","Error","e","storage","getPrefixedKeys","prefix","filter","startsWith","sessionStorageCache","getSessionStorage","sessionStorage"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkjs\\src\\storage.ts"],"sourcesContent":["import { Dictionary } from './types';\n\nclass CustomStorage {\n  private data: Dictionary<string> = {};\n\n  public setItem(key: string, val: string) {\n    this.data[key] = String(val);\n  }\n\n  public getItem = (key: string) => (this.data.hasOwnProperty(key) ? this.data[key] : null);\n\n  public removeItem(id: string) {\n    delete this.data[id];\n  }\n\n  public clear() {\n    this.data = {};\n  }\n\n  public get length() {\n    return Object.keys(this.data).length;\n  }\n\n  public key(index: number): string | null {\n    return Object.keys(this.data)[index];\n  }\n\n  public keys = (): string[] => Object.keys(this.data);\n}\n\nconst dummyKey = 'vk-ls-dummy';\nconst dummyContent = 'test';\n\nlet ls: CustomStorage | Storage;\n\nfunction getLocalStorage() {\n  if (ls) {\n    return ls;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.localStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.localStorage.getItem(dummyKey)) {\n      throw new Error('localStorage is broken');\n    }\n    window.localStorage.removeItem(dummyKey);\n    ls = window.localStorage;\n  } catch (e) {\n    ls = new CustomStorage();\n  }\n  return ls;\n}\n\n/**\n * Обертка над localStorage для кода, который может использоваться на других сайтах\n * Firefox блокирует доступ к localStorage для скриптов с других доменов\n */\nexport const localStorage = {\n  setItem: (key: string, val: string) => getLocalStorage().setItem(key, val),\n  getItem: (key: string) => getLocalStorage().getItem(key),\n  removeItem: (key: string) => getLocalStorage().removeItem(key),\n  clear: () => getLocalStorage().clear(),\n  length: () => getLocalStorage().length,\n  key: (index: number) => getLocalStorage().key(index),\n  keys(): string[] {\n    const storage = getLocalStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: (prefix: string): string[] => {\n    return localStorage.keys().filter((key) => key.startsWith(prefix));\n  },\n};\n\nlet sessionStorageCache: CustomStorage | Storage;\n\nfunction getSessionStorage() {\n  if (sessionStorageCache) {\n    return sessionStorageCache;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.sessionStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.sessionStorage.getItem(dummyKey)) {\n      throw new Error('sessionStorage is broken');\n    }\n    window.sessionStorage.removeItem(dummyKey);\n    sessionStorageCache = window.sessionStorage;\n  } catch (e) {\n    sessionStorageCache = new CustomStorage();\n  }\n  return sessionStorageCache;\n}\n\nexport const sessionStorage = {\n  setItem: (key: string, val: string) => getSessionStorage().setItem(key, val),\n  getItem: (key: string) => getSessionStorage().getItem(key),\n  removeItem: (key: string) => getSessionStorage().removeItem(key),\n  clear: () => getSessionStorage().clear(),\n  length: () => getSessionStorage().length,\n  key: (index: number) => getSessionStorage().key(index),\n  keys(): string[] {\n    const storage = getSessionStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: (prefix: string): string[] => {\n    return sessionStorage.keys().filter((key) => key.startsWith(prefix));\n  },\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}