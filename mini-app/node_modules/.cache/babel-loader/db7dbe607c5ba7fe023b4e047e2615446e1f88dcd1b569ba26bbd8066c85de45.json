{"ast":null,"code":"var _jsxFileName = \"E:\\\\lessonReactForm\\\\mini-app\\\\src\\\\panels\\\\Home.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Panel, Group } from '@vkontakte/vkui';\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useForm } from \"react-hook-form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n;\nconst Home = _ref => {\n  _s();\n  let {\n    id,\n    go,\n    fetchedUser\n  } = _ref;\n  const [kek, setKek] = useState(false);\n  const [info, setInfo] = useState([]);\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const onSubmit = data => console.log(data);\n  console.log(watch(\"example\")); // watch input value by passing the name of it\n\n  async function fetchApi() {\n    const dataApi = await axios.get('https://63c682584ebaa802854750c5.mockapi.io/test1');\n    console.log('123', data);\n    return dataApi.data;\n  }\n  async function createApi(data) {\n    const dataZ = await axios.post('https://63c682584ebaa802854750c5.mockapi.io/test1', data);\n    console.log('66', dataZ);\n  }\n  const data = useQuery('api', fetchApi);\n  console.log('222', data);\n  const onSumbit = event => {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const fields = Object.fromEntries(formData);\n    console.log('zzzzz', formData);\n    console.log('vvvv', fields);\n    mutation.mutate(fields);\n    event.target.reset();\n  };\n  const queryClient = useQueryClient();\n  const mutation = useMutation(newProduct => createApi(newProduct), {\n    onSuccess: () => queryClient.invalidateQueries(['api'])\n  });\n  return /*#__PURE__*/_jsxDEV(Panel, {\n    id: id,\n    children: /*#__PURE__*/_jsxDEV(Group, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: data.data !== undefined && data.data.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: item.name\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 5\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSumbit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          type: \"text\",\n          placeholder: \"name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"text\",\n          type: \"text\",\n          placeholder: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"price\",\n          type: \"text\",\n          placeholder: \"price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 2\n  }, this);\n};\n_s(Home, \"bLV6kgNUKXrjaMwn1c4WJF8PIx0=\", false, function () {\n  return [useForm, useQuery, useQueryClient, useMutation];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","axios","Panel","Group","useMutation","useQuery","useQueryClient","useForm","jsxDEV","_jsxDEV","Home","_ref","_s","id","go","fetchedUser","kek","setKek","info","setInfo","register","handleSubmit","watch","formState","errors","onSubmit","data","console","log","fetchApi","dataApi","get","createApi","dataZ","post","onSumbit","event","preventDefault","formData","FormData","target","fields","Object","fromEntries","mutation","mutate","reset","queryClient","newProduct","onSuccess","invalidateQueries","children","undefined","map","item","name","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","_c","$RefreshReg$"],"sources":["E:/lessonReactForm/mini-app/src/panels/Home.tsx"],"sourcesContent":["import React, { MouseEventHandler, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {clsx} from 'clsx';\nimport axios from 'axios';\n\nimport { Panel, PanelHeader, Header, Button, Group, Cell, Div, Avatar } from '@vkontakte/vkui';\nimport { UserInfo } from '@vkontakte/vk-bridge';\nimport { QueryClient, useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useForm, SubmitHandler } from \"react-hook-form\";\n\ninterface Props {\n\tid: string;\n\tgo: MouseEventHandler<HTMLElement>;\n\tfetchedUser?: UserInfo;\n}\ninterface Inputs  {\n\texample: string,\n\texampleRequired: string,\n};\n\n\n\nconst Home: React.FC<Props> = ({ id, go, fetchedUser }) => {\n\tconst [kek,setKek] = useState<boolean>(false)\n\tconst [info,setInfo] = useState([])\n\n\tconst { register, handleSubmit, watch, formState: { errors } } = useForm<Inputs>();\n  const onSubmit: SubmitHandler<Inputs> = data => console.log(data);\n\n  console.log(watch(\"example\")) // watch input value by passing the name of it\n\n\tasync function fetchApi() {\n\t\tconst dataApi = await axios.get('https://63c682584ebaa802854750c5.mockapi.io/test1')\n\t\tconsole.log('123',data)\n\t\treturn dataApi.data\n\t}\n\n\tasync function createApi(data:any) {\n\t\tconst dataZ = await axios.post('https://63c682584ebaa802854750c5.mockapi.io/test1',\n\t\tdata)\n\t\tconsole.log('66',dataZ)\n\t\t\n\t}\n\n\tconst data:any = useQuery('api',fetchApi)\n\tconsole.log('222',data)\n\t\n\t\n\tconst onSumbit = (event:any)=>{\n\t\tevent.preventDefault()\n\n\t\tconst formData = new FormData(event.target)\n\t\tconst fields:any = Object.fromEntries(formData)\n\t\t\n\t\tconsole.log('zzzzz',formData)\n\t\tconsole.log('vvvv',fields)\n\t\tmutation.mutate(fields)\n\t\tevent.target.reset()\n\t}\n\tconst queryClient = useQueryClient()\n\n\tconst mutation = useMutation((newProduct)=>createApi(newProduct),\n\t{onSuccess:()=>queryClient.invalidateQueries(['api'])}\n\t)\n\n\treturn(\n\t<Panel id={id}>\n\t\t{/* <PanelHeader>Example</PanelHeader>\n\t\t{fetchedUser &&\n\t\t<Group header={<Header mode=\"secondary\">User Data Fetched with VK Bridge</Header>}>\n\t\t\t<Cell\n\t\t\t\tbefore={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\n\t\t\t\tsubtitle={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}\n\t\t\t>\n\t\t\t\t{`${fetchedUser.first_name} ${fetchedUser.last_name}`}\n\t\t\t</Cell>\n\t\t</Group>} */}\n\n\t\t<Group>\n\t\t\t{/* <div className={clsx('sss',kek&&'sss1')}>хех</div>\n\t\t\t<button onClick={()=>setKek(prev=>!prev)}>жжж</button> */}\n\t\t\t<div>{data.data !== undefined  &&\n\t\t\tdata.data.map((item:any)=>{\n\t\t\t\treturn(\n\t\t\t\t<div key={item.id}>{item.name}</div>)\n\t\t\t})}</div>\n\n\t\t\t<form onSubmit={onSumbit}>\n\t\t\t\t<input name='name' type='text' placeholder='name'/>\n\t\t\t\t<input name='text' type='text' placeholder='text'/>\n\t\t\t\t<input name='price' type='text' placeholder='price'/>\n\t\t\t\t<button>Отправить</button>\n\n\n\t\t\t</form>\n\t\t</Group>\n\n\n\t\t{/* <Group header={<Header mode=\"secondary\">Navigation Example</Header>}>\n\t\t\t<Div>\n\t\t\t\t<Button stretched size=\"l\" mode=\"secondary\" onClick={go} data-to=\"persik\">\n\t\t\t\t\tShow me the Persik, please\n\t\t\t\t</Button>\n\t\t\t</Div>\n\t\t</Group> */}\n\t</Panel>\n\t)\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}