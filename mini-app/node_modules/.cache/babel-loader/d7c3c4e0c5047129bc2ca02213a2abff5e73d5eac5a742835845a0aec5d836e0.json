{"ast":null,"code":"/**\n * Loads async import with retries. It can be useful for bad internet connection\n *\n * @example\n * const HeaderLazyComponent = React.lazy(() => asyncImportLoader(() => import('../components/Header/Header')));\n *\n * @example\n * asyncImportLoader(() => import('some-module'), 20).then((someModule) => {\n *   someModule.init();\n * });\n */\nexport var asyncImportLoader = function asyncImportLoader(asyncImport) {\n  var attempts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n  return new Promise(function (resolve, reject) {\n    asyncImport().then(resolve)[\"catch\"](function (error) {\n      setTimeout(function () {\n        if (attempts === 0) {\n          reject(error);\n          return;\n        }\n        asyncImportLoader(asyncImport, attempts - 1).then(resolve, reject);\n      }, 1000);\n    });\n  });\n};","map":{"version":3,"names":["asyncImportLoader","asyncImport","attempts","arguments","length","undefined","Promise","resolve","reject","then","error","setTimeout"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkjs\\src\\async.ts"],"sourcesContent":["/**\n * Loads async import with retries. It can be useful for bad internet connection\n *\n * @example\n * const HeaderLazyComponent = React.lazy(() => asyncImportLoader(() => import('../components/Header/Header')));\n *\n * @example\n * asyncImportLoader(() => import('some-module'), 20).then((someModule) => {\n *   someModule.init();\n * });\n */\nexport const asyncImportLoader = <T>(asyncImport: () => Promise<T>, attempts = 10): Promise<T> => {\n  return new Promise((resolve, reject) => {\n    asyncImport()\n      .then(resolve)\n      .catch((error) => {\n        setTimeout(() => {\n          if (attempts === 0) {\n            reject(error);\n            return;\n          }\n          asyncImportLoader(asyncImport, attempts - 1).then(resolve, reject);\n        }, 1000);\n      });\n  });\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMA,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAOC,WAA6B,EAAgC;EAAA,IAA9BC,QAAQ,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAC/E,OAAO,IAAIG,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;IACtCP,WAAW,EAAE,CACVQ,IAAI,CAACF,OAAO,CAAC,SACR,CAAC,UAACG,KAAK,EAAK;MAChBC,UAAU,CAAC,YAAM;QACf,IAAIT,QAAQ,KAAK,CAAC,EAAE;UAClBM,MAAM,CAACE,KAAK,CAAC;UACb;QACF;QACAV,iBAAiB,CAACC,WAAW,EAAEC,QAAQ,GAAG,CAAC,CAAC,CAACO,IAAI,CAACF,OAAO,EAAEC,MAAM,CAAC;MACpE,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC;EACN,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}