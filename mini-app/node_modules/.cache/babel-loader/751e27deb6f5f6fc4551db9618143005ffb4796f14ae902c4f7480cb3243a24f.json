{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"id\"];\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { transitionEvent } from '../../lib/supportEvents';\nimport { withPlatform } from '../../hoc/withPlatform';\nimport { withContext } from '../../hoc/withContext';\nimport { ModalRootContext } from './ModalRootContext';\nimport { ConfigProviderContext, WebviewType } from '../ConfigProvider/ConfigProviderContext';\nimport { Platform } from '../../lib/platform';\nimport { withDOM } from '../../lib/dom';\nimport { getNavId } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { withModalManager } from './useModalManager';\nimport { clamp } from '../../helpers/math';\nvar warn = warnOnce('ModalRoot');\nvar ModalRootDesktopComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(ModalRootDesktopComponent, _React$Component);\n  var _super = _createSuper(ModalRootDesktopComponent);\n  function ModalRootDesktopComponent(props) {\n    var _this;\n    _classCallCheck(this, ModalRootDesktopComponent);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"maskElementRef\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"maskAnimationFrame\", undefined);\n    _defineProperty(_assertThisInitialized(_this), \"modalRootContext\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"restoreFocusTo\", undefined);\n    _this.maskElementRef = /*#__PURE__*/React.createRef();\n    _this.modalRootContext = {\n      updateModalHeight: function updateModalHeight() {\n        return undefined;\n      },\n      registerModal: function registerModal(_ref) {\n        var _this$getModalState;\n        var id = _ref.id,\n          data = _objectWithoutProperties(_ref, _excluded);\n        return Object.assign((_this$getModalState = _this.getModalState(id)) !== null && _this$getModalState !== void 0 ? _this$getModalState : {}, data);\n      },\n      onClose: function onClose() {\n        return _this.props.onExit();\n      },\n      isInsideModal: true\n    };\n    return _this;\n  }\n  _createClass(ModalRootDesktopComponent, [{\n    key: \"timeout\",\n    get: function get() {\n      return this.props.platform === Platform.IOS ? 400 : 320;\n    }\n  }, {\n    key: \"modals\",\n    get: function get() {\n      return React.Children.toArray(this.props.children);\n    }\n  }, {\n    key: \"getModalState\",\n    value: function getModalState(id) {\n      if (id === null) {\n        return undefined;\n      }\n      return this.props.getModalState(id);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // transition phase 2: animate exiting modal\n      if (this.props.exitingModal && this.props.exitingModal !== prevProps.exitingModal) {\n        this.closeModal(this.props.exitingModal);\n      }\n\n      // transition phase 3: animate entering modal\n      if (this.props.enteringModal && this.props.enteringModal !== prevProps.enteringModal) {\n        this.openModal(prevProps);\n      }\n\n      // focus restoration\n      if (this.props.activeModal && !prevProps.activeModal) {\n        var _this$props$document$, _this$props$document;\n        this.restoreFocusTo = (_this$props$document$ = (_this$props$document = this.props.document) === null || _this$props$document === void 0 ? void 0 : _this$props$document.activeElement) !== null && _this$props$document$ !== void 0 ? _this$props$document$ : undefined;\n      }\n      if (!this.props.activeModal && !this.props.exitingModal && this.restoreFocusTo) {\n        this.restoreFocusTo.focus();\n        this.restoreFocusTo = undefined;\n      }\n    }\n  }, {\n    key: \"openModal\",\n    value: function openModal(prevProps) {\n      var _this2 = this;\n      var enteringModal = this.props.enteringModal;\n      if (!enteringModal) {\n        return;\n      }\n      var enteringState = this.getModalState(enteringModal);\n      this.props.onEnter();\n\n      // Анимация открытия модального окна\n      if (!prevProps.exitingModal) {\n        requestAnimationFrame(function () {\n          if (_this2.props.enteringModal === enteringModal) {\n            _this2.waitTransitionFinish(enteringState, function () {\n              return _this2.props.onEntered(enteringModal);\n            });\n            _this2.animateModalOpacity(enteringState, true);\n          }\n        });\n        return;\n      }\n\n      // Переход между модальными окнами без анимации\n      if (enteringState !== null && enteringState !== void 0 && enteringState.innerElement) {\n        enteringState.innerElement.style.transition = 'none';\n        enteringState.innerElement.style.opacity = '1';\n      }\n      this.props.onEntered(enteringModal);\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal(id) {\n      var _this3 = this;\n      var prevModalState = this.getModalState(id);\n      if (!prevModalState) {\n        return;\n      }\n\n      // Анимация закрытия модального окна\n      if (!this.props.activeModal) {\n        requestAnimationFrame(function () {\n          _this3.waitTransitionFinish(prevModalState, function () {\n            return _this3.props.onExited(id);\n          });\n          _this3.animateModalOpacity(prevModalState, false);\n          _this3.setMaskOpacity(prevModalState, 0);\n        });\n        return;\n      }\n\n      // Переход между модальными окнами без анимации\n      this.props.onExited(id);\n    }\n  }, {\n    key: \"waitTransitionFinish\",\n    value: function waitTransitionFinish(modalState, eventHandler) {\n      if (transitionEvent.supported) {\n        var _modalState$innerElem2;\n        var onceHandler = function onceHandler() {\n          var _modalState$innerElem;\n          modalState === null || modalState === void 0 ? void 0 : (_modalState$innerElem = modalState.innerElement) === null || _modalState$innerElem === void 0 ? void 0 : _modalState$innerElem.removeEventListener(transitionEvent.name, onceHandler);\n          eventHandler();\n        };\n        modalState === null || modalState === void 0 ? void 0 : (_modalState$innerElem2 = modalState.innerElement) === null || _modalState$innerElem2 === void 0 ? void 0 : _modalState$innerElem2.addEventListener(transitionEvent.name, onceHandler);\n      } else {\n        setTimeout(eventHandler, this.timeout);\n      }\n    }\n\n    /* Анимирует сдвиг модалки */\n  }, {\n    key: \"animateModalOpacity\",\n    value: function animateModalOpacity(modalState, display) {\n      if (modalState !== null && modalState !== void 0 && modalState.innerElement) {\n        modalState.innerElement.style.transition = '';\n        modalState.innerElement.style.transitionDelay = display && this.props.delayEnter ? \"\".concat(this.timeout, \"ms\") : '';\n        modalState.innerElement.style.opacity = display ? '1' : '0';\n      }\n    }\n\n    /* Устанавливает прозрачность для полупрозрачной подложки */\n  }, {\n    key: \"setMaskOpacity\",\n    value: function setMaskOpacity(modalState) {\n      var _this$props$history,\n        _this4 = this;\n      var forceOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      if (forceOpacity === null && ((_this$props$history = this.props.history) === null || _this$props$history === void 0 ? void 0 : _this$props$history[0]) !== modalState.id) {\n        return;\n      }\n      if (this.maskAnimationFrame) {\n        cancelAnimationFrame(this.maskAnimationFrame);\n      }\n      this.maskAnimationFrame = requestAnimationFrame(function () {\n        if (_this4.maskElementRef.current) {\n          var _modalState$translate = modalState.translateY,\n            translateY = _modalState$translate === void 0 ? 0 : _modalState$translate,\n            _modalState$translate2 = modalState.translateYCurrent,\n            translateYCurrent = _modalState$translate2 === void 0 ? 0 : _modalState$translate2;\n          var opacity = forceOpacity === null ? 1 - (translateYCurrent - translateY) / (100 - translateY) || 0 : forceOpacity;\n          _this4.maskElementRef.current.style.opacity = clamp(opacity, 0, 100).toString();\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$configPro,\n        _this5 = this;\n      var _this$props = this.props,\n        exitingModal = _this$props.exitingModal,\n        activeModal = _this$props.activeModal;\n      if (!activeModal && !exitingModal) {\n        return null;\n      }\n      return /*#__PURE__*/React.createElement(ModalRootContext.Provider, {\n        value: this.modalRootContext\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(\"vkuiModalRoot\", ((_this$props$configPro = this.props.configProvider) === null || _this$props$configPro === void 0 ? void 0 : _this$props$configPro.webviewType) === WebviewType.VKAPPS && \"vkuiModalRoot--vkapps\", \"vkuiModalRoot--desktop\")\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"vkuiModalRoot__mask\",\n        ref: this.maskElementRef,\n        onClick: this.props.onExit\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"vkuiModalRoot__viewport\"\n      }, this.modals.map(function (Modal) {\n        var modalId = getNavId(Modal.props, warn);\n        if (modalId !== activeModal && modalId !== exitingModal) {\n          return null;\n        }\n        var key = \"modal-\".concat(modalId);\n        return /*#__PURE__*/React.createElement(FocusTrap, {\n          restoreFocus: false,\n          onClose: _this5.props.onExit,\n          timeout: _this5.timeout,\n          key: key,\n          className: \"vkuiModalRoot__modal\"\n        }, Modal);\n      }))));\n    }\n  }]);\n  return ModalRootDesktopComponent;\n}(React.Component);\nexport var ModalRootDesktop = withContext(withPlatform(withDOM(withModalManager()(ModalRootDesktopComponent))), ConfigProviderContext, 'configProvider');","map":{"version":3,"names":["React","classNames","transitionEvent","withPlatform","withContext","ModalRootContext","ConfigProviderContext","WebviewType","Platform","withDOM","getNavId","warnOnce","FocusTrap","withModalManager","clamp","warn","ModalRootDesktopComponent","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","undefined","maskElementRef","createRef","modalRootContext","updateModalHeight","registerModal","_ref","_this$getModalState","id","data","_objectWithoutProperties","_excluded","Object","assign","getModalState","onClose","onExit","isInsideModal","_createClass","key","get","platform","IOS","Children","toArray","children","value","componentDidUpdate","prevProps","exitingModal","closeModal","enteringModal","openModal","activeModal","_this$props$document$","_this$props$document","restoreFocusTo","document","activeElement","focus","_this2","enteringState","onEnter","requestAnimationFrame","waitTransitionFinish","onEntered","animateModalOpacity","innerElement","style","transition","opacity","_this3","prevModalState","onExited","setMaskOpacity","modalState","eventHandler","supported","_modalState$innerElem2","onceHandler","_modalState$innerElem","removeEventListener","name","addEventListener","setTimeout","timeout","display","transitionDelay","delayEnter","concat","_this$props$history","_this4","forceOpacity","arguments","length","history","maskAnimationFrame","cancelAnimationFrame","current","_modalState$translate","translateY","_modalState$translate2","translateYCurrent","toString","render","_this$props$configPro","_this5","_this$props","createElement","Provider","className","configProvider","webviewType","VKAPPS","ref","onClick","modals","map","Modal","modalId","restoreFocus","Component","ModalRootDesktop"],"sources":["E:\\lessonReactForm\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\ModalRoot\\ModalRootDesktop.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { transitionEvent } from '../../lib/supportEvents';\nimport { HasPlatform } from '../../types';\nimport { withPlatform } from '../../hoc/withPlatform';\nimport { withContext } from '../../hoc/withContext';\nimport { ModalRootContext, ModalRootContextInterface } from './ModalRootContext';\nimport {\n  ConfigProviderContext,\n  ConfigProviderContextInterface,\n  WebviewType,\n} from '../ConfigProvider/ConfigProviderContext';\nimport { ModalsStateEntry } from './types';\nimport { Platform } from '../../lib/platform';\nimport { DOMProps, withDOM } from '../../lib/dom';\nimport { getNavId } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { ModalTransitionProps, withModalManager } from './useModalManager';\nimport { clamp } from '../../helpers/math';\nimport styles from './ModalRoot.module.css';\n\nconst warn = warnOnce('ModalRoot');\n\nexport interface ModalRootProps extends HasPlatform {\n  activeModal?: string | null;\n  /**\n   * @ignore\n   */\n  configProvider?: ConfigProviderContextInterface;\n  children?: React.ReactNode;\n\n  /**\n   * Будет вызвано при начале открытия активной модалки с её id\n   */\n  onOpen?(modalId: string): void;\n\n  /**\n   * Будет вызвано при окончательном открытии активной модалки с её id\n   */\n  onOpened?(modalId: string): void;\n\n  /**\n   * Будет вызвано при начале закрытия активной модалки с её id\n   */\n  onClose?(modalId: string): void;\n\n  /**\n   * Будет вызвано при окончательном закрытии активной модалки с её id\n   */\n  onClosed?(modalId: string): void;\n}\n\nclass ModalRootDesktopComponent extends React.Component<\n  ModalRootProps & DOMProps & ModalTransitionProps\n> {\n  constructor(props: ModalRootProps & ModalTransitionProps) {\n    super(props);\n\n    this.maskElementRef = React.createRef();\n\n    this.modalRootContext = {\n      updateModalHeight: () => undefined,\n      registerModal: ({ id, ...data }) => Object.assign(this.getModalState(id) ?? {}, data),\n      onClose: () => this.props.onExit(),\n      isInsideModal: true,\n    };\n  }\n\n  private readonly maskElementRef: React.RefObject<HTMLDivElement>;\n  private maskAnimationFrame: number | undefined = undefined;\n  private readonly modalRootContext: ModalRootContextInterface;\n  private restoreFocusTo: HTMLElement | undefined = undefined;\n\n  private get timeout() {\n    return this.props.platform === Platform.IOS ? 400 : 320;\n  }\n\n  private get modals() {\n    return React.Children.toArray(this.props.children) as React.ReactElement[];\n  }\n\n  getModalState(id: string | null) {\n    if (id === null) {\n      return undefined;\n    }\n    return this.props.getModalState(id);\n  }\n\n  componentDidUpdate(prevProps: ModalRootProps & ModalTransitionProps) {\n    // transition phase 2: animate exiting modal\n    if (this.props.exitingModal && this.props.exitingModal !== prevProps.exitingModal) {\n      this.closeModal(this.props.exitingModal);\n    }\n\n    // transition phase 3: animate entering modal\n    if (this.props.enteringModal && this.props.enteringModal !== prevProps.enteringModal) {\n      this.openModal(prevProps);\n    }\n\n    // focus restoration\n    if (this.props.activeModal && !prevProps.activeModal) {\n      this.restoreFocusTo = (this.props.document?.activeElement ?? undefined) as\n        | HTMLElement\n        | undefined;\n    }\n    if (!this.props.activeModal && !this.props.exitingModal && this.restoreFocusTo) {\n      this.restoreFocusTo.focus();\n      this.restoreFocusTo = undefined;\n    }\n  }\n\n  openModal(prevProps: ModalRootProps & ModalTransitionProps) {\n    const { enteringModal } = this.props;\n    if (!enteringModal) {\n      return;\n    }\n\n    const enteringState = this.getModalState(enteringModal);\n    this.props.onEnter();\n\n    // Анимация открытия модального окна\n    if (!prevProps.exitingModal) {\n      requestAnimationFrame(() => {\n        if (this.props.enteringModal === enteringModal) {\n          this.waitTransitionFinish(enteringState, () => this.props.onEntered(enteringModal));\n          this.animateModalOpacity(enteringState, true);\n        }\n      });\n\n      return;\n    }\n\n    // Переход между модальными окнами без анимации\n    if (enteringState?.innerElement) {\n      enteringState.innerElement.style.transition = 'none';\n      enteringState.innerElement.style.opacity = '1';\n    }\n\n    this.props.onEntered(enteringModal);\n  }\n\n  closeModal(id: string) {\n    const prevModalState = this.getModalState(id);\n    if (!prevModalState) {\n      return;\n    }\n\n    // Анимация закрытия модального окна\n    if (!this.props.activeModal) {\n      requestAnimationFrame(() => {\n        this.waitTransitionFinish(prevModalState, () => this.props.onExited(id));\n        this.animateModalOpacity(prevModalState, false);\n        this.setMaskOpacity(prevModalState, 0);\n      });\n\n      return;\n    }\n\n    // Переход между модальными окнами без анимации\n    this.props.onExited(id);\n  }\n\n  waitTransitionFinish(modalState: ModalsStateEntry | undefined, eventHandler: () => void) {\n    if (transitionEvent.supported) {\n      const onceHandler = () => {\n        modalState?.innerElement?.removeEventListener(transitionEvent.name as string, onceHandler);\n        eventHandler();\n      };\n\n      modalState?.innerElement?.addEventListener(transitionEvent.name as string, onceHandler);\n    } else {\n      setTimeout(eventHandler, this.timeout);\n    }\n  }\n\n  /* Анимирует сдвиг модалки */\n  animateModalOpacity(modalState: ModalsStateEntry | undefined, display: boolean) {\n    if (modalState?.innerElement) {\n      modalState.innerElement.style.transition = '';\n      modalState.innerElement.style.transitionDelay =\n        display && this.props.delayEnter ? `${this.timeout}ms` : '';\n      modalState.innerElement.style.opacity = display ? '1' : '0';\n    }\n  }\n\n  /* Устанавливает прозрачность для полупрозрачной подложки */\n  setMaskOpacity(modalState: ModalsStateEntry, forceOpacity: number | null = null) {\n    if (forceOpacity === null && this.props.history?.[0] !== modalState.id) {\n      return;\n    }\n\n    if (this.maskAnimationFrame) {\n      cancelAnimationFrame(this.maskAnimationFrame);\n    }\n    this.maskAnimationFrame = requestAnimationFrame(() => {\n      if (this.maskElementRef.current) {\n        const { translateY = 0, translateYCurrent = 0 } = modalState;\n\n        const opacity =\n          forceOpacity === null\n            ? 1 - (translateYCurrent - translateY) / (100 - translateY) || 0\n            : forceOpacity;\n        this.maskElementRef.current.style.opacity = clamp(opacity, 0, 100).toString();\n      }\n    });\n  }\n\n  render() {\n    const { exitingModal, activeModal } = this.props;\n\n    if (!activeModal && !exitingModal) {\n      return null;\n    }\n\n    return (\n      <ModalRootContext.Provider value={this.modalRootContext}>\n        <div\n          className={classNames(\n            styles['ModalRoot'],\n            this.props.configProvider?.webviewType === WebviewType.VKAPPS &&\n              styles['ModalRoot--vkapps'],\n            styles['ModalRoot--desktop'],\n          )}\n        >\n          <div\n            className={styles['ModalRoot__mask']}\n            ref={this.maskElementRef}\n            onClick={this.props.onExit}\n          />\n          <div className={styles['ModalRoot__viewport']}>\n            {this.modals.map((Modal: React.ReactElement) => {\n              const modalId = getNavId(Modal.props, warn);\n              if (modalId !== activeModal && modalId !== exitingModal) {\n                return null;\n              }\n\n              const key = `modal-${modalId}`;\n\n              return (\n                <FocusTrap\n                  restoreFocus={false}\n                  onClose={this.props.onExit}\n                  timeout={this.timeout}\n                  key={key}\n                  className={styles['ModalRoot__modal']}\n                >\n                  {Modal}\n                </FocusTrap>\n              );\n            })}\n          </div>\n        </div>\n      </ModalRootContext.Provider>\n    );\n  }\n}\n\nexport const ModalRootDesktop = withContext(\n  withPlatform(withDOM<ModalRootProps>(withModalManager()(ModalRootDesktopComponent))),\n  ConfigProviderContext,\n  'configProvider',\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}